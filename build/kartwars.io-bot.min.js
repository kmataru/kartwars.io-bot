function DBSCAN(t,e,o,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,o,n)}function KMEANS(t,e,o){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,o)}function PriorityQueue(t,e,o){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,o)}function OPTICS(t,e,o,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,o,n)}function Utils(){}var DracoolaArt;if(function(t){!function(t){!function(t){function e(t,e){var o=t[e];if("function"!=typeof o)throw new TypeError("@bound can only be used on methods.");return"function"==typeof t?{value:function(){return o.apply(t,arguments)}}:"object"==typeof t?{get:function(){var t=this;return Object.defineProperty(t,e.toString(),{value:function(){return o.apply(t,arguments)}}),t[e]}}:void 0}t.bound=e}(t.MethodDecoration||(t.MethodDecoration={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={})),DBSCAN.prototype.run=function(t,e,o,n){this._init(t,e,o,n);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);if(r.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,r)}}return this.clusters},DBSCAN.prototype._init=function(t,e,o,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),o&&(this.minPts=o),n&&(this.distance=n)},DBSCAN.prototype._expandCluster=function(t,e){for(var o=0;o<e.length;o++){var n=e[o];if(1!==this._visited[n]){this._visited[n]=1;var i=this._regionQuery(n);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[n]&&this._addToCluster(n,t)}},DBSCAN.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},DBSCAN.prototype._regionQuery=function(t){for(var e=[],o=0;o<this._datasetLength;o++){this.distance(this.dataset[t],this.dataset[o])<this.epsilon&&e.push(o)}return e},DBSCAN.prototype._mergeArrays=function(t,e){for(var o=e.length,n=0;o>n;n++){var i=e[n];t.indexOf(i)<0&&t.push(i)}return t},DBSCAN.prototype._euclideanDistance=function(t,e){for(var o=0,n=Math.min(t.length,e.length);n--;)o+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(o)},"undefined"!=typeof module&&module.exports&&(module.exports=DBSCAN),KMEANS.prototype.init=function(t,e,o){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==o&&(this.distance=o)},KMEANS.prototype.run=function(t,e){this.init(t,e);for(var o=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var r=0;r<this.k;r++){for(var a=new Array(u),s=0,c=0;u>c;c++)a[c]=0;for(var l=0;o>l;l++){var u=this.dataset[l].length;if(r===this.assignments[l]){for(var c=0;u>c;c++)a[c]+=this.dataset[l][c];s++}}if(s>0){for(var c=0;u>c;c++)a[c]/=s;this.centroids[r]=a}else this.centroids[r]=this.randomCentroid(),i=!0}}return this.getClusters()},KMEANS.prototype.randomCentroid=function(){var t,e,o=this.dataset.length-1;do{e=Math.round(Math.random()*o),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},KMEANS.prototype.assign=function(){for(var t,e=!1,o=this.dataset.length,n=0;o>n;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0);return e},KMEANS.prototype.getClusters=function(){for(var t,e=new Array(this.k),o=0;o<this.assignments.length;o++)t=this.assignments[o],void 0===e[t]&&(e[t]=[]),e[t].push(o);return e},KMEANS.prototype.argmin=function(t,e,o){for(var n,i=Number.MAX_VALUE,r=0,a=e.length,s=0;a>s;s++)n=o(t,e[s]),i>n&&(i=n,r=s);return r},KMEANS.prototype.distance=function(t,e){for(var o=0,n=Math.min(t.length,e.length);n--;){var i=t[n]-e[n];o+=i*i}return Math.sqrt(o)},"undefined"!=typeof module&&module.exports&&(module.exports=KMEANS),PriorityQueue.prototype.insert=function(t,e){for(var o=this._queue.length,n=o;n--;){var i=this._priorities[n];"desc"===this._sorting?e>i&&(o=n):i>e&&(o=n)}this._insertAt(t,e,o)},PriorityQueue.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},PriorityQueue.prototype.forEach=function(t){this._queue.forEach(t)},PriorityQueue.prototype.getElements=function(){return this._queue},PriorityQueue.prototype.getElementPriority=function(t){return this._priorities[t]},PriorityQueue.prototype.getPriorities=function(){return this._priorities},PriorityQueue.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,o=this._queue.length;o>e;e++)t.push([this._queue[e],this._priorities[e]]);return t},PriorityQueue.prototype._init=function(t,e,o){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}o&&(this._sorting=o)},PriorityQueue.prototype._insertAt=function(t,e,o){this._queue.length===o?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(o,0,t),this._priorities.splice(o,0,e))},"undefined"!=typeof module&&module.exports&&(module.exports=PriorityQueue),"undefined"!=typeof module&&module.exports)var PriorityQueue=require("./PriorityQueue.js");OPTICS.prototype.run=function(t,e,o,n){this._init(t,e,o,n);for(var i=0,r=this.dataset.length;r>i;i++)if(1!==this._processed[i]){this._processed[i]=1,this.clusters.push([i]);var a=this.clusters.length-1;this._orderedList.push(i);var s=new PriorityQueue(null,null,"asc"),c=this._regionQuery(i);void 0!==this._distanceToCore(i)&&(this._updateQueue(i,c,s),this._expandCluster(a,s))}return this.clusters},OPTICS.prototype.getReachabilityPlot=function(){for(var t=[],e=0,o=this._orderedList.length;o>e;e++){var n=this._orderedList[e],i=this._reachability[n];t.push([n,i])}return t},OPTICS.prototype._init=function(t,e,o,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),o&&(this.minPts=o),n&&(this.distance=n)},OPTICS.prototype._updateQueue=function(t,e,o){var n=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===n._processed[e]){var i=n.distance(n.dataset[t],n.dataset[e]),r=Math.max(n._coreDistance,i);void 0===n._reachability[e]?(n._reachability[e]=r,o.insert(e,r)):r<n._reachability[e]&&(n._reachability[e]=r,o.remove(e),o.insert(e,r))}})},OPTICS.prototype._expandCluster=function(t,e){for(var o=e.getElements(),n=0,i=o.length;i>n;n++){var r=o[n];if(void 0===this._processed[r]){var a=this._regionQuery(r);this._processed[r]=1,this.clusters[t].push(r),this._orderedList.push(r),void 0!==this._distanceToCore(r)&&(this._updateQueue(r,a,e),this._expandCluster(t,e))}}},OPTICS.prototype._distanceToCore=function(t){for(var e=this.epsilon,o=0;e>o;o++){if(this._regionQuery(t,o).length>=this.minPts)return o}},OPTICS.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var o=[],n=0,i=this.dataset.length;i>n;n++)this.distance(this.dataset[t],this.dataset[n])<e&&o.push(n);return o},OPTICS.prototype._euclideanDistance=function(t,e){for(var o=0,n=Math.min(t.length,e.length);n--;)o+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(o)},"undefined"!=typeof module&&module.exports&&(module.exports=OPTICS),KMEANS.prototype.getRandomVector=function(t){for(var e=t.length,o=[],n=0,i=0,r=0;e>r;r++){var a=t[r],s=Math.max(a.center-a.min,a.center-a.max);s>i&&(i=s)}for(var r=0;e>r;r++){var c=2*Math.random()-1;o.push(c),n+=c*c}n=Math.sqrt(n);for(var r=0;e>r;r++)o[r]/=n,o[r]*=i,o[r]+=t[r].center;return o},"undefined"!=typeof module&&module.exports&&(module.exports={DBSCAN:require("./DBSCAN.js"),KMEANS:require("./KMEANS.js"),OPTICS:require("./OPTICS.js"),PriorityQueue:require("./PriorityQueue.js")}),function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Victor=t()}}(function(){return function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=o[a]={exports:{}};e[a][0].call(l.exports,function(t){var o=e[a][1][t];return i(o||t)},l,l.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,o){function n(t,e){return this instanceof n?(this.x=t||0,void(this.y=e||0)):new n(t,e)}function i(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function r(t){return t*s}function a(t){return t/s}e.exports=n,n.fromArray=function(t){return new n(t[0]||0,t[1]||0)},n.fromObject=function(t){return new n(t.x||0,t.y||0)},n.prototype.addX=function(t){return this.x+=t.x,this},n.prototype.addY=function(t){return this.y+=t.y,this},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},n.prototype.addScalarX=function(t){return this.x+=t,this},n.prototype.addScalarY=function(t){return this.y+=t,this},n.prototype.subtractX=function(t){return this.x-=t.x,this},n.prototype.subtractY=function(t){return this.y-=t.y,this},n.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.subtractScalar=function(t){return this.x-=t,this.y-=t,this},n.prototype.subtractScalarX=function(t){return this.x-=t,this},n.prototype.subtractScalarY=function(t){return this.y-=t,this},n.prototype.divideX=function(t){return this.x/=t.x,this},n.prototype.divideY=function(t){return this.y/=t.y,this},n.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},n.prototype.divideScalar=function(t){return 0!==t?(this.x/=t,this.y/=t):(this.x=0,this.y=0),this},n.prototype.divideScalarX=function(t){return 0!==t?this.x/=t:this.x=0,this},n.prototype.divideScalarY=function(t){return 0!==t?this.y/=t:this.y=0,this},n.prototype.invertX=function(){return this.x*=-1,this},n.prototype.invertY=function(){return this.y*=-1,this},n.prototype.invert=function(){return this.invertX(),this.invertY(),this},n.prototype.multiplyX=function(t){return this.x*=t.x,this},n.prototype.multiplyY=function(t){return this.y*=t.y,this},n.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},n.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},n.prototype.multiplyScalarX=function(t){return this.x*=t,this},n.prototype.multiplyScalarY=function(t){return this.y*=t,this},n.prototype.normalize=function(){var t=this.length();return 0===t?(this.x=1,this.y=0):this.divide(n(t,t)),this},n.prototype.norm=n.prototype.normalize,n.prototype.limit=function(t,e){return Math.abs(this.x)>t&&(this.x*=e),Math.abs(this.y)>t&&(this.y*=e),this},n.prototype.randomize=function(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this},n.prototype.randomizeX=function(t,e){var o=Math.min(t.x,e.x),n=Math.max(t.x,e.x);return this.x=i(o,n),this},n.prototype.randomizeY=function(t,e){var o=Math.min(t.y,e.y),n=Math.max(t.y,e.y);return this.y=i(o,n),this},n.prototype.randomizeAny=function(t,e){return Math.round(Math.random())?this.randomizeX(t,e):this.randomizeY(t,e),this},n.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},n.prototype.toFixed=function(t){return void 0===t&&(t=8),this.x=this.x.toFixed(t),this.y=this.y.toFixed(t),this},n.prototype.mixX=function(t,e){return void 0===e&&(e=.5),this.x=(1-e)*this.x+e*t.x,this},n.prototype.mixY=function(t,e){return void 0===e&&(e=.5),this.y=(1-e)*this.y+e*t.y,this},n.prototype.mix=function(t,e){return this.mixX(t,e),this.mixY(t,e),this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyX=function(t){return this.x=t.x,this},n.prototype.copyY=function(t){return this.y=t.y,this},n.prototype.copy=function(t){return this.copyX(t),this.copyY(t),this},n.prototype.zero=function(){return this.x=this.y=0,this},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.cross=function(t){return this.x*t.y-this.y*t.x},n.prototype.projectOnto=function(t){var e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this},n.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},n.prototype.horizontalAngleDeg=function(){return r(this.horizontalAngle())},n.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},n.prototype.verticalAngleDeg=function(){return r(this.verticalAngle())},n.prototype.angle=n.prototype.horizontalAngle,n.prototype.angleDeg=n.prototype.horizontalAngleDeg,n.prototype.direction=n.prototype.horizontalAngle,n.prototype.rotate=function(t){var e=this.x*Math.cos(t)-this.y*Math.sin(t),o=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=o,this},n.prototype.rotateDeg=function(t){return t=a(t),this.rotate(t)},n.prototype.rotateTo=function(t){return this.rotate(t-this.angle())},n.prototype.rotateToDeg=function(t){return t=a(t),this.rotateTo(t)},n.prototype.rotateBy=function(t){var e=this.angle()+t;return this.rotate(e)},n.prototype.rotateByDeg=function(t){return t=a(t),this.rotateBy(t)},n.prototype.distanceX=function(t){return this.x-t.x},n.prototype.absDistanceX=function(t){return Math.abs(this.distanceX(t))},n.prototype.distanceY=function(t){return this.y-t.y},n.prototype.absDistanceY=function(t){return Math.abs(this.distanceY(t))},n.prototype.distance=function(t){return Math.sqrt(this.distanceSq(t))},n.prototype.distanceSq=function(t){var e=this.distanceX(t),o=this.distanceY(t);return e*e+o*o},n.prototype.length=function(){return Math.sqrt(this.lengthSq())},n.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},n.prototype.magnitude=n.prototype.length,n.prototype.isZero=function(){return 0===this.x&&0===this.y},n.prototype.isEqualTo=function(t){return this.x===t.x&&this.y===t.y},n.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},n.prototype.toArray=function(){return[this.x,this.y]},n.prototype.toObject=function(){return{x:this.x,y:this.y}};var s=180/Math.PI},{}]},{},[1])(1)}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.dat=e():t.dat=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";t.exports=o(1)},function(t,e,o){"use strict";t.exports={color:{Color:o(2),math:o(6),interpret:o(3)},controllers:{Controller:o(7),BooleanController:o(8),OptionController:o(10),StringController:o(11),NumberController:o(12),NumberControllerBox:o(13),NumberControllerSlider:o(14),FunctionController:o(20),ColorController:o(21)},dom:{dom:o(9)},gui:{GUI:o(22)},GUI:o(22)}},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,o){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(g.recalculateRGB(this,e,o),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(g.recalculateRGB(this,e,o),this.__state.space="RGB"),this.__state[e]=t}})}function a(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(g.recalculateHSV(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(g.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}e.__esModule=!0;var s=o(3),c=n(s),l=o(6),u=n(l),d=o(4),h=n(d),p=o(5),f=n(p),g=function(){function t(){if(i(this,t),this.__state=c.default.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return t.prototype.toString=function(){return h.default(this)},t.prototype.toOriginal=function(){return this.__state.conversion.write(this)},t}();g.recalculateRGB=function(t,e,o){if("HEX"===t.__state.space)t.__state[e]=u.default.component_from_hex(t.__state.hex,o);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");f.default.extend(t.__state,u.default.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},g.recalculateHSV=function(t){var e=u.default.rgb_to_hsv(t.r,t.g,t.b);f.default.extend(t.__state,{s:e.s,v:e.v}),f.default.isNaN(e.h)?f.default.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},g.COMPONENTS=["r","g","b","h","s","v","hex","a"],r(g.prototype,"r",2),r(g.prototype,"g",1),r(g.prototype,"b",0),a(g.prototype,"h"),a(g.prototype,"s"),a(g.prototype,"v"),Object.defineProperty(g.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(g.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=u.default.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),e.default=g,t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=o(4),r=n(i),a=o(5),s=n(a),c=[{litmus:s.default.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:r.default},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:r.default},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:r.default},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:r.default}}},{litmus:s.default.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:s.default.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:s.default.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(s.default.isNumber(t.r)&&s.default.isNumber(t.g)&&s.default.isNumber(t.b)&&s.default.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(s.default.isNumber(t.r)&&s.default.isNumber(t.g)&&s.default.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(s.default.isNumber(t.h)&&s.default.isNumber(t.s)&&s.default.isNumber(t.v)&&s.default.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(s.default.isNumber(t.h)&&s.default.isNumber(t.s)&&s.default.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],l=void 0,u=void 0,d=function(){u=!1;var t=arguments.length>1?s.default.toArray(arguments):arguments[0];return s.default.each(c,function(e){if(e.litmus(t))return s.default.each(e.conversions,function(e,o){if(l=e.read(t),!1===u&&!1!==l)return u=l,l.conversionName=o,l.conversion=e,s.default.BREAK}),s.default.BREAK}),u};e.default=d,t.exports=e.default},function(t,e,o){"use strict";e.__esModule=!0;var n=o(5),i=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t){if(1===t.a||i.default.isUndefined(t.a)){for(var e=t.hex.toString(16);e.length<6;)e="0"+e;return"#"+e}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var o=Array.prototype.forEach,n=Array.prototype.slice,i={BREAK:{},extend:function(t){return this.each(n.call(arguments,1),function(e){for(var o in e)this.isUndefined(e[o])||(t[o]=e[o])},this),t},defaults:function(t){return this.each(n.call(arguments,1),function(e){for(var o in e)this.isUndefined(t[o])&&(t[o]=e[o])},this),t},compose:function(){var t=n.call(arguments);return function(){for(var e=n.call(arguments),o=t.length-1;o>=0;o--)e=[t[o].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(o&&t.forEach&&t.forEach===o)t.forEach(e,n);else if(t.length===t.length+0){var i=void 0,r=void 0;for(i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===this.BREAK)return}else for(var i in t)if(e.call(n,t[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():n.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return isNaN(t)}),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}};e.default=i,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var o=void 0,n={hsv_to_rgb:function(t,e,o){var n=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),r=o*(1-e),a=o*(1-i*e),s=o*(1-(1-i)*e),c=[[o,s,r],[a,o,r],[r,o,s],[r,a,o],[s,r,o],[o,r,a]][n];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(t,e,o){var n=Math.min(t,e,o),i=Math.max(t,e,o),r=i-n,a=void 0,s=void 0;return 0===i?{h:NaN,s:0,v:0}:(s=r/i,a=t===i?(e-o)/r:e===i?2+(o-t)/r:4+(t-e)/r,a/=6,a<0&&(a+=1),{h:360*a,s:s,v:i/255})},rgb_to_hex:function(t,e,o){var n=this.hex_with_component(0,2,t);return n=this.hex_with_component(n,1,e),n=this.hex_with_component(n,0,o)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(o=8*e)|t&~(255<<o)}};e.default=n,t.exports=e.default},function(t,e){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e,n){o(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return t.prototype.onChange=function(t){return this.__onChange=t,this},t.prototype.onFinishChange=function(t){return this.__onFinishChange=t,this},t.prototype.setValue=function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},t.prototype.getValue=function(){return this.object[this.property]},t.prototype.updateDisplay=function(){return this},t.prototype.isModified=function(){return this.initialValue!==this.getValue()},t}();e.default=n,t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=o(7),s=n(a),c=o(9),l=n(c),u=function(t){function e(o,n){function r(){a.setValue(!a.__prev)}i(this,e),t.call(this,o,n);var a=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),l.default.bind(this.__checkbox,"change",r,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()}return r(e,t),e.prototype.setValue=function(e){var o=t.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),o},e.prototype.updateDisplay=function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,t.prototype.updateDisplay.call(this)},e}(s.default);e.default=u,t.exports=e.default},function(t,e,o){"use strict";function n(t){if("0"===t||r.default.isUndefined(t))return 0;var e=t.match(c);return r.default.isNull(e)?0:parseFloat(e[1])}e.__esModule=!0;var i=o(5),r=function(t){return t&&t.__esModule?t:{default:t}}(i),a={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},s={};r.default.each(a,function(t,e){r.default.each(t,function(t){s[t]=e})});var c=/(\d+(\.\d+)?)px/,l={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,o){var n=o,i=e;r.default.isUndefined(i)&&(i=!0),r.default.isUndefined(n)&&(n=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),n&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,o,n){var i=o||{},a=s[e];if(!a)throw new Error("Event type "+e+" not supported.");var c=document.createEvent(a);switch(a){case"MouseEvents":var l=i.x||i.clientX||0,u=i.y||i.clientY||0;c.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,l,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var d=c.initKeyboardEvent||c.initKeyEvent;r.default.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:c.initEvent(e,i.bubbles||!1,i.cancelable||!0)}r.default.defaults(c,n),t.dispatchEvent(c)},bind:function(t,e,o,n){var i=n||!1;return t.addEventListener?t.addEventListener(e,o,i):t.attachEvent&&t.attachEvent("on"+e,o),l},unbind:function(t,e,o,n){var i=n||!1;return t.removeEventListener?t.removeEventListener(e,o,i):t.detachEvent&&t.detachEvent("on"+e,o),l},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var o=t.className.split(/ +/);-1===o.indexOf(e)&&(o.push(e),t.className=o.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return l},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var o=t.className.split(/ +/),n=o.indexOf(e);-1!==n&&(o.splice(n,1),t.className=o.join(" "))}else t.className=void 0;return l},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return n(e["border-left-width"])+n(e["border-right-width"])+n(e["padding-left"])+n(e["padding-right"])+n(e.width)},getHeight:function(t){var e=getComputedStyle(t);return n(e["border-top-width"])+n(e["border-bottom-width"])+n(e["padding-top"])+n(e["padding-bottom"])+n(e.height)},getOffset:function(t){var e=t,o={left:0,top:0};if(e.offsetParent)do{o.left+=e.offsetLeft,o.top+=e.offsetTop,e=e.offsetParent}while(e);return o},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};e.default=l,t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=o(7),s=n(a),c=o(9),l=n(c),u=o(5),d=n(u),h=function(t){function e(o,n,r){i(this,e),t.call(this,o,n);var a=r,s=this;this.__select=document.createElement("select"),d.default.isArray(a)&&function(){var t={};d.default.each(a,function(e){t[e]=e}),a=t}(),d.default.each(a,function(t,e){var o=document.createElement("option");o.innerHTML=e,o.setAttribute("value",t),s.__select.appendChild(o)}),this.updateDisplay(),l.default.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;s.setValue(t)}),this.domElement.appendChild(this.__select)}return r(e,t),e.prototype.setValue=function(e){var o=t.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),o},e.prototype.updateDisplay=function(){return this.__select.value=this.getValue(),t.prototype.updateDisplay.call(this)},e}(s.default);e.default=h,t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=o(7),s=n(a),c=o(9),l=n(c),u=function(t){function e(o,n){function r(){s.setValue(s.__input.value)}function a(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}i(this,e),t.call(this,o,n);var s=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),l.default.bind(this.__input,"keyup",r),l.default.bind(this.__input,"change",r),l.default.bind(this.__input,"blur",a),l.default.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)}return r(e,t),e.prototype.updateDisplay=function(){return l.default.isActive(this.__input)||(this.__input.value=this.getValue()),t.prototype.updateDisplay.call(this)},e}(s.default);e.default=u,t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}e.__esModule=!0;var s=o(7),c=n(s),l=o(5),u=n(l),d=function(t){function e(o,n,r){i(this,e),t.call(this,o,n);var s=r||{};this.__min=s.min,this.__max=s.max,this.__step=s.step,u.default.isUndefined(this.__step)?0===this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(this.initialValue))/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=a(this.__impliedStep)}return r(e,t),e.prototype.setValue=function(e){var o=e;return void 0!==this.__min&&o<this.__min?o=this.__min:void 0!==this.__max&&o>this.__max&&(o=this.__max),void 0!==this.__step&&o%this.__step!=0&&(o=Math.round(o/this.__step)*this.__step),t.prototype.setValue.call(this,o)},e.prototype.min=function(t){return this.__min=t,this},e.prototype.max=function(t){return this.__max=t,this},e.prototype.step=function(t){return this.__step=t,
this.__impliedStep=t,this.__precision=a(t),this},e}(c.default);e.default=d,t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var o=Math.pow(10,e);return Math.round(t*o)/o}e.__esModule=!0;var s=o(12),c=n(s),l=o(9),u=n(l),d=o(5),h=n(d),p=function(t){function e(o,n,r){function a(){var t=parseFloat(p.__input.value);h.default.isNaN(t)||p.setValue(t)}function s(){a(),p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())}function c(t){u.default.bind(window,"mousemove",l),u.default.bind(window,"mouseup",d),f=t.clientY}function l(t){var e=f-t.clientY;p.setValue(p.getValue()+e*p.__impliedStep),f=t.clientY}function d(){u.default.unbind(window,"mousemove",l),u.default.unbind(window,"mouseup",d)}i(this,e),t.call(this,o,n,r),this.__truncationSuspended=!1;var p=this,f=void 0;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),u.default.bind(this.__input,"change",a),u.default.bind(this.__input,"blur",s),u.default.bind(this.__input,"mousedown",c),u.default.bind(this.__input,"keydown",function(t){13===t.keyCode&&(p.__truncationSuspended=!0,this.blur(),p.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)}return r(e,t),e.prototype.updateDisplay=function(){return this.__input.value=this.__truncationSuspended?this.getValue():a(this.getValue(),this.__precision),t.prototype.updateDisplay.call(this)},e}(c.default);e.default=p,t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e,o,n,i){return n+(t-e)/(o-e)*(i-n)}e.__esModule=!0;var s=o(12),c=n(s),l=o(9),u=n(l),d=o(15),h=n(d),p=o(16),f=n(p),g=function(t){function e(o,n,r,s,c){function l(t){u.default.bind(window,"mousemove",d),u.default.bind(window,"mouseup",h),d(t)}function d(t){t.preventDefault();var e=u.default.getOffset(p.__background),o=u.default.getWidth(p.__background);return p.setValue(a(t.clientX,e.left,e.left+o,p.__min,p.__max)),!1}function h(){u.default.unbind(window,"mousemove",d),u.default.unbind(window,"mouseup",h),p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())}i(this,e),t.call(this,o,n,{min:r,max:s,step:c});var p=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),u.default.bind(this.__background,"mousedown",l),u.default.addClass(this.__background,"slider"),u.default.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)}return r(e,t),e.prototype.updateDisplay=function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",t.prototype.updateDisplay.call(this)},e}(c.default);g.useDefaultStyles=function(){h.default.inject(f.default)},e.default=g,t.exports=e.default},function(t,e){"use strict";t.exports={load:function(t,e){var o=e||document,n=o.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,o.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){var o=e||document,n=document.createElement("style");n.type="text/css",n.innerHTML=t,o.getElementsByTagName("head")[0].appendChild(n)}}},function(t,e,o){var n=o(17);"string"==typeof n&&(n=[[t.id,n,""]]);o(19)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,o){e=t.exports=o(18)(),e.push([t.id,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden; }\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em; }\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border: 1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em; }\n",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var o=this[e];o[2]?t.push("@media "+o[2]+"{"+o[1]+"}"):t.push(o[1])}return t.join("")},t.i=function(e,o){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(o&&!a[2]?a[2]=o:o&&(a[2]="("+a[2]+") and ("+o+")"),t.push(a))}},t}},function(t,e,o){function n(t,e){for(var o=0;o<t.length;o++){var n=t[o],i=d[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(s(n.parts[r],e))}else{for(var a=[],r=0;r<n.parts.length;r++)a.push(s(n.parts[r],e));d[n.id]={id:n.id,refs:1,parts:a}}}}function i(t){for(var e=[],o={},n=0;n<t.length;n++){var i=t[n],r=i[0],a=i[1],s=i[2],c=i[3],l={css:a,media:s,sourceMap:c};o[r]?o[r].parts.push(l):e.push(o[r]={id:r,parts:[l]})}return e}function r(){var t=document.createElement("style"),e=f();return t.type="text/css",e.appendChild(t),t}function a(){var t=document.createElement("link"),e=f();return t.rel="stylesheet",e.appendChild(t),t}function s(t,e){var o,n,i;if(e.singleton){var s=y++;o=g||(g=r()),n=c.bind(null,o,s,!1),i=c.bind(null,o,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=a(),n=u.bind(null,o),i=function(){o.parentNode.removeChild(o),o.href&&URL.revokeObjectURL(o.href)}):(o=r(),n=l.bind(null,o),i=function(){o.parentNode.removeChild(o)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}function c(t,e,o,n){var i=o?"":n.css;if(t.styleSheet)t.styleSheet.cssText=m(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function l(t,e){var o=e.css,n=e.media;e.sourceMap;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}function u(t,e){var o=e.css,n=(e.media,e.sourceMap);n&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var i=new Blob([o],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(i),r&&URL.revokeObjectURL(r)}var d={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},p=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),f=h(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0;t.exports=function(t,e){e=e||{},void 0===e.singleton&&(e.singleton=p());var o=i(t);return n(o,e),function(t){for(var r=[],a=0;a<o.length;a++){var s=o[a],c=d[s.id];c.refs--,r.push(c)}if(t){n(i(t),e)}for(var a=0;a<r.length;a++){var c=r[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete d[c.id]}}}};var m=function(){var t=[];return function(e,o){return t[e]=o,t.filter(Boolean).join("\n")}}()},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=o(7),s=n(a),c=o(9),l=n(c),u=function(t){function e(o,n,r){i(this,e),t.call(this,o,n);var a=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===r?"Fire":r,l.default.bind(this.__button,"click",function(t){return t.preventDefault(),a.fire(),!1}),l.default.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)}return r(e,t),e.prototype.fire=function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())},e}(s.default);e.default=u,t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e,o,n){t.style.background="",m.default.each(w,function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+o+" 0%, "+n+" 100%); "})}function s(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}e.__esModule=!0;var c=o(7),l=n(c),u=o(9),d=n(u),h=o(2),p=n(h),f=o(3),g=n(f),y=o(5),m=n(y),v=function(t){function e(o,n){function r(t){h(t),d.default.bind(window,"mousemove",h),d.default.bind(window,"mouseup",c)}function c(){d.default.unbind(window,"mousemove",h),d.default.unbind(window,"mouseup",c)}function l(){var t=g.default(this.value);!1!==t?(y.__color.__state=t,y.setValue(y.__color.toOriginal())):this.value=y.__color.toString()}function u(){d.default.unbind(window,"mousemove",f),d.default.unbind(window,"mouseup",u)}function h(t){t.preventDefault();var e=d.default.getWidth(y.__saturation_field),o=d.default.getOffset(y.__saturation_field),n=(t.clientX-o.left+document.body.scrollLeft)/e,i=1-(t.clientY-o.top+document.body.scrollTop)/e;return i>1?i=1:i<0&&(i=0),n>1?n=1:n<0&&(n=0),y.__color.v=i,y.__color.s=n,y.setValue(y.__color.toOriginal()),!1}function f(t){t.preventDefault();var e=d.default.getHeight(y.__hue_field),o=d.default.getOffset(y.__hue_field),n=1-(t.clientY-o.top+document.body.scrollTop)/e;return n>1?n=1:n<0&&(n=0),y.__color.h=360*n,y.setValue(y.__color.toOriginal()),!1}i(this,e),t.call(this,o,n),this.__color=new p.default(this.getValue()),this.__temp=new p.default(0);var y=this;this.domElement=document.createElement("div"),d.default.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",d.default.bind(this.__input,"keydown",function(t){13===t.keyCode&&l.call(this)}),d.default.bind(this.__input,"blur",l),d.default.bind(this.__selector,"mousedown",function(){d.default.addClass(this,"drag").bind(window,"mouseup",function(){d.default.removeClass(y.__selector,"drag")})});var v=document.createElement("div");m.default.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),m.default.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),m.default.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),m.default.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),m.default.extend(v.style,{width:"100%",height:"100%",background:"none"}),a(v,"top","rgba(0,0,0,0)","#000"),m.default.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),m.default.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),d.default.bind(this.__saturation_field,"mousedown",r),d.default.bind(this.__field_knob,"mousedown",r),d.default.bind(this.__hue_field,"mousedown",function(t){f(t),d.default.bind(window,"mousemove",f),d.default.bind(window,"mouseup",u)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()}return r(e,t),e.prototype.updateDisplay=function(){var t=g.default(this.getValue());if(!1!==t){var e=!1;m.default.each(p.default.COMPONENTS,function(o){if(!m.default.isUndefined(t[o])&&!m.default.isUndefined(this.__color.__state[o])&&t[o]!==this.__color.__state[o])return e=!0,{}},this),e&&m.default.extend(this.__color.__state,t)}m.default.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var o=this.__color.v<.5||this.__color.s>.5?255:0,n=255-o;m.default.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+o+","+o+","+o+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,a(this.__saturation_field,"left","#fff",this.__temp.toString()),m.default.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+o+","+o+","+o+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})},e}(l.default),w=["-moz-","-o-","-webkit-","-ms-",""];e.default=v,t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,o){var n=document.createElement("li");return e&&n.appendChild(e),o?t.__ul.insertBefore(n,params.before):t.__ul.appendChild(n),t.onResize(),n}function r(t,e){var o=t.__preset_select[t.__preset_select.selectedIndex];o.innerHTML=e?o.value+"*":o.value}function a(t,e,o){if(o.__li=e,o.__gui=t,H.default.extend(o,{options:function(e){return arguments.length>1?(o.remove(),c(t,o.object,o.property,{before:o.__li.nextElementSibling,factoryArgs:[H.default.toArray(arguments)]})):H.default.isArray(e)||H.default.isObject(e)?(o.remove(),c(t,o.object,o.property,{before:o.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return o.__li.firstElementChild.firstElementChild.innerHTML=t,o},listen:function(){return o.__gui.listen(o),o},remove:function(){return o.__gui.remove(o),o}}),o instanceof R.default)!function(){var t=new I.default(o.object,o.property,{min:o.__min,max:o.__max,step:o.__step});H.default.each(["updateDisplay","onChange","onFinishChange"],function(e){var n=o[e],i=t[e];o[e]=t[e]=function(){var e=Array.prototype.slice.call(arguments);return n.apply(o,e),i.apply(t,e)}}),U.default.addClass(e,"has-slider"),o.domElement.insertBefore(t.domElement,o.domElement.firstElementChild)}();else if(o instanceof I.default){var n=function(e){return H.default.isNumber(o.__min)&&H.default.isNumber(o.__max)?(o.remove(),c(t,o.object,o.property,{before:o.__li.nextElementSibling,factoryArgs:[o.__min,o.__max,o.__step]})):e};o.min=H.default.compose(n,o.min),o.max=H.default.compose(n,o.max)}else o instanceof T.default?(U.default.bind(e,"click",function(){U.default.fakeEvent(o.__checkbox,"click")}),U.default.bind(o.__checkbox,"click",function(t){t.stopPropagation()})):o instanceof P.default?(U.default.bind(e,"click",function(){U.default.fakeEvent(o.__button,"click")}),U.default.bind(e,"mouseover",function(){U.default.addClass(o.__button,"hover")}),U.default.bind(e,"mouseout",function(){U.default.removeClass(o.__button,"hover")})):o instanceof O.default&&(U.default.addClass(e,"color"),o.updateDisplay=H.default.compose(function(t){return e.style.borderLeftColor=o.__color.toString(),t},o.updateDisplay),o.updateDisplay());o.setValue=H.default.compose(function(e){return t.getRoot().__preset_select&&o.isModified()&&r(t.getRoot(),!0),e},o.setValue)}function s(t,e){var o=t.getRoot(),n=o.__rememberedObjects.indexOf(e.object);if(-1!==n){var i=o.__rememberedObjectIndecesToControllers[n];if(void 0===i&&(i={},o.__rememberedObjectIndecesToControllers[n]=i),i[e.property]=e,o.load&&o.load.remembered){var r=o.load.remembered,a=void 0;if(r[t.preset])a=r[t.preset];else{if(!r[z])return;a=r[z]}if(a[n]&&void 0!==a[n][e.property]){var s=a[n][e.property];e.initialValue=s,e.setValue(s)}}}}function c(t,e,o,n){if(void 0===e[o])throw new Error('Object "'+e+'" has no property "'+o+'"');var r=void 0;if(n.color)r=new O.default(e,o);else{var c=[e,o].concat(n.factoryArgs);r=A.default.apply(t,c)}n.before instanceof M.default&&(n.before=n.before.__li),s(t,r),U.default.addClass(r.domElement,"c");var l=document.createElement("span");U.default.addClass(l,"property-name"),l.innerHTML=r.property;var u=document.createElement("div");u.appendChild(l),u.appendChild(r.domElement);var d=i(t,u,n.before);return U.default.addClass(d,Z.CLASS_CONTROLLER_ROW),r instanceof O.default?U.default.addClass(d,"color"):U.default.addClass(d,typeof r.getValue()),a(t,d,r),t.__controllers.push(r),r}function l(t,e){return document.location.href+"."+e}function u(t,e,o){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.__preset_select.appendChild(n),o&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function d(t,e){e.style.display=t.useLocalStorage?"block":"none"}function h(t){var e=t.__save_row=document.createElement("li");U.default.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),U.default.addClass(e,"save-row");var o=document.createElement("span");o.innerHTML="&nbsp;",U.default.addClass(o,"button gears");var n=document.createElement("span");n.innerHTML="Save",U.default.addClass(n,"button"),U.default.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New",U.default.addClass(i,"button"),U.default.addClass(i,"save-as");var r=document.createElement("span");r.innerHTML="Revert",U.default.addClass(r,"button"),U.default.addClass(r,"revert");var a=t.__preset_select=document.createElement("select");t.load&&t.load.remembered?H.default.each(t.load.remembered,function(e,o){u(t,o,o===t.preset)}):u(t,z,!1),U.default.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(a),e.appendChild(o),e.appendChild(n),e.appendChild(i),e.appendChild(r),X&&function(){var e=document.getElementById("dg-local-explain"),o=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(l(t,"isLocal"))&&o.setAttribute("checked","checked"),d(t,e),U.default.bind(o,"change",function(){t.useLocalStorage=!t.useLocalStorage,d(t,e)})}();var s=document.getElementById("dg-new-constructor");U.default.bind(s,"keydown",function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||q.hide()}),U.default.bind(o,"click",function(){s.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),q.show(),s.focus(),s.select()}),U.default.bind(n,"click",function(){t.save()}),U.default.bind(i,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),U.default.bind(r,"click",function(){t.revert()})}function p(t){function e(e){return e.preventDefault(),t.width+=i-e.clientX,t.onResize(),i=e.clientX,!1}function o(){U.default.removeClass(t.__closeButton,Z.CLASS_DRAG),U.default.unbind(window,"mousemove",e),U.default.unbind(window,"mouseup",o)}function n(n){return n.preventDefault(),i=n.clientX,U.default.addClass(t.__closeButton,Z.CLASS_DRAG),U.default.bind(window,"mousemove",e),U.default.bind(window,"mouseup",o),!1}var i=void 0;t.__resize_handle=document.createElement("div"),H.default.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),U.default.bind(t.__resize_handle,"mousedown",n),U.default.bind(t.__closeButton,"mousedown",n),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function f(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function g(t,e){var o={};return H.default.each(t.__rememberedObjects,function(n,i){var r={},a=t.__rememberedObjectIndecesToControllers[i];H.default.each(a,function(t,o){r[o]=e?t.initialValue:t.getValue()}),o[i]=r}),o}function y(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}function m(t){0!==t.length&&j.default(function(){m(t)}),H.default.each(t,function(t){t.updateDisplay()})}var v=o(15),w=n(v),_=o(23),b=n(_),C=o(24),x=n(C),D=o(26),A=n(D),S=o(7),M=n(S),E=o(8),T=n(E),B=o(20),P=n(B),F=o(13),I=n(F),k=o(14),R=n(k),W=o(21),O=n(W),L=o(27),j=n(L),N=o(28),K=n(N),V=o(9),U=n(V),G=o(5),H=n(G);w.default.inject(x.default);var z="Default",X=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),q=void 0,Y=!0,Q=void 0,$=!1,J=[],Z=function t(e){var o=this,n=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),U.default.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=H.default.defaults(n,{autoPlace:!0,width:t.DEFAULT_WIDTH}),n=H.default.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),H.default.isUndefined(n.load)?n.load={preset:z}:n.preset&&(n.load.preset=n.preset),H.default.isUndefined(n.parent)&&n.hideable&&J.push(this),n.resizable=H.default.isUndefined(n.parent)&&n.resizable,n.autoPlace&&H.default.isUndefined(n.scrollable)&&(n.scrollable=!0);var r=X&&"true"===localStorage.getItem(l(this,"isLocal")),a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},preset:{get:function(){return o.parent?o.getRoot().preset:n.load.preset},set:function(t){o.parent?o.getRoot().preset=t:n.load.preset=t,y(this),o.revert()}},width:{get:function(){return n.width},set:function(t){n.width=t,f(o,t)}},name:{get:function(){return n.name},set:function(t){n.name=t,titleRowName&&(titleRowName.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(e){n.closed=e,n.closed?U.default.addClass(o.__ul,t.CLASS_CLOSED):U.default.removeClass(o.__ul,t.CLASS_CLOSED),this.onResize(),o.__closeButton&&(o.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return r},set:function(t){X&&(r=t,t?U.default.bind(window,"unload",a):U.default.unbind(window,"unload",a),localStorage.setItem(l(o,"isLocal"),t))}}}),H.default.isUndefined(n.parent)){if(n.closed=!1,U.default.addClass(this.domElement,t.CLASS_MAIN),U.default.makeSelectable(this.domElement,!1),X&&r){o.useLocalStorage=!0;var s=localStorage.getItem(l(this,"gui"));s&&(n.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,U.default.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),U.default.bind(this.__closeButton,"click",function(){o.closed=!o.closed})}else{void 0===n.closed&&(n.closed=!0);var c=document.createTextNode(n.name);U.default.addClass(c,"controller-name");var u=i(o,c),d=function(t){return t.preventDefault(),o.closed=!o.closed,!1};U.default.addClass(this.__ul,t.CLASS_CLOSED),U.default.addClass(u,"title"),U.default.bind(u,"click",d),n.closed||(this.closed=!1)}n.autoPlace&&(H.default.isUndefined(n.parent)&&(Y&&(Q=document.createElement("div"),U.default.addClass(Q,"dg"),U.default.addClass(Q,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Q),Y=!1),Q.appendChild(this.domElement),U.default.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||f(o,n.width)),U.default.bind(window,"resize",function(){o.onResize()}),U.default.bind(this.__ul,"webkitTransitionEnd",function(){o.onResize()}),U.default.bind(this.__ul,"transitionend",function(){o.onResize()}),U.default.bind(this.__ul,"oTransitionEnd",function(){o.onResize()}),this.onResize(),n.resizable&&p(this),a=function(){X&&"true"===localStorage.getItem(l(o,"isLocal"))&&localStorage.setItem(l(o,"gui"),JSON.stringify(o.getSaveObject()))},this.saveToLocalStorageIfPossible=a,n.parent||function(){var t=o.getRoot();t.width+=1,H.default.defer(function(){t.width-=1})}()};Z.toggleHide=function(){$=!$,H.default.each(J,function(t){t.domElement.style.zIndex=$?-999:999,t.domElement.style.opacity=$?0:1})},Z.CLASS_AUTO_PLACE="a",Z.CLASS_AUTO_PLACE_CONTAINER="ac",Z.CLASS_MAIN="main",Z.CLASS_CONTROLLER_ROW="cr",Z.CLASS_TOO_TALL="taller-than-window",Z.CLASS_CLOSED="closed",Z.CLASS_CLOSE_BUTTON="close-button",Z.CLASS_DRAG="drag",Z.DEFAULT_WIDTH=245,Z.TEXT_CLOSED="Close Controls",Z.TEXT_OPEN="Open Controls",U.default.bind(window,"keydown",function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||Z.toggleHide()},!1),H.default.extend(Z.prototype,{add:function(t){function e(e,o){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){return c(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})}),addColor:function(t,e){return c(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;H.default.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&Q.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var o=new Z(e);this.__folders[t]=o;var n=i(this,o.domElement);return U.default.addClass(n,"folder"),o},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=U.default.getOffset(t.__ul).top,o=0;H.default.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(o+=U.default.getHeight(e))}),window.innerHeight-e-20<o?(U.default.addClass(t.domElement,Z.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(U.default.removeClass(t.domElement,Z.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&H.default.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(H.default.isUndefined(q)&&(q=new K.default,q.domElement.innerHTML=b.default),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;H.default.each(Array.prototype.slice.call(arguments),function(e){0===t.__rememberedObjects.length&&h(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&f(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=g(this)),t.folders={},H.default.each(this.__folders,function(e,o){t.folders[o]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=g(this),r(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[z]=g(this,!0)),this.load.remembered[t]=g(this),this.preset=t,u(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){H.default.each(this.__controllers,function(e){this.getRoot().load.remembered?s(t||this.getRoot(),e):e.setValue(e.initialValue)},this),H.default.each(this.__folders,function(t){t.revert(t)}),t||r(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&m(this.__listening)}}),t.exports=Z},function(t,e){t.exports='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'},function(t,e,o){var n=o(25);"string"==typeof n&&(n=[[t.id,n,""]]);o(19)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,o){e=t.exports=o(18)(),
e.push([t.id,".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid transparent; }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name, .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: #000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.color {\n    border-left: 3px solid; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2FA1D6; }\n    .dg .cr.number input[type=text] {\n      color: #2FA1D6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover,\n  .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2FA1D6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",""])},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=o(10),r=n(i),a=o(13),s=n(a),c=o(14),l=n(c),u=o(11),d=n(u),h=o(20),p=n(h),f=o(8),g=n(f),y=o(5),m=n(y),v=function(t,e){var o=t[e];return m.default.isArray(arguments[2])||m.default.isObject(arguments[2])?new r.default(t,e,arguments[2]):m.default.isNumber(o)?m.default.isNumber(arguments[2])&&m.default.isNumber(arguments[3])?m.default.isNumber(arguments[4])?new l.default(t,e,arguments[2],arguments[3],arguments[4]):new l.default(t,e,arguments[2],arguments[3]):new s.default(t,e,{min:arguments[2],max:arguments[3]}):m.default.isString(o)?new d.default(t,e):m.default.isFunction(o)?new p.default(t,e,""):m.default.isBoolean(o)?new g.default(t,e):void 0};e.default=v,t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(){function t(t){window.setTimeout(t,1e3/60)}return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||t},t.exports=e.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=o(9),a=n(r),s=o(5),c=n(s),l=function(){function t(){i(this,t),this.backgroundElement=document.createElement("div"),c.default.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),a.default.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),c.default.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;a.default.bind(this.backgroundElement,"click",function(){e.hide()})}return t.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),c.default.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},t.prototype.hide=function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",a.default.unbind(t.domElement,"webkitTransitionEnd",e),a.default.unbind(t.domElement,"transitionend",e),a.default.unbind(t.domElement,"oTransitionEnd",e)};a.default.bind(this.domElement,"webkitTransitionEnd",e),a.default.bind(this.domElement,"transitionend",e),a.default.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},t.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.default.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-a.default.getHeight(this.domElement)/2+"px"},t}();e.default=l,t.exports=e.default}])});var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},ReverseEngineering;!function(t){var e=function(){function t(t,e){this.c=t||362436069,this.f=e||521288629}return t.createRandomized=function(){var e=new Date;return new t(+e/6e4&4294967295,4294967295&+e)},t.prototype.nextInt=function(){var t=this.c,e=this.f;return this.c=t=36969*(65535&t)+(t>>>16)&4294967295,this.f=e=18e3*(65535&e)+(e>>>16)&4294967295,4294967295&((65535&t)<<16|65535&e)},t.prototype.nextDouble=function(){var t=this.nextInt()/4294967296;return 0>t?1+t:t},t}(),o=function(){function t(t){this.a=Array(512),t=void 0!==t?new e(t):e.createRandomized();for(var o,n=this.a,i=0;256>i;++i)n[i]=i;for(var i=0;256>i;++i){var r=n[o=255&t.nextInt()];n[o]=n[i],n[i]=r}for(var i=0;256>i;++i)n[i+256]=n[i]}return t.prototype.grad3d=function(t,e,o,n){t&=15;var i=8>t?e:o;return e=4>t?o:12===t||14===t?e:n,(0==(1&t)?i:-i)+(0==(2&t)?e:-e)},t.prototype.grad2d=function(t,e,o){return this.n=0==(1&t)?e:o,0==(2&t)?-this.n:this.n},t.prototype.grad1d=function(t,e,o){return e+t*(o-e)},t.prototype.noise3d=function(t,e,o){var n=255&Math.floor(t),i=255&Math.floor(e),r=255&Math.floor(o);t-=Math.floor(t),e-=Math.floor(e),o-=Math.floor(o);var a=this.a,s=(3-2*t)*t*t,c=(3-2*e)*e*e,l=a[n]+i,u=a[l]+r,l=a[l+1]+r,i=a[n+1]+i,n=a[i]+r,r=a[i+1]+r,d=this.grad1d,h=this.grad3d;return d((3-2*o)*o*o,d(c,d(s,h(a[u],t,e,o),h(a[n],t-1,e,o)),d(s,h(a[l],t,e-1,o),h(a[r],t-1,e-1,o))),d(c,d(s,h(a[u+1],t,e,o-1),h(a[n+1],t-1,e,o-1)),d(s,h(a[l+1],t,e-1,o-1),h(a[r+1],t-1,e-1,o-1))))},t.prototype.noise2d=function(t,e){this.p=Math.floor(t),this.K=Math.floor(e),this.t=255&this.p,this.B=255&this.K,t-=this.p,e-=this.K,this.w=(3-2*t)*t*t,this.q=(3-2*e)*e*e,this.y=this.a[this.t]+this.B,this.E=this.a[this.t+1]+this.B;var o=this.grad1d,n=this.grad2d;return o(this.q,o(this.w,n(this.a[this.y],t,e),n(this.a[this.E],t-1,e)),o(this.w,n(this.a[this.y+1],t,e-1),n(this.a[this.E+1],t-1,e-1)))},t.prototype.noise1d=function(t){var e=255&Math.floor(t);t-=Math.floor(t);var o=t-1;return(0,this.grad1d)((3-2*t)*t*t,0==(1&this.a[e])?-t:t,0==(1&this.a[e+1])?-o:o)},t}();__decorate([DracoolaArt.KartwarsBot.MethodDecoration.bound],o.prototype,"noise3d",null),__decorate([DracoolaArt.KartwarsBot.MethodDecoration.bound],o.prototype,"noise2d",null),__decorate([DracoolaArt.KartwarsBot.MethodDecoration.bound],o.prototype,"noise1d",null);var n=function(){function t(){}return t.prototype.response=function(e){e=e||{},t.b={};for(var o in e)!function(o){!function(e){t.b[o]={get:function(){return this[e]},set:function(t){this[e]=t}}}(e[o])}(o);return Object.defineProperties(t.f.prototype,t.b),t.f},t}();n.f="undefined"!=typeof Float32Array?Float32Array:Array,__decorate([DracoolaArt.KartwarsBot.MethodDecoration.bound],n.prototype,"response",null);var i=new o(void 0).noise2d,r=(new n).response,a=function(){function t(){this.TWO_PI=2*Math.PI,this.floatArray=r({x:0,y:1,r:2,vx:3,vy:4});var t=this;this.floatArray.prototype.render=function(e){e.beginPath(),e.arc(this[0],this[1],this[2],0,t.TWO_PI,!1),e.fill()},this.floatArray.prototype.update=function(t){var e=i(this[0]/t.noiseScale,this[1]/t.noiseScale)*t.noiseStrength;if(0<t.getColor(this[0],this[1])?this[2]+=t.growthSpeed:this[2]-=t.growthSpeed,this[3]*=.8,this[4]*=.8,this[0]+=Math.cos(e)*t.speed+this[3],this[1]-=Math.sin(e)*t.speed+this[4],this[2]>t.maxSize)this[2]=t.maxSize;else if(0>this[2])return this[2]=0,this[0]=Math.random()*t.width,this[1]=t.heightHalf+(2*Math.random()-1)*t.fontSizeHalf,!1;return!0}}return t.prototype.b=function(){var t=new this.floatArray(5);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},t}(),s=new a,c=function(){function t(t,e,o,n,i){this.growthSpeed=.37,this.maxSize=8,this.noiseStrength=10,this.speed=.4,this.displayOutline=!1,this.framesRendered=0,this.noiseScale=300,this.color0="#00aeff",this.color1="#0fa954",this.color2="#54396e",this.color3="#e61d5f",this.play=!0,this._messageText=t,this.width=e,this.height=o,i=i||140;var r=document.createElement("canvas");this.textCanvasRenderingContext2D=r.getContext("2d"),this.particlesCanvasRenderingContext2D=(this.domElement=document.createElement("canvas")).getContext("2d"),this.domElement.width=this.width=r.width=this.width,this.domElement.height=this.height=r.height=this.height,this.Particles=[],this.theme=n,this.textCanvasRenderingContext2D.font=this.particlesCanvasRenderingContext2D.font="bold "+i+"px Helvetica, Arial, sans-serif";for(var a=0;1200>a;a++)this.Particles.push(s.b());this.L=this.Particles.length/4,this.heightHalf=this.height/2,this.fontSizeHalf=i/2,this.message=t}return Object.defineProperty(t.prototype,"theme",{get:function(){return"darken"==this._theme},set:function(t){this._theme=t?"darken":"lighter",this.particlesCanvasRenderingContext2D.globalCompositeOperation=this._theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._messageText},set:function(t){var e=this.textCanvasRenderingContext2D,o=this.particlesCanvasRenderingContext2D,n=this.width,i=this.height;t=this._messageText=t,e.clearRect(0,0,n,i),e.fillStyle="#f00",e.textAlign=o.textAlign="center",e.textBaseline=o.textBaseline="middle",e.fillText(t,n/2,i/2),this.p=e.getImageData(0,0,n,i).data},enumerable:!0,configurable:!0}),t.prototype.render=function(){var t=this.particlesCanvasRenderingContext2D,o=this.width,n=this.height,i=this.Particles,r=this.L;this.framesRendered++,t.clearRect(0,0,o,n),this.displayOutline&&(t.globalCompositeOperation="source-over",t.strokeStyle=e?"#000":"#fff",t.lineWidth=2,t.strokeText(this._messageText,o/2,n/2),t.globalCompositeOperation=this._theme);for(var a=0;4>a;a++){var s=void 0,c=void 0,l=void 0;for(t.fillStyle=this["color"+a],l=r*a,c=0;c<r;c++)s=i[c+l],s.update(this)&&s.render(t)}},t.prototype.explode=function(){var t=this.Particles;for(var e in t){var o=Math.random()*s.TWO_PI;t[e][3]=30*Math.cos(o),t[e][4]=30*Math.sin(o)}},t.prototype.loop=function(){this.play&&(window.requestAnimationFrame(this.loop),this.render())},t.prototype.getColor=function(t,e){return this.p[4*(~~e*this.width+~~t)]},t.prototype.insertInTo=function(t){t.appendChild(this.domElement)},t}();__decorate([DracoolaArt.KartwarsBot.MethodDecoration.bound],c.prototype,"loop",null),t.FizzyText=c}(ReverseEngineering||(ReverseEngineering={})),function(t,e){"function"==typeof define&&define.amd?define(["exports"],e):e("object"==typeof exports?exports:t.commonJsStrict={})}(this,function(t){function e(t,e,o){this.obj=t,this.left=null,this.right=null,this.parent=o,this.dimension=e}function o(t,o,i){function r(t,o,n){var a,s,c=o%i.length;return 0===t.length?null:1===t.length?new e(t[0],c,n):(t.sort(function(t,e){return t[i[c]]-e[i[c]]}),a=Math.floor(t.length/2),s=new e(t[a],c,n),s.left=r(t.slice(0,a),o+1,s),s.right=r(t.slice(a+1),o+1,s),s)}var a=this;Array.isArray(t)?this.root=r(t,0,null):function(t){function e(t){t.left&&(t.left.parent=t,e(t.left)),t.right&&(t.right.parent=t,e(t.right))}a.root=t,e(a.root)}(t),this.toJSON=function(t){t||(t=this.root);var o=new e(t.obj,t.dimension,null);return t.left&&(o.left=a.toJSON(t.left)),t.right&&(o.right=a.toJSON(t.right)),o},this.insert=function(t){function o(e,n){if(null===e)return n;var r=i[e.dimension];return t[r]<e.obj[r]?o(e.left,e):o(e.right,e)}var n,r,a=o(this.root,null);if(null===a)return void(this.root=new e(t,0,null));n=new e(t,(a.dimension+1)%i.length,a),r=i[a.dimension],t[r]<a.obj[r]?a.left=n:a.right=n},this.remove=function(t){function e(o){if(null===o)return null;if(o.obj===t)return o;var n=i[o.dimension];return t[n]<o.obj[n]?e(o.left,o):e(o.right,o)}function o(t){function e(t,o){var n,r,a,s,c;return null===t?null:(n=i[o],t.dimension===o?null!==t.left?e(t.left,o):t:(r=t.obj[n],a=e(t.left,o),s=e(t.right,o),c=t,null!==a&&a.obj[n]<r&&(c=a),null!==s&&s.obj[n]<c.obj[n]&&(c=s),c))}var n,r,s;if(null===t.left&&null===t.right)return null===t.parent?void(a.root=null):(s=i[t.parent.dimension],void(t.obj[s]<t.parent.obj[s]?t.parent.left=null:t.parent.right=null));null!==t.right?(n=e(t.right,t.dimension),r=n.obj,o(n),t.obj=r):(n=e(t.left,t.dimension),r=n.obj,o(n),t.right=t.left,t.left=null,t.obj=r)}var n;null!==(n=e(a.root))&&o(n)},this.nearest=function(t,e,r){function s(n){function r(t,o){u.push([t,o]),u.size()>e&&u.pop()}var a,c,l,d,h=i[n.dimension],p=o(t,n.obj),f={};for(d=0;d<i.length;d+=1)d===n.dimension?f[i[d]]=t[i[d]]:f[i[d]]=n.obj[i[d]];if(c=o(f,n.obj),null===n.right&&null===n.left)return void((u.size()<e||p<u.peek()[1])&&r(n,p));a=null===n.right?n.left:null===n.left?n.right:t[h]<n.obj[h]?n.left:n.right,s(a),(u.size()<e||p<u.peek()[1])&&r(n,p),(u.size()<e||Math.abs(c)<u.peek()[1])&&null!==(l=a===n.left?n.right:n.left)&&s(l)}var c,l,u;if(u=new n(function(t){return-t[1]}),r)for(c=0;c<e;c+=1)u.push([null,r]);for(a.root&&s(a.root),l=[],c=0;c<Math.min(e,u.content.length);c+=1)u.content[c][0]&&l.push([u.content[c][0].obj,u.content[c][1]]);return l},this.balanceFactor=function(){function t(e){return null===e?0:Math.max(t(e.left),t(e.right))+1}function e(t){return null===t?0:e(t.left)+e(t.right)+1}return t(a.root)/(Math.log(e(a.root))/Math.log(2))}}function n(t){this.content=[],this.scoreFunction=t}n.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,o=0;o<e;o++)if(this.content[o]==t){var n=this.content.pop();return void(o!=e-1&&(this.content[o]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.bubbleUp(o):this.sinkDown(o)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var o=Math.floor((t+1)/2)-1,n=this.content[o];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[o]=e,this.content[t]=n,t=o}},sinkDown:function(t){for(var e=this.content.length,o=this.content[t],n=this.scoreFunction(o);;){var i=2*(t+1),r=i-1,a=null;if(r<e){var s=this.content[r],c=this.scoreFunction(s);c<n&&(a=r)}if(i<e){var l=this.content[i];this.scoreFunction(l)<(null==a?n:c)&&(a=i)}if(null==a)break;this.content[t]=this.content[a],this.content[a]=o,t=a}}},this.kdTree=o,t.kdTree=o,t.BinaryHeap=n});var DracoolaArt;!function(t){!function(t){!function(t){function e(t){return function(e,o){var n=e[o];if("function"!=typeof n)throw new TypeError("@intercept can only be used on methods.");return"function"==typeof e?{value:function(){var o=arguments;return t(function(){return n.apply(e,o)})}}:"object"==typeof e?{get:function(){var e=this;return Object.defineProperty(e,o.toString(),{value:function(){var o=arguments;return t(function(){return n.apply(e,o)})}}),e[o]}}:void 0}}t.intercept=e}(t.MethodDecoration||(t.MethodDecoration={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){function e(t){}t.registerTactic=e}(t.MethodDecoration||(t.MethodDecoration={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){function e(t){Object.seal(t),Object.seal(t.prototype)}t.sealed=e}(t.MethodDecoration||(t.MethodDecoration={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){function e(t,e){var n=t[e];if("function"!=typeof n)throw new TypeError("@trace can only be used on methods.");return"function"==typeof t?{value:function(){return n.apply(t,arguments)}}:"object"==typeof t?{get:function(){var i=StackTrace.getSync(),r=t.constructor.toString().match(/\w+/g)[1];return o.registerMethodName(r+"."+e,i[2].functionName),window.stack=StackTrace.getSync(),window.botFactory&&window.botFactory.externalGraph&&window.botFactory.externalGraph.operation(),n}}:void 0}var o=function(){function t(){}return t.registerMethodName=function(e,o){t.originalNames[e]=o},t}();o.originalNames={},t.trace=e}(t.MethodDecoration||(t.MethodDecoration={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={})),function(t){Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(t,e){var o=this[t],n=o,i=function(){return n},r=function(i){return o=n,n=e.call(this,t,o,i)};delete this[t]&&Object.defineProperty(this,t,{get:i,set:r,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(t){var e=this[t];delete this[t],this[t]=e}}),String.prototype.hashCode=function(){var t=0;if(0==this.length)return t;for(i=0;i<this.length;i++)char=this.charCodeAt(i),t=(t<<5)-t+char,t&=t;return t},String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,o){return void 0!==t[o]?t[o]:e})})}(window);var DracoolaArt;!function(t){!function(t){!function(t){t[t.None=0]="None",t[t.FastRocket=1]="FastRocket",t[t.ThreeFastRockets=2]="ThreeFastRockets",t[t.TeleRocket=3]="TeleRocket",t[t.Cloak=4]="Cloak",t[t.Mine=5]="Mine",t[t.ThreeMines=6]="ThreeMines",t[t.BigBang=7]="BigBang",t[t.ThreeTeleRocket=8]="ThreeTeleRocket",t[t.Shield=9]="Shield",t[t.Flashes=10]="Flashes",t[t.Magnet=11]="Magnet",t[t.HugeBash=12]="HugeBash"}(t.CarWeapon||(t.CarWeapon={}));!function(t){t[t.NotSet=0]="NotSet",t[t.Self=1]="Self",t[t.Front=2]="Front",t[t.Behind=3]="Behind"}(t.CarWeaponTrigger||(t.CarWeaponTrigger={}));!function(t){t[t.NotSet=0]="NotSet",t[t.NoSpeed=1]="NoSpeed",t[t.MediumSpeed=2]="MediumSpeed",t[t.HighSpeed=3]="HighSpeed"}(t.CarWeaponSpeed||(t.CarWeaponSpeed={}));!function(t){t[t.Circle=0]="Circle",t[t.Polygon=1]="Polygon"}(t.CollisionElementType||(t.CollisionElementType={}));!function(t){t[t.NotDefined=0]="NotDefined",t[t.Enemy=1]="Enemy",t[t.Misile=2]="Misile",t[t.TeleMisile=3]="TeleMisile",t[t.Bomb=4]="Bomb",t[t.Mine=5]="Mine"}(t.CollisionElementDangerType||(t.CollisionElementDangerType={}));!function(t){t[t.NoIntersection=1]="NoIntersection",t[t.Tangent=2]="Tangent",t[t.ShapeInside=3]="ShapeInside",t[t.HasIntersections=4]="HasIntersections"}(t.ShapesIntersectionStatus||(t.ShapesIntersectionStatus={}));!function(t){t[t.NotDefined=0]="NotDefined",t[t.Yes=1]="Yes",t[t.Default=2]="Default"}(t.AccelerationFlag||(t.AccelerationFlag={}));!function(t){t[t.Yes=1]="Yes",t[t.Delete=2]="Delete"}(t.IgnoreItemFlag||(t.IgnoreItemFlag={}));!function(t){t[t.Invalid=0]="Invalid",t[t.InFront=1]="InFront",t[t.InBack=2]="InBack"}(t.GoalState||(t.GoalState={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(e){e.playerTurnRadius=175,e.weaponsMagnitudes={},e.weaponsMagnitudes[t.CarWeapon.None]=e.weaponsMagnitudes[t.CarWeapon.Cloak]=e.weaponsMagnitudes[t.CarWeapon.Mine]=e.weaponsMagnitudes[t.CarWeapon.ThreeMines]=e.weaponsMagnitudes[t.CarWeapon.BigBang]=e.weaponsMagnitudes[t.CarWeapon.Shield]=e.weaponsMagnitudes[t.CarWeapon.Magnet]=0,e.weaponsMagnitudes[t.CarWeapon.FastRocket]=e.weaponsMagnitudes[t.CarWeapon.ThreeFastRockets]=20,e.weaponsMagnitudes[t.CarWeapon.TeleRocket]=e.weaponsMagnitudes[t.CarWeapon.ThreeTeleRocket]=15,e.weaponsMagnitudes[t.CarWeapon.Flashes]=40,e.weaponsMagnitudes[t.CarWeapon.HugeBash]=12}(t.Data||(t.Data={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},DracoolaArt;!function(t){!function(t){var e=function(){function e(t){this.weaponFired=!1,this.weaponType=t}return Object.defineProperty(e.prototype,"previousWeaponType",{get:function(){return this._previousWeaponType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weaponType",{get:function(){return this._weaponType},set:function(e){if(this._weaponType!=e){e==t.CarWeapon.None&&(this.weaponFired=!1),this._previousWeaponType=this._weaponType;var o=this._weaponType=e;switch(this._magnitude=t.Data.weaponsMagnitudes[o],o){case t.CarWeapon.None:case t.CarWeapon.Cloak:case t.CarWeapon.Magnet:this._isLethalWeapon=!1;break;default:this._isLethalWeapon=!0}switch(o){case t.CarWeapon.Cloak:case t.CarWeapon.Magnet:case t.CarWeapon.Shield:case t.CarWeapon.BigBang:this._triggerLocation=t.CarWeaponTrigger.Self;break;case t.CarWeapon.FastRocket:case t.CarWeapon.ThreeFastRockets:case t.CarWeapon.TeleRocket:case t.CarWeapon.ThreeTeleRocket:case t.CarWeapon.Flashes:case t.CarWeapon.HugeBash:this._triggerLocation=t.CarWeaponTrigger.Front;break;case t.CarWeapon.Mine:case t.CarWeapon.ThreeMines:this._triggerLocation=t.CarWeaponTrigger.Behind;break;default:this._triggerLocation=t.CarWeaponTrigger.NotSet}switch(o){case t.CarWeapon.Cloak:case t.CarWeapon.Mine:case t.CarWeapon.ThreeMines:case t.CarWeapon.BigBang:case t.CarWeapon.Shield:case t.CarWeapon.Magnet:this._speed=t.CarWeaponSpeed.NoSpeed;break;case t.CarWeapon.TeleRocket:case t.CarWeapon.ThreeTeleRocket:case t.CarWeapon.HugeBash:this._speed=t.CarWeaponSpeed.MediumSpeed;break;case t.CarWeapon.FastRocket:case t.CarWeapon.ThreeFastRockets:case t.CarWeapon.Flashes:this._speed=t.CarWeaponSpeed.HighSpeed;break;default:this._speed=t.CarWeaponSpeed.NotSet}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLethalWeapon",{get:function(){return this._isLethalWeapon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerLocation",{get:function(){return this._triggerLocation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"magnitude",{get:function(){return this._magnitude},enumerable:!0,configurable:!0}),e}();t.CarWeaponData=e;var o=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.lerp=function(e,o){return new t(this.x+(e.x-this.x)*o,this.y+(e.y-this.y)*o)},t.prototype.min=function(e){return new t(Math.min(this.x,e.x),Math.min(this.y,e.y))},t.prototype.max=function(e){return new t(Math.max(this.x,e.x),Math.max(this.y,e.y))},t}();t.Point2D=o;var n=function(t){function e(e,o,n){var i=t.call(this,e,o)||this;return i.ang=0,i.ang=n,i}return __extends(e,t),e.fromPoint2D=function(t){return new e(t.x,t.y)},e}(o);t.BotPoint2D=n;var i=function(t){function e(e,o,n,i,r,a,s){var c=t.call(this,e,o)||this;return c.sz=n,c.da=i,c.ang=r,c.distance=a,c.resourceId=s,c}return __extends(e,t),e}(o);t.Bot2Point2D=i;var r=function(t){function e(e,o,n,i,r,a,s){var c=t.call(this,e,o)||this;return c.ang=n,c.shapeType=i,c.dangerType=r,c.radius=a,c.distance2=s||1/0,c}return __extends(e,t),e}(o);t.CollisionElement=r;var a=function(t){function e(e,o,n,i,r,a,s){var c=t.call(this,e,o)||this;return c.ang=n,c.dangerType=i,c.distance2=r,c.radius=a,c.aIndex=s,c}return __extends(e,t),e}(o);t.CollisionAngle=a;var s=function(){function t(t,e){this.collisionElements=t,this.collisionAngles=e}return t}();t.CollisionDataRespons=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(o);t.FoodAngle=c;var l=function(){function t(){}return t}();t.OpenAngle=l;var u=function(){function t(t,e){this.width=t,this.height=e}return t}();t.Bounds=u;var d=function(){function t(t,e){this.point1=t,this.point2=e}return t}();t.Line=d;var h=function(t){function e(e,o,n,i,r){var a=t.call(this,n,i)||this;return a.x=e,a.y=o,void 0!=r?a.rotation=r:r=0,a}return __extends(e,t),e}(u);t.Rect=h;var p=function(t){function e(e,o,n){var i=t.call(this,e,o)||this;return i._minX=1/0,i._minY=1/0,i._maxX=-1/0,i._maxY=-1/0,i.geometry=n,i.processGeometry(),i}return __extends(e,t),e.prototype.processGeometry=function(){for(var t=this.geometry,e=1,o=t.length;e<o;e++)t[e].x<this._minX&&(this._minX=t[e].x),t[e].x>this._maxX&&(this._maxX=t[e].x),t[e].y<this._minY&&(this._minY=t[e].y),t[e].y>this._maxY&&(this._maxY=t[e].y)},Object.defineProperty(e.prototype,"geometryAsPoint2DArray",{get:function(){return this._geometryAsPoint2DArray||(this._geometryAsPoint2DArray=this.geometry.map(function(t){return new o(t.x,t.y)})),this._geometryAsPoint2DArray},enumerable:!0,configurable:!0}),
Object.defineProperty(e.prototype,"minX",{get:function(){return this._minX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this._minY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this._maxX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this._maxY},enumerable:!0,configurable:!0}),e}(o);t.Polygon=p;var f=function(t){function e(e,o,n){var i=t.call(this,e,o)||this;return i.radius=n,i}return __extends(e,t),e}(o);t.Circle=f;var g=function(e){function o(o,n){var i=e.call(this,o.x,o.y,o.radius)||this;if(i.elements=[],void 0!=n){var r=i;n.forEach(function(e){e.distanceToCenterOfCluster=t.MathUtils.getDistance(r,e)}),i.elements=n}return i}return __extends(o,e),Object.defineProperty(o.prototype,"score",{get:function(){return Math.pow(this.distance,2)/this.elements.length},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"highRadius",{get:function(){return this.radius*o.radiusMultiplier},enumerable:!0,configurable:!0}),o}(f);g.radiusMultiplier=1.4,t.Cluster=g;var y=function(){function t(){this._foodClusters=[]}return Object.defineProperty(t.prototype,"foodClusters",{get:function(){return this._foodClusters},set:function(t){t.sort(function(t,e){return t.distance-e.distance}),this._foodClusters=t},enumerable:!0,configurable:!0}),t.prototype.getBestCluster=function(){return this._foodClusters[0]},t}();t.ClusterWrapper=y;var m=function(){function e(e){this.status=t.ShapesIntersectionStatus.NoIntersection,this.points=[],void 0!=e&&(this.status=e)}return Object.defineProperty(e.prototype,"length",{get:function(){return this.points.length},enumerable:!0,configurable:!0}),e.prototype.addPoint=function(t){this.points.push(t)},e.prototype.addPoints=function(t){this.points=this.points.concat(t)},e}();t.ShapesIntersectionsResult=m;var v=function(){function e(e,o,n,i,r){void 0===n&&(n=null),void 0===i&&(i=t.AccelerationFlag.NotDefined),this._isValid=e,this._goalCoordinates=o,this._acceleration=i,this._speed=r,this._customData=n}return e.CreateValidResponse=function(o,n,i){return void 0===n&&(n=t.AccelerationFlag.NotDefined),new e(!0,o,void 0,n,i)},e.CreateInvalidResponse=function(){return new e(!1)},e.CreateCustomResponse=function(t){return new e(!0,void 0,t)},e.Transfer=function(t,o,n,i,r){var a=new e(t._isValid,t._goalCoordinates,t._customData,t._acceleration,t._speed);return null!=o&&(a._goalCoordinates=o),null!=i&&(a._acceleration=i),null!=r&&(a._speed=r),null!=n&&(a._customData=n),a},Object.defineProperty(e.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"goalCoordinates",{get:function(){return this._goalCoordinates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"acceleration",{get:function(){return this._acceleration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customData",{get:function(){return this._customData},enumerable:!0,configurable:!0}),e}();t.ActivityResult=v;var w=function(){function e(){this._isValid=!1,this._isInTunnel=!1,this._state=t.GoalState.Invalid,this.coordinates=new o}return Object.defineProperty(e.prototype,"isInTunnel",{get:function(){return this._isInTunnel},set:function(t){this._isValid=!1,this._isInTunnel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._isValid?this._state:t.GoalState.Invalid},set:function(t){this._state=t,this._isValid=!0},enumerable:!0,configurable:!0}),e}();t.GoalData=w}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.reset()}return Object.defineProperty(t.prototype,"ElepsedTime",{get:function(){return this.isStopped?this.elepsedTime:+new Date-this.lastTime},enumerable:!0,configurable:!0}),t.start=function(){return new t},t.prototype.reset=function(){this.isStopped=!1,this.lastTime=+new Date},t.prototype.stop=function(){return this.elepsedTime=this.ElepsedTime,this.isStopped=!0,this.elepsedTime},t}();t.Timer=e}(t.Time||(t.Time={}))}(t.Manager||(t.Manager={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){!function(t){var e=function(){function e(){this.clocks={},this.elepsedTimes={}}return e.getFunctionName=function(){return StackTrace.getSync()[4].functionName},e.prototype.startFrame=function(o){var n=e.getFunctionName();return void 0!=o&&(n+=" ["+o+"]"),void 0==this.clocks[n]?this.clocks[n]=t.Timer.start():this.clocks[n].reset(),this.clocks[n]},e.prototype.endFrame=function(t){var o=e.getFunctionName();return void 0!=t&&(o+=" ["+t+"]"),void 0!=this.clocks[o]&&(this.elepsedTimes[o]=this.clocks[o].stop()),this.clocks[o]},e.prototype.clearFrames=function(){this.elepsedTimes=[]},e.prototype.getFrames=function(){return this.elepsedTimes},e}();t.TimerFrame=e}(t.Time||(t.Time={}))}(t.Manager||(t.Manager={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){var e=function(){function t(t){this.gameWrapper=t}return t.prototype.setCoordinates=function(t){window.game.input.mousePointer.x=t.x+window.game.canvas.width/2,window.game.input.mousePointer.y=t.y+window.game.canvas.height/2},t}();t.GameWrapperInputMouse=e;var o=function(){function t(t){this.gameWrapper=t,this._injectElement=!0,this._addEvents=!0}return t.prototype.forceClear=function(){var t=this._canvasElement;null!=t&&t.getContext("2d").clearRect(0,0,t.width,t.height)},t.prototype.registerEvent=function(t){this._addEvents&&(this._registeredEvent=t,this._addEvents=!1)},t.prototype.getContext=function(){var t=this._canvasElement;return null==t&&(t=this._canvasElement=document.createElement("canvas"),t.width=window.game.canvas.width,t.height=window.game.canvas.height,t.style.zIndex="9999",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.display="block",t.style.touchAction="none",t.style.webkitUserSelect=t.style.msUserSelect="none",t.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)",t.style.cursor="inherit",t.style.marginLeft="0px",t.style.marginTop="0px",t.oncontextmenu=function(t){t.preventDefault()},this._registeredEvent&&this._registeredEvent(t),t.addEventListener("mousedown",window.game.input.mouse._onMouseDown,!0),t.addEventListener("mousemove",window.game.input.mouse._onMouseMove,!0),t.addEventListener("mouseup",window.game.input.mouse._onMouseUp,!0)),this._injectElement&&($("#game").append(this._canvasElement),this._injectElement=!1),this._canvasElement.getContext("2d")},t.prototype.dispatchEvent=function(t){this._canvasElement.dispatchEvent(t)},t}();t.GameWrapperInputCanvas=o;var n=function(){function t(t){this.gameWrapper=t}return t.prototype.hasValidSprite=function(t){var e=this.gameWrapper.world.getWorkingBounds(),o=t.img,n=o.position;return n.x>e.x&&n.y>e.y&&n.x<e.width&&n.y<e.height&&o.visible&&o.alpha>0&&o.renderable},t.prototype.hasShieldActivated=function(t){var e=t.img.escudo2;return e.visible&&e.alpha>0&&e.renderable},t.prototype.connect=function(){$("#play-btn").click()},t.prototype.delayedConnect=function(){this.isPlaying||(this.connect(),setTimeout(this.delayedConnect,500))},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return window.mainCar&&window.mainCar.img&&window.mainCar.img.alive},enumerable:!0,configurable:!0}),t}();__decorate([t.MethodDecoration.bound],n.prototype,"delayedConnect",null),t.GameWrapperUtil=n;var i=function(){function t(t){this.gameWrapper=t,this.HALP_PI=Math.PI/2,this.THREE_SQUARES_PI=1.5*Math.PI}return t.prototype.getRotation=function(t){var e;return e=void 0==t?window.mainCar.rotation:t.img.rotation,e>=-this.gameWrapper.player.HALP_PI&&e<Math.PI?e-=this.gameWrapper.player.HALP_PI:e+=this.gameWrapper.player.THREE_SQUARES_PI,e},t.prototype.getPosition=function(){return window.mainCar.img.position},t}();t.GameWrapperPlayer=i;var r=function(){function e(t){this.gameWrapper=t,this.ignoreMissilesDictionary={},this.reset()}return e.prototype.reset=function(){e.isItemCacherActive&&(this.listOfElements=null,this.listOfElements={})},e.prototype.ignoreMissilesById=function(e){this.ignoreMissilesDictionary[e]=t.IgnoreItemFlag.Yes},e.prototype.getEnemies=function(){return this._baseGetItems("Car",window.sprites,window.Car,!0,window.mainCar.id)},e.prototype.getMissiles=function(){return this._baseGetItems("Missile",window.misiles,window.Misil,!0,void 0,this.ignoreMissilesDictionary)},e.prototype.getTeleMissiles=function(){return this._baseGetItems("TeleMissile",window.misiles,window.MisilTele,!0,void 0,this.ignoreMissilesDictionary)},e.prototype.getBombs=function(){return this._baseGetItems("Bomb",window.bombas,window.Bomba,!1)},e.prototype.getMines=function(){return this._baseGetItems("Mine",window.minas,window.Mina,!1)},e.prototype.getWeapons=function(){return this._baseGetItems("Item",window.misItems,window.Item,!1)},e.prototype.getFood=function(){var e=this,o=(this.gameWrapper.world.getWorkingBounds(),this.gameWrapper.player.getPosition());return window.coins.filter(function(n){var i=n.img,r=i.position;n.x=r.x,n.y=r.y;var a=e.gameWrapper.util.hasValidSprite(n);return a&&(n.distance=t.MathUtils.getDistance(r,o)),a})},e.prototype._ensureVelocityIsDefined=function(e){"function"==typeof Object.getOwnPropertyDescriptor(e,"x")||e.img.position.watch("x",function(o,n,i){var r=e,a=r.img.position;return void 0==r.velocity?(r.lastPosition=new t.Point2D(a.x,a.y),r.velocity=new t.Point2D(0,0)):(r.velocity.x=a.x-r.lastPosition.x,r.velocity.y=a.y-r.lastPosition.y,r.lastPosition.x=a.x,r.lastPosition.y=a.y,r.magnitude=Math.sqrt(Math.pow(r.velocity.x,2)+Math.pow(r.velocity.y,2))),i})},e.prototype._baseGetItems=function(o,n,i,r,a,s){if(e.isItemCacherActive&&void 0!=this.listOfElements[o])return this.listOfElements[o];var c=[],l=0,u=jQuery.extend(!0,{},n),d=this.gameWrapper.player.getPosition();for(var h in u){var p=u[h],f=!1,g=this.gameWrapper.util.hasValidSprite(p);if(s){var y=s[h];y==t.IgnoreItemFlag.Yes&&g?(s[h]=t.IgnoreItemFlag.Delete,f=!0):y==t.IgnoreItemFlag.Delete&&(g?f=!0:delete s[h])}if(!f&&p instanceof i&&g){var m=p.img.position.x,v=p.img.position.y;p.x=m,p.y=v,p.distance=t.MathUtils.getDistance(p,d),this._ensureVelocityIsDefined(p),a&&p.id==a?delete u[h]:c[l++]=p}else delete u[h]}return l>0&&c.sort(t.ArrayUtils.sortDistance),c},e}();r.isItemCacherActive=!1,t.GameWrapperItems=r;var a=function(){function e(t){this.gameWrapper=t}return e.prototype.getWorkingBounds=function(){var o=window.game.world.bounds,n=e.offset;return new t.Rect(n,n,o.width-n,o.height-n)},e.prototype.getSectorSquaredWidth=function(){return 1661},e}();a.offset=1750,t.GameWrapperWorld=a;var s=function(){function t(){this.input={mouse:new e(this),canvas:new o(this)},this.util=new n(this),this.player=new i(this),this.items=new r(this),this.world=new a(this)}return t}();t.GameWrapper=s}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){function e(t){var e=t+"";if(0==e.indexOf("function")){var i=n.exec(e);if(null==i)throw new Error("The function does not contain a statement matching 'return variableName;'");return i[1].split(";")[0]}var i=o.exec(e);if(null==i)throw new Error("The function does not contain a statement matching 'return variableName;'");var r=i[1],a=r.split(".");return a[a.length-1]}var o=new RegExp("(.*)"),n=new RegExp("([^.]*)[;]?}");t.nameof=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){var e=function(){function t(){}return t.sortScore=function(t,e){return e.score-t.score},t.sortSz=function(t,e){return e.sz-t.sz},t.sortDistance=function(t,e){return t.distance-e.distance},t.sortDistance2=function(t,e){return t.distance2-e.distance2},t}();t.ArrayUtils=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){var e=function(){function e(){}return e.angleBetween=function(t,e){var o=0,n=0;return o=(t-e)%Math.PI,n=(e-t)%Math.PI,o<n?-o:n},e.get2DElementsDensity=function(t,e,o){var n=t.map(function(t){return[t.x,t.y]});return(new DBSCAN).run(n,e,o)},e.arcPoint=function(e,o,n,i){return new t.Point2D(e+Math.cos(i)*n,o+Math.sin(i)*n)},e.fastAtan2=function(t,e){var o=Math.PI/4,n=3*Math.PI/4,i=0,r=0,a=Math.abs(t)+1e-10;return e<0?(i=(e+a)/(a-e),r=n):(i=(e-a)/(e+a),r=o),r+=(.1963*i*i-.9817)*i,t<0?-r:r},e.isLeft=function(t,e,o){return(e.x-t.x)*(o.y-t.y)-(e.y-t.y)*(o.x-t.x)>0},e.isRight=function(t,o,n){return!e.isLeft(t,o,n)},e.getDistance=function(t,e){var o=t.x,n=t.y,i=e.x,r=e.y;return Math.sqrt(Math.pow(o-i,2)+Math.pow(n-r,2))},e.getDistance2=function(t,e){var o=t.x,n=t.y,i=e.x,r=e.y;return Math.pow(o-i,2)+Math.pow(n-r,2)},e.fromRadiansToDegrees=function(t){return(360+t*(180/Math.PI))%360},e.fromDegreesToRadians=function(t){var e=t*(Math.PI/180);return e>Math.PI&&(e=Math.PI-e),e},e.medianAngle=function(t,e){t%=360,e%=360;var o=t+e;return o>360&&o<540&&(o%=180),o/2},e.predictIntersection=function(e,o){var n=new Victor(e.x,e.y),i=new Victor(o.x,o.y),r=o.magnitude,a=new Victor(o.velocity.x,o.velocity.y),s=i.clone().subtract(n),c=s.magnitude()/r,l=a.clone().multiplyScalar(c),u=a.clone().add(l),d=i.add(u);return new t.Point2D(d.x,d.y)},e.predictIntersectionEx=function(o,n,i){var r=n.x-o.x,a=n.y-o.y,s=n.velocity.x,c=n.velocity.y,l=s*s+c*c-i*i,u=2*(s*r+c*a),d=r*r+a*a,h=e.quad(l,u,d),p=null;if(h){var f=h[0],g=h[1],y=Math.min(f,g);y<0&&(y=Math.max(f,g)),y>0&&(p=new t.Point2D(n.x+n.velocity.x*y,n.y+n.velocity.y*y))}return p},e.quad=function(t,e,o){var n=null;if(Math.abs(t)<1e-6)n=Math.abs(e)<1e-6?Math.abs(o)<1e-6?[0,0]:null:[-o/e,-o/e];else{var i=e*e-4*t*o;i>=0&&(i=Math.sqrt(i),t*=2,n=[(-e-i)/t,(-e+i)/t])}return n},e}();t.MathUtils=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){var e=function(){function e(){}return e.intersectCircleLine=function(e,o,n,i){var r,a=(i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y),s=2*((i.x-n.x)*(n.x-e.x)+(i.y-n.y)*(n.y-e.y)),c=e.x*e.x+e.y*e.y+n.x*n.x+n.y*n.y-2*(e.x*n.x+e.y*n.y)-o*o,l=s*s-4*a*c;if(l<0)r=new t.ShapesIntersectionsResult(t.ShapesIntersectionStatus.NoIntersection);else if(0==l)r=new t.ShapesIntersectionsResult(t.ShapesIntersectionStatus.Tangent);else{var u=Math.sqrt(l),d=(-s+u)/(2*a),h=(-s-u)/(2*a);(d<0||d>1)&&(h<0||h>1)?r=d<0&&h<0||d>1&&h>1?new t.ShapesIntersectionsResult(t.ShapesIntersectionStatus.NoIntersection):new t.ShapesIntersectionsResult(t.ShapesIntersectionStatus.ShapeInside):(r=new t.ShapesIntersectionsResult(t.ShapesIntersectionStatus.HasIntersections),0<=d&&d<=1&&r.points.push(t.BotPoint2D.fromPoint2D(n.lerp(i,d))),0<=h&&h<=1&&r.points.push(t.BotPoint2D.fromPoint2D(n.lerp(i,h))))}return r},e.intersectCirclePolygon=function(o,n,i){for(var r,a=new t.ShapesIntersectionsResult(t.ShapesIntersectionStatus.NoIntersection),s=i.geometryAsPoint2DArray,c=s.length,l=0;l<c;l++){var u=s[l],d=s[(l+1)%c];r=e.intersectCircleLine(o,n,u,d),a.addPoints(r.points)}if(a.points.length>0)a.status=t.ShapesIntersectionStatus.HasIntersections;else{var h=r.status;h==t.ShapesIntersectionStatus.NoIntersection&&e.pointInPoly(o,i)&&(h=t.ShapesIntersectionStatus.ShapeInside),a.status=h}return a},e.pointInRect=function(t,e){return e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x&&e.y+e.height>=t.y},e.pointInPoly=function(t,e){if(t.x<e.minX||t.x>e.maxX||t.y<e.minY||t.y>e.maxY)return!1;for(var o=!1,n=e.geometry,i=n.length,r=0,a=i-1;r<i;a=r++)n[r].y>t.y!=n[a].y>t.y&&t.x<(n[a].x-n[r].x)*(t.y-n[r].y)/(n[a].y-n[r].y)+n[r].x&&(o=!o);return o},e.isInsideArcSector=function(e,o,n,i,r){function a(e,o,n,i){var r=new t.Point2D((e.x+o)*Math.cos(n),(e.y+o)*Math.sin(n));return-r.x*i.y+r.y*i.x>0}var s=new t.Point2D(e.x-o.x,e.y-o.y);return!a(o,n,i,s)&&a(o,n,r,s)&&s.x*s.x+s.y*s.y<=n*n},e.circleRectIntersect=function(t,e){var o=Math.abs(t.x-e.x-e.width/2),n=Math.abs(t.y-e.y-e.height/2);if(o>e.width/2+t.radius)return!1;if(n>e.height/2+t.radius)return!1;if(o<=e.width/2)return!0;if(n<=e.height/2)return!0;var i=o-e.width/2,r=n-e.height/2;return i*i+r*r<=t.radius*t.radius},e.circleCircleIntersect=function(e,o){var n,i,r,a,s,c,l,u,d;if(i=o.x-e.x,r=o.y-e.y,(a=Math.sqrt(r*r+i*i))>e.radius+o.radius)return new t.ShapesIntersectionsResult(t.ShapesIntersectionStatus.NoIntersection);if(a<Math.abs(e.radius-o.radius))return new t.ShapesIntersectionsResult(t.ShapesIntersectionStatus.ShapeInside);var h=new t.ShapesIntersectionsResult(t.ShapesIntersectionStatus.HasIntersections);return n=(e.radius*e.radius-o.radius*o.radius+a*a)/(2*a),u=e.x+i*n/a,d=e.y+r*n/a,s=Math.sqrt(e.radius*e.radius-n*n),c=s/a*-r,l=i*(s/a),h.addPoint(new t.BotPoint2D(u+c,d+l)),h.addPoint(new t.BotPoint2D(u-c,d-l)),h},e}();t.GeometryIntersectionsUtils=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){var e=function(){function t(){this.player=!0,this.dangers=!0,this.food=!0}return t}();t.CanvasUtilsDrawOptions=e;var o=function(){function t(){this.goalLine="#00ff00",this.goalDot="#ff0000",this.goalCross="#000000",this.collidedPoint="#66ff66",this.collidedElement="#ff9900",this.collisionAvoidancePointA="#ffa500",this.collisionAvoidancePointB="#ff0000",this.foodCluster="#ffffff",this.foodClusterText="#ffffff",this.foodClusterLine="#ffffff",this.foodClusterBoundary="#000000",this.inRangeResource="#00ff00",this.collectableResource="#ff0000",this.predictionLine="#000000",this.predictionCircle="#000000",this.encircledPlayerWarning="#ffff00",this.encircledPlayerDanger="#ff0000",this.collisionElement="#ff0000",this.collisionLine="#ff0000",this.playerRadius="#ffff00",this.closeToImminentDangerRadius="#ff0000",this.playerSideDetector="#ffff00",this.playerHeadDetector="#0000ff",this.playerTailDetector="#ffc0cb",this.frontResourceGatherArc="#00ff00",this.frontDangerArc="#0000ff",this.tailDangerArc="#0000ff"}return t}();t.CanvasUtilsColorsOptions=o;var n=function(){function t(){this.shadowBlur=3,this.draw=new e,this.colors=new o}return t}();t.CanvasUtilsOptions=n;var i=function(){function e(t){this.gameWrapper=t,this.opt=new n}return e.prototype.setMouseCoordinates=function(t){this.gameWrapper.input.mouse.setCoordinates(t)},e.prototype.mapToMouse=function(e){var o=this.gameWrapper.player.getPosition();return new t.Point2D((e.x-o.x)*window.game.world.scale.x,(e.y-o.y)*window.game.world.scale.y)},e.prototype.mapToCanvas=function(e){var o=this.gameWrapper.player.getPosition();return new t.Point2D(window.game.canvas.width/2+(e.x-o.x)*window.game.world.scale.x,window.game.canvas.height/2+(e.y-o.y)*window.game.world.scale.y)},e.prototype.circleMapToCanvas=function(e){var o=this.mapToCanvas(e);return new t.Circle(o.x,o.y,e.radius*window.game.world.scale.x)},e.prototype.setZoom=function(t){if(!$(window.botFactory.datGUI.gui.domElement.parentElement).data("isInside")&&window.game.world.scale.x){var e=window.game.world.scale.x;e*=Math.pow(.9,t.wheelDelta/-120||t.detail/2||0),e<.25?e=.25:e>1.5&&(e=1.5),window.game.world.scale.x=window.game.world.scale.y=e,window.desired_gsc=window.game.world.scale.x}},e.prototype.resetZoom=function(){window.game.world.scale.x=window.game.world.scale.y=.8116666666666666,window.desired_gsc=.8116666666666666},e.prototype.maintainZoom=function(){void 0!==window.desired_gsc&&(window.game.world.scale.x=window.game.world.scale.y=window.desired_gsc)},e.prototype.setBackground=function(t){throw new Error("Not implemented")},e.prototype.drawRect=function(e,o,n,i,r){void 0===r&&(r=1);var a=this.gameWrapper.input.canvas.getContext(),s=this.mapToCanvas(new t.Point2D(e.x,e.y)),c=e.width*window.game.world.scale.x,l=e.height*window.game.world.scale.y;a.save(),a.beginPath(),a.globalAlpha=r,a.shadowBlur=this.opt.shadowBlur,a.shadowColor=n,a.strokeStyle=n,a.translate(s.x+c/2,s.y+l/2),a.rotate(o),a.rect(-c/2,-l/2,c,l),a.stroke(),i&&(a.fillStyle=n,a.fill()),a.restore()},e.prototype.drawCircle=function(t,e,o,n){var i=t;void 0===n&&(n=1),void 0===i.radius&&(i.radius=5);var r=this.gameWrapper.input.canvas.getContext(),a=this.circleMapToCanvas(i);r.save(),r.globalAlpha=n,r.beginPath(),r.shadowBlur=this.opt.shadowBlur,r.shadowColor=e,r.strokeStyle=e,r.arc(a.x,a.y,a.radius,0,2*Math.PI),r.stroke(),o&&(r.fillStyle=e,r.fill()),r.restore()},e.prototype.drawArc=function(t,e,o,n,i,r,a){void 0===a&&(a=!0),void 0===r&&(r=1),void 0===t.radius&&(t.radius=5);var s=this.gameWrapper.input.canvas.getContext(),c=this.circleMapToCanvas(t),l=o/2;s.save(),s.globalAlpha=r,s.beginPath(),s.shadowBlur=this.opt.shadowBlur,s.shadowColor=n,s.strokeStyle=n,s.arc(c.x,c.y,c.radius,e-l,e+l,a),s.stroke(),i&&(s.fillStyle=n,s.fill()),s.restore()},e.prototype.drawCross=function(e,o,n,i){var r=this.gameWrapper.input.canvas.getContext(),a=r.canvas;e=this.mapToCanvas(e),this.drawLine(new t.Point2D(0,e.y),new t.Point2D(a.width,e.y),o,n,.15,!1),this.drawLine(new t.Point2D(e.x,0),new t.Point2D(e.x,a.height),o,n,i,!1)},e.prototype.drawLine=function(t,e,o,n,i,r){void 0===n&&(n=5),void 0===i&&(i=1),void 0===r&&(r=!0);var a=this.gameWrapper.input.canvas.getContext();r&&(t=this.mapToCanvas(t),e=this.mapToCanvas(e)),a.save(),a.globalAlpha=i,a.beginPath(),a.lineWidth=n*window.game.world.scale.x,a.shadowBlur=this.opt.shadowBlur,a.shadowColor=o,a.strokeStyle=o,a.moveTo(t.x,t.y),a.lineTo(e.x,e.y),a.stroke(),a.restore()},e.prototype.drawTriangle=function(t,e,o,n,i,r,a,s){void 0===i&&(i=5),void 0===a&&(a=1),void 0===s&&(s=!0);var c=this.gameWrapper.input.canvas.getContext();s&&(t=this.mapToCanvas(t),e=this.mapToCanvas(e),o=this.mapToCanvas(o)),c.save(),c.globalAlpha=a,c.beginPath(),c.lineWidth=i*window.game.world.scale.x,c.shadowBlur=this.opt.shadowBlur,c.shadowColor=n,c.strokeStyle=n,c.moveTo(t.x,t.y),c.lineTo(e.x,e.y),c.lineTo(o.x,o.y),c.stroke(),r&&(c.fillStyle=n,c.fill()),c.restore()},e.prototype.drawPolygon=function(t,e,o,n,i,r){if(t.length<3)throw new Error("Polygon must have more than 2 vertices. Supplied number of vertices: "+t.length);void 0===o&&(o=5),void 0===i&&(i=1),void 0===r&&(r=!0);var a=this.gameWrapper.input.canvas.getContext();if(r)for(var s=0,c=t.length;s<c;s++)t[s]=this.mapToCanvas(t[s]);a.save(),a.globalAlpha=i,a.beginPath(),a.lineWidth=o*window.game.world.scale.x,a.shadowBlur=this.opt.shadowBlur,a.shadowColor=e,a.strokeStyle=e,a.moveTo(t[0].x,t[0].y);for(var s=1,l=t.length,u=void 0;u=t[s],s<l;s++)a.lineTo(u.x,u.y);a.closePath(),a.stroke(),n&&(a.fillStyle=e,a.fill()),a.restore()},e.prototype.drawText=function(t,e,o,n,i){void 0===n&&(n=1),void 0===i&&(i=!0);var r=this.gameWrapper.input.canvas.getContext();i&&(t=this.mapToCanvas(t)),r.save(),r.globalAlpha=n,r.shadowBlur=this.opt.shadowBlur,r.shadowColor=o,r.fillStyle=o,r.font="bold 20px Arial",r.fillText(e,t.x,t.y),r.restore()},e}();__decorate([t.MethodDecoration.bound],i.prototype,"setMouseCoordinates",null),__decorate([t.MethodDecoration.bound],i.prototype,"mapToMouse",null),__decorate([t.MethodDecoration.bound],i.prototype,"mapToCanvas",null),__decorate([t.MethodDecoration.bound],i.prototype,"drawRect",null),__decorate([t.MethodDecoration.bound],i.prototype,"drawCircle",null),__decorate([t.MethodDecoration.bound],i.prototype,"drawArc",null),__decorate([t.MethodDecoration.bound],i.prototype,"drawCross",null),__decorate([t.MethodDecoration.bound],i.prototype,"drawLine",null),__decorate([t.MethodDecoration.bound],i.prototype,"drawTriangle",null),__decorate([t.MethodDecoration.bound],i.prototype,"drawPolygon",null),__decorate([t.MethodDecoration.bound],i.prototype,"drawText",null),t.CanvasUtilsBase=i}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},__decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){var e=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.wrappedDrawInterceptor=function(t){o.interceptedWrappedDrawCalls.push(t)},o.prototype.drawAllInterceptedWrappedCalls=function(){window.botFactory.clock.startFrame(),window.visualDebugging&&o.interceptedWrappedDrawCalls.forEach(function(t){t()}),o.interceptedWrappedDrawCalls=[],window.botFactory.clock.endFrame()},o.prototype.drawGoal=function(t){var e=this.gameWrapper.player.getPosition();this.drawLine(e,t,this.opt.colors.goalLine,2),this.drawCircle(t,this.opt.colors.goalDot,!0),this.drawCross(t,this.opt.colors.goalCross,void 0,.05)},o.prototype.drawCollisionPoint=function(t){this.drawCircle(t,this.opt.colors.collidedPoint,!0)},o.prototype.drawCollisionCircle=function(t){this.drawCircle(t,this.opt.colors.collidedElement,!1)},o.prototype.drawCollisionPolygon=function(t){this.drawPolygon(t.geometryAsPoint2DArray,this.opt.colors.collidedElement,void 0,!1)},o.prototype.drawCollisionAvoidance=function(t,e){var o=this.gameWrapper.player.getPosition();this.drawLine(o,e,this.opt.colors.collisionAvoidancePointA,5),this.drawLine(o,t,this.opt.colors.collisionAvoidancePointB,5)},o.prototype.drawFoodCluster=function(t,e){var o=this.gameWrapper.player.getPosition();this.drawCircle(t,this.opt.colors.foodCluster,!1,.5),this.drawText(t,e.toString(),this.opt.colors.foodClusterText),this.drawLine(o,t,this.opt.colors.foodClusterLine,2,.25)},o.prototype.drawFoodClusterBoundary=function(e){var o=this.gameWrapper.player.getPosition(),n=new t.Circle(o.x,o.y,e);this.drawCircle(n,this.opt.colors.foodClusterBoundary,!1)},o.prototype.drawResource=function(e,o){if(this.opt.draw.food&&(this.drawCircle(e,this.opt.colors.inRangeResource),o)){var n=new t.Circle(e.x,e.y,e.radius+15);this.drawCircle(n,this.opt.colors.collectableResource)}},o.prototype.drawTunnel=function(t,e,o){void 0==o&&(o=.15),this.drawLine(t.point1,t.point2,"black",3,o),this.drawLine(e.point1,e.point2,"black",3,o)},o.prototype.drawIntersectionPrediction=function(t){var e=this.gameWrapper.player.getPosition();this.drawLine(e,t,this.opt.colors.predictionLine,12,.75),this.drawCircle(t,this.opt.colors.predictionCircle,!1,.75)},o.prototype.drawEncircledPlayer=function(t,e){var o=e?this.opt.colors.encircledPlayerDanger:this.opt.colors.encircledPlayerWarning;this.drawCircle(t,o,!0,.2)},o.prototype.drawCollisionElements=function(e,o){if(this.opt.draw.dangers){for(var n=this.gameWrapper.player.getPosition(),i=0,r=e.length;i<r;i++){var a=e[i];if(void 0!==a)switch(a.shapeType){case t.CollisionElementType.Circle:this.drawCircle(a,this.opt.colors.collisionElement,!1,.25);break;case t.CollisionElementType.Polygon:var s=a.geometry.map(function(e){return new t.Point2D(e.x,e.y)});this.drawPolygon(s,this.opt.colors.collisionElement,void 0,!0,.1)}}for(var i=0,r=o.length;i<r;i++){var c=o[i];void 0!==c&&this.drawLine(n,new t.Point2D(c.x,c.y),this.opt.colors.collisionLine,2,.25)}}},o.prototype.drawPlayer=function(e,o,n,i,r,a,s,c,l,u){if(this.opt.draw.player){var d=this.gameWrapper.player.getRotation();this.drawCircle(r,this.opt.colors.closeToImminentDangerRadius,!1,.35),this.drawArc(o,d,u,this.opt.colors.frontResourceGatherArc,void 0,void 0,!1);var h=t.MathUtils.arcPoint(o.x,o.y,o.radius,d-u/2),p=t.MathUtils.arcPoint(o.x,o.y,o.radius,d+u/2);this.drawLine(new t.Point2D(o.x,o.y),h,this.opt.colors.frontResourceGatherArc),this.drawLine(new t.Point2D(o.x,o.y),p,this.opt.colors.frontResourceGatherArc),this.drawCircle(n,this.opt.colors.playerHeadDetector,!1),this.drawCircle(i,this.opt.colors.playerTailDetector,!1),this.drawCircle(a,this.opt.colors.playerSideDetector,!1),this.drawCircle(s,this.opt.colors.playerSideDetector,!1),this.drawArc(e,d,c,this.opt.colors.playerRadius),this.drawArc(e,d,c,this.opt.colors.frontDangerArc,!0,.1,!1);var h=t.MathUtils.arcPoint(e.x,e.y,e.radius,d-c/2),p=t.MathUtils.arcPoint(e.x,e.y,e.radius,d+c/2);this.drawTriangle(h,e,p,this.opt.colors.frontDangerArc,void 0,!0,.1),this.drawLine(new t.Point2D(e.x,e.y),h,this.opt.colors.playerRadius),this.drawLine(new t.Point2D(e.x,e.y),p,this.opt.colors.playerRadius);var h=t.MathUtils.arcPoint(e.x,e.y,e.radius,d+Math.PI-l/2),p=t.MathUtils.arcPoint(e.x,e.y,e.radius,d+Math.PI+l/2);this.drawLine(new t.Point2D(e.x,e.y),h,this.opt.colors.tailDangerArc),this.drawLine(new t.Point2D(e.x,e.y),p,this.opt.colors.tailDangerArc)}},o}(t.CanvasUtilsBase);e.interceptedWrappedDrawCalls=[],__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawGoal",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawCollisionPoint",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawCollisionCircle",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawCollisionPolygon",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawCollisionAvoidance",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawFoodCluster",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawFoodClusterBoundary",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawResource",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawTunnel",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawIntersectionPrediction",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawEncircledPlayer",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawCollisionElements",null),__decorate([t.MethodDecoration.intercept(e.wrappedDrawInterceptor)],e.prototype,"drawPlayer",null),t.CanvasUtils=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){var e;!function(t){t[t.WeaponStatus=31]="WeaponStatus",t[t.SelfItemStatus=7]="SelfItemStatus",t[t.AddItem=11]="AddItem"}(e=t.WebSocketDataTypeEnum||(t.WebSocketDataTypeEnum={}));var o;!function(t){t[t.Shield=28]="Shield"}(o=t.WebSocketSelfItemActivatedDataTypeEnum||(t.WebSocketSelfItemActivatedDataTypeEnum={}));var n;!function(t){t[t.Missile=13]="Missile",t[t.TeleMissile=14]="TeleMissile"}(n=t.WebSocketAddItemActivatedDataTypeEnum||(t.WebSocketAddItemActivatedDataTypeEnum={}));var i=function(){function t(){this.maxDistanceForDetectingSelfDeployedWeapons=200}return t}();t.WebSocketInterfaceOptions=i;var r=function(){function r(){
this.opt=new i}return r.prototype.onGameReadyDelegate=function(){this.original_WebSocketOnMessage=window.ws.onmessage,window.ws.onmessage=this.onMessage},r.prototype.onMessage=function(i){function r(e,o){var n=window.sprites[e];void 0!=n&&(void 0==n.weapon&&(n.weapon=new t.CarWeaponData(o)),n.weapon.weaponType=o)}window.botFactory.clock.startFrame("async");var a=(window.mainCar.id,new Int16Array(i.data));switch(a[0]){case e.WeaponStatus:for(var s=a[1],c=2,l=0;s>l;l++)(function(t,e,o,n,i){window.sprites[t]instanceof Car&&null!=i&&r(t,i)})(a[c],a[c+1],a[c+2],a[c+3],a[c+4]),c+=5;break;case e.SelfItemStatus:for(var c=1;c+4<a.length;){var u=a[c++];c++,function(t,e,n){var i=window.sprites[t];if(0!=n&&void 0!==i)switch(e){case o.Shield:var r=1==n;i.isShieldActivated=r,i.shieldActivationTime=r?new Date:null}}(u,o.Shield,a[c++]),c++,c++}break;case e.AddItem:for(var c=1;c+3<a.length;){var d=a[c++],h=a[c++],p=a[c++],f=a[c++],g=(a[c++],a[c++],window.botFactory.bot),y=window.botFactory.gameWrapper;if(!g.shapesHolster||!g.shapesHolster.tunnelLeftSideLine||!g.shapesHolster.tunnelRightSideLine)return;var m=new t.Point2D(p,f),v=new t.Point2D(window.mainCar.img.position.x,window.mainCar.img.position.y);if(t.MathUtils.getDistance(v,m)<=this.opt.maxDistanceForDetectingSelfDeployedWeapons){if(t.MathUtils.isLeft(g.shapesHolster.tunnelLeftSideLine.point1,g.shapesHolster.tunnelLeftSideLine.point2,m)&&t.MathUtils.isRight(g.shapesHolster.tunnelRightSideLine.point1,g.shapesHolster.tunnelRightSideLine.point2,m))switch(h){case n.Missile:case n.TeleMissile:y.items.ignoreMissilesById(d)}}}}window.botFactory.clock.endFrame("async"),this.original_WebSocketOnMessage(i)},r}();__decorate([t.MethodDecoration.bound],r.prototype,"onMessage",null),t.WebSocketInterface=r}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){!function(t){!function(t){t[t.ShootWhenInRange=0]="ShootWhenInRange"}(t.FightTactics||(t.FightTactics={}))}(t.Fight||(t.Fight={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(e){!function(e){var o=function(){function e(t,e,o){this.bot=t,this.gameWrapper=e,this.canvas=o}return e.prototype.action=function(e){var o=this.gameWrapper.items.getEnemies(),n=!0;if(void 0!=this.currentTarget){var i=this.currentTarget.enemyId;if(void 0!=i)for(var r=0,a=o.length;r<a&&null!==o[r];r++){var s=o[r];if(s.id==i){this.currentTarget.x=s.x,this.currentTarget.y=s.y,n=!1;break}}}if(n&&o.length>0)for(var r=0,a=o.length;r<a&&null!==o[r];r++){var s=o[r];if(s.velocity){window.log("Chasing new enemy with id "+s.id),this.currentTarget={reference:s,x:s.x,y:s.y,enemyId:s.id};break}}if(this.currentTarget){var c=this.currentTarget.reference;if(c){var l=void 0;return this.bot.stage=t.BotStageEnum.InterceptEnemy,e>0&&(l=t.MathUtils.predictIntersectionEx(window.mainCar,c,e)),l||(l=t.MathUtils.predictIntersection(window.mainCar,c)),this.canvas.drawIntersectionPrediction(l),t.ActivityResult.CreateValidResponse(l)}}return t.ActivityResult.CreateInvalidResponse()},e}();e.ChaseClosest=o}(e.Fight||(e.Fight={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(e){!function(e){var o=function(){function e(t,e,o){this.bot=t,this.gameWrapper=e,this.canvas=o}return e.prototype.noop=function(){},e.prototype.action=function(e){if(window.mainCar.weapon)for(var o=this.gameWrapper.items.getEnemies(),n=window.mainCar.weapon.triggerLocation==t.CarWeaponTrigger.Self,i=window.mainCar.weapon.triggerLocation==t.CarWeaponTrigger.Front,r=window.mainCar.weapon.triggerLocation==t.CarWeaponTrigger.Behind,a=0,s=o.length;a<s;a++){var c=o[a];if(i&&this.bot.inFrontDangerAngle(c,e)||r&&this.bot.inTailDangerAngle(c,e)||n){this.bot.fireWeaponTick();break}}},e}();e.ShootWhenInRange=o}(e.Fight||(e.Fight={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){!function(t){!function(t){t[t.Food=0]="Food",t[t.Weapon=1]="Weapon"}(t.ResourcePriority||(t.ResourcePriority={}))}(t.Resource||(t.Resource={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(e){!function(e){var o=function(){function e(t,e,o){this.bot=t,this.gameWrapper=e,this.canvas=o,this.currentTarget=void 0}return e.prototype.noop=function(){this.currentTarget=void 0},e.prototype.action=function(e){if(!this.stabilizeResource(e)){for(var o=0,n=e.length,i=null;o<n&&null!==(i=e[o]);o++)this.canBeCollected(i)||(i.distance=1/0);e.sort(t.ArrayUtils.sortDistance);var r=null;void 0!==(r=e[0])?this.currentTarget=new t.Bot2Point2D(r.x,r.y,50,.1,0,0,r.id):this.currentTarget=new t.Bot2Point2D(this.bot.worldCenterX,this.bot.worldCenterY,0,0,0,0,void 0)}return t.ActivityResult.CreateValidResponse(this.currentTarget)},e.prototype.canBeCollected=function(e){var o=new t.Circle(e.x,e.y,2);return!!this.bot.inFrontResourceGatherAngle(o)&&(!(this.bot.math.circleIntersect(o,this.bot.shapesHolster.playerLeftSideCircle).status>=t.ShapesIntersectionStatus.ShapeInside)&&!(this.bot.math.circleIntersect(o,this.bot.shapesHolster.playerRightSideCircle).status>=t.ShapesIntersectionStatus.ShapeInside))},e.prototype.stabilizeResource=function(t){if(void 0!=this.currentTarget){var e=this.currentTarget.resourceId;if(void 0!=e)for(var o=0,n=t.length,i=null;o<n&&null!==(i=t[o]);o++)if(i.id==e)return this.canBeCollected(i)}return!1},e.prototype.drawResources=function(e,o){if(window.visualDebugging&&this.canvas.opt.draw.player)for(var n=this.bot.shapesHolster.playerResourceGatherCircle.radius,i=0,r=e.length,a=null;i<r&&null!==(a=e[i])&&a.distance<=n;i++){var s=this.canBeCollected(a);this.canvas.drawResource(new t.Circle(a.x,a.y,o),s)}},e}();e.FindClosestResourceBase=o}(e.Resource||(e.Resource={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){!function(t){!function(t){!function(t){t[t.Default=0]="Default"}(t.FoodTactics||(t.FoodTactics={}))}(t.Food||(t.Food={}))}(t.Resource||(t.Resource={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},DracoolaArt;!function(t){!function(t){!function(e){!function(e){!function(o){var n=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.prototype.action=function(o){window.botFactory.clock.startFrame(),void 0==o&&(o=this.gameWrapper.items.getFood()),this.bot.stage=t.BotStageEnum.SeekFood;var n=e.prototype.action.call(this,o);return this.drawResources(o,this.bot.opt.fixedRadius.food),window.botFactory.clock.endFrame(),n},o}(e.FindClosestResourceBase);o.FindClosest=n}(e.Food||(e.Food={}))}(e.Resource||(e.Resource={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.scanRadius=1750,this.sectorSize=350,this.minimumElementsPerCluster=15}return t}();t.FindClosestClusterOptions=e}(t.Food||(t.Food={}))}(t.Resource||(t.Resource={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){!function(e){!function(e){!function(e){var o=function(){function o(o,n,i){this.bot=o,this.gameWrapper=n,this.canvas=i,this.opt=new e.FindClosestClusterOptions,this.foodClusterWrapper=new t.ClusterWrapper}return o.prototype.noop=function(){},o.prototype.action=function(e){window.botFactory.clock.startFrame(),void 0==e&&(e=this.gameWrapper.items.getFood());var o=[],n=this.gameWrapper.player.getPosition(),i=this.opt.scanRadius;e=e.filter(function(t){return t.distance<=i}),window.botFactory.clock.startFrame("ElementsDensity");var r=t.MathUtils.get2DElementsDensity(e,this.opt.sectorSize,this.opt.minimumElementsPerCluster);window.botFactory.clock.endFrame("ElementsDensity");for(var a=0,s=r.length;a<s;a++){for(var c=r[a],l=1/0,u=1/0,d=-1/0,h=-1/0,p=[],f=0,g=c.length;f<g;f++){var y=c[f],m=e[y];l=Math.min(l,m.x),u=Math.min(u,m.y),d=Math.max(d,m.x),h=Math.max(h,m.y),p.push(m)}var v=(l+d)/2,w=(u+h)/2,_=Math.max(d-l,h-u)/2,b=new t.Circle(v,w,_),C=new t.Cluster(b,p);C.distance=t.MathUtils.getDistance(C,n),o.push(C),this.canvas.drawFoodCluster(b,c.length)}return this.canvas.drawFoodClusterBoundary(i),this.foodClusterWrapper.foodClusters=o,window.botFactory.clock.endFrame(),t.ActivityResult.CreateCustomResponse(this.foodClusterWrapper)},o}();__decorate([t.MethodDecoration.trace],o.prototype,"action",null),e.FindClosestCluster=o}(e.Food||(e.Food={}))}(e.Resource||(e.Resource={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){!function(t){!function(t){!function(t){t[t.WeaponTactics=0]="WeaponTactics"}(t.WeaponTactics||(t.WeaponTactics={}))}(t.Weapon||(t.Weapon={}))}(t.Resource||(t.Resource={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},DracoolaArt;!function(t){!function(t){!function(e){!function(e){!function(o){var n=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.prototype.action=function(o){window.botFactory.clock.startFrame(),void 0==o&&(o=this.gameWrapper.items.getWeapons()),this.bot.stage=t.BotStageEnum.SeekWeapon;var n=e.prototype.action.call(this,o);return this.drawResources(o,this.bot.opt.fixedRadius.weapon),window.botFactory.clock.endFrame(),n},o}(e.FindClosestResourceBase);o.FindClosest=n}(e.Weapon||(e.Weapon={}))}(e.Resource||(e.Resource={}))}(t.Tactics||(t.Tactics={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){var e;!function(t){t[t.DoNotSeekFood=0]="DoNotSeekFood",t[t.SeekFood=1]="SeekFood",t[t.SeekFoodInsideFoodCluster=2]="SeekFoodInsideFoodCluster"}(e=t.FoodBehaviour||(t.FoodBehaviour={}));var o;!function(t){t[t.DoNotSeekWeapons=0]="DoNotSeekWeapons",t[t.SeekWeaponsBasedOnAggressivity=1]="SeekWeaponsBasedOnAggressivity"}(o=t.WeaponBehaviour||(t.WeaponBehaviour={}));var n;!function(t){t[t.DoNotFight=0]="DoNotFight",t[t.ShootImmediately=1]="ShootImmediately",t[t.ShootWhenEnemyInCloseRange=2]="ShootWhenEnemyInCloseRange",t[t.ShootWhenEnemyInBigRange=3]="ShootWhenEnemyInBigRange",t[t.InterceptAndShootWhenEnemyInTunnel=4]="InterceptAndShootWhenEnemyInTunnel"}(n=t.FightBehaviour||(t.FightBehaviour={}));var i;!function(t){t[t.DoNotAvoid=0]="DoNotAvoid",t[t.AvoidLethalEnemies=1]="AvoidLethalEnemies"}(i=t.AvoidanceBehaviour||(t.AvoidanceBehaviour={}));var r=function(){function t(){}return t.getDefaultBehaviour=function(){var t=new a;return t.Food=e.SeekFoodInsideFoodCluster,t.Weapon=o.SeekWeaponsBasedOnAggressivity,t.Fight=n.ShootImmediately,t.Avoidance=i.AvoidLethalEnemies,t},t}();t.BehaviourBuilder=r;var a=function(){function t(){}return Object.defineProperty(t.prototype,"Food",{get:function(){return this._food},set:function(t){this._food=e[e[t]]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Weapon",{get:function(){return this._weapon},set:function(t){this._weapon=o[o[t]]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Fight",{get:function(){return this._fight},set:function(t){this._fight=n[n[t]]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Avoidance",{get:function(){return this._avoidance},set:function(t){this._avoidance=i[i[t]]},enumerable:!0,configurable:!0}),t}();a.defaultBehaviour=r.getDefaultBehaviour(),t.BehaviourData=a}(t.Behaviour||(t.Behaviour={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){!function(t){t[t.Default=0]="Default",t[t.CalculateTorque=1]="CalculateTorque",t[t.BasicPursuit=2]="BasicPursuit",t[t.PursuitAndShoot=3]="PursuitAndShoot",t[t.DrawEnemies=4]="DrawEnemies",t[t.InterconnectFood=5]="InterconnectFood"}(t.Strategies||(t.Strategies={}))}(t.Strategy||(t.Strategy={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(e){var o=function(){function e(e,o,n){this.bot=e,this.gameWrapper=o,this.canvas=n,this._guiElements=[],this._guiIsInitialised=!1,this.useChasingPrediction=!0,this._forceChasingPrediction=!1,this._selectedFoodTactics=t.Tactics.Resource.Food.FoodTactics.Default,this._selectedFightTactics=t.Tactics.Fight.FightTactics.ShootWhenInRange,this._foodTactics=[],this._fightTactics=[],this.FindClosestClusterFoodTactics=new t.Tactics.Resource.Food.FindClosestCluster(e,this.gameWrapper,this.canvas),this.ChaseClosestFightTactics=new t.Tactics.Fight.ChaseClosest(e,this.gameWrapper,this.canvas),this.WeaponTactics=new t.Tactics.Resource.Weapon.FindClosest(e,this.gameWrapper,this.canvas)}return Object.defineProperty(e.prototype,"canUseChasingPrediction",{get:function(){return this._forceChasingPrediction||this.useChasingPrediction},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedFoodTactics",{get:function(){return this._selectedFoodTactics},set:function(e){this._selectedFoodTactics=t.Tactics.Resource.Food.FoodTactics[t.Tactics.Resource.Food.FoodTactics[e]]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedFightTactics",{get:function(){return this._selectedFightTactics},set:function(e){this._selectedFightTactics=t.Tactics.Fight.FightTactics[t.Tactics.Fight.FightTactics[e]]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FoodTactics",{get:function(){var e=this.selectedFoodTactics,o=this._foodTactics[e];if(void 0==o){var n=void 0;switch(e){case t.Tactics.Resource.Food.FoodTactics.Default:n=new t.Tactics.Resource.Food.FindClosest(this.bot,this.gameWrapper,this.canvas);break;default:throw Error("Incompatible value or type '"+e+"' in Strategy. Type: "+typeof e+".")}o=this._foodTactics[e]=n}return o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FightTactics",{get:function(){var e=this.selectedFightTactics,o=this._fightTactics[e];if(void 0==o){var n=void 0;switch(e){case t.Tactics.Fight.FightTactics.ShootWhenInRange:n=new t.Tactics.Fight.ShootWhenInRange(this.bot,this.gameWrapper,this.canvas);break;default:throw Error("Incompatible value or type '"+e+"' in Strategy. Type: "+typeof e+".")}o=this._fightTactics[e]=n}return o},enumerable:!0,configurable:!0}),e.prototype.showDatGui=function(t){this._guiIsInitialised?this._guiElements.forEach(function(t){$(t).show()}):this.initDatGui(t)},e.prototype.hideDatGui=function(){this._guiIsInitialised&&this._guiElements.forEach(function(t){$(t).hide()})},e}();e.StrategyBase=o}(t.Strategy||(t.Strategy={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},DracoolaArt;!function(t){!function(t){!function(e){var o=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.FOOD_VALUE=1,o.WEAPON_VALUE=5,o.aggressivity=65,o._collectedWeapons=0,o.lastWeaponStatus=t.CarWeapon.None,o}return __extends(o,e),Object.defineProperty(o.prototype,"collectedWeapons",{get:function(){return this._collectedWeapons},enumerable:!0,configurable:!0}),o.prototype.onPlayerDeath=function(){this._collectedWeapons=0},o.prototype.action=function(){var e;window.botFactory.clock.startFrame(),window.botFactory.userInterface.setRageVisible(window.mainCar.isShieldActivated);var o=this.resourcePriority();this.fightCheck();var n,i=!0;if(window.mainCar.isShieldActivated){+new Date-+window.mainCar.shieldActivationTime<7500&&(i=!1)}if(i&&(n=this.bot.CollisionManager.action()),n&&n.isValid)e=n;else{var r=null;if(window.mainCar.weapon){if(window.mainCar.weapon.triggerLocation==t.CarWeaponTrigger.Front&&this.canUseChasingPrediction){var a=void 0;this._forceChasingPrediction&&(a=window.mainCar.weapon.magnitude),r=this.ChaseClosestFightTactics.action(a)}}e=r&&r.isValid?r:this.resourceAction(o)}return window.botFactory.clock.endFrame(),e},o.prototype.resourcePriority=function(){var e;window.mainCar.weapon&&(e=window.mainCar.weapon.weaponType)!=t.CarWeapon.None?e!=this.lastWeaponStatus&&(this._collectedWeapons++,this.lastWeaponStatus=e):this.lastWeaponStatus=t.CarWeapon.None;var o=this.aggressivity,n=Math.ceil(o/this.WEAPON_VALUE),i=100-o,r=Math.ceil(i/n),a=window.myCoins;return Math.floor(a/r)>this._collectedWeapons?t.Tactics.Resource.ResourcePriority.Weapon:t.Tactics.Resource.ResourcePriority.Food},o.prototype.fightCheck=function(){if(window.botFactory.clock.startFrame(),!(this.aggressivity<=0)){var e=t.Behaviour.BehaviourData.defaultBehaviour;switch(this._forceChasingPrediction=!1,e.Fight){case t.Behaviour.FightBehaviour.DoNotFight:this.FightTactics.noop();break;case t.Behaviour.FightBehaviour.ShootImmediately:this.bot.fireWeapon();break;case t.Behaviour.FightBehaviour.ShootWhenEnemyInCloseRange:this.FightTactics.action();break;case t.Behaviour.FightBehaviour.ShootWhenEnemyInBigRange:this.FightTactics.action(2*this.bot.shapesHolster.playerCircle.radius);break;case t.Behaviour.FightBehaviour.InterceptAndShootWhenEnemyInTunnel:if(window.mainCar.weapon){var o=!1;if(window.mainCar.weapon.isLethalWeapon){var n=window.mainCar.weapon.triggerLocation==t.CarWeaponTrigger.Front,i=window.mainCar.weapon.triggerLocation==t.CarWeaponTrigger.Behind;n?window.mainCar.weapon.magnitude>0?(this._forceChasingPrediction=!0,this.bot.stage==t.BotStageEnum.InterceptEnemy&&this.bot.goal.state==t.GoalState.InFront&&(window.mainCar.weapon.weaponFired||(o=!0))):o=!0:i?(this._forceChasingPrediction=!0,this.bot.stage==t.BotStageEnum.InterceptEnemy&&this.bot.goal.state==t.GoalState.InBack&&(window.mainCar.weapon.weaponFired||(o=!0))):o=!0}else o=!0;o&&this.FightTactics.action()}}window.botFactory.clock.endFrame()}},o.prototype.resourceAction=function(e){return t.Behaviour.BehaviourData.defaultBehaviour.Weapon==t.Behaviour.WeaponBehaviour.DoNotSeekWeapons?this.foodAction():e==t.Tactics.Resource.ResourcePriority.Food?this.foodAction():this.weaponAction()},o.prototype.weaponAction=function(){return this.WeaponTactics.action()},o.prototype.foodAction=function(){var e=null;window.botFactory.clock.startFrame();var o=t.Behaviour.BehaviourData.defaultBehaviour;if(this.gameWrapper.util.isPlaying)switch(o.Food){case t.Behaviour.FoodBehaviour.DoNotSeekFood:this.FoodTactics.noop(),e=t.ActivityResult.CreateInvalidResponse();break;case t.Behaviour.FoodBehaviour.SeekFood:e=this.FoodTactics.action();break;case t.Behaviour.FoodBehaviour.SeekFoodInsideFoodCluster:var n=this.FindClosestClusterFoodTactics.action(),i=n.customData,r=i.getBestCluster();void 0!=r&&r.distance<r.highRadius?(this.canvas.drawCircle(r,"white",!0,.15),e=this.FoodTactics.action(r.elements)):e=this.FoodTactics.action();break;default:e=t.ActivityResult.CreateInvalidResponse()}return window.botFactory.clock.endFrame(),e},o.prototype.initDatGui=function(e){var o=this;if(!this._guiIsInitialised){var n=e.gui,i=t.Behaviour.BehaviourData.defaultBehaviour,r=n.addFolder("Bot Options");this._guiElements.push(r.domElement),n.remember(this.bot),n.remember(this.bot.opt),n.remember(this.bot.opt.radiusEnchancer),n.remember(this.bot.opt.wall),r.add(this.bot.opt,t.nameof(function(){return o.bot.opt.arcSize}),Math.PI/32,2*Math.PI).step(Math.PI/32).listen();var a=r.addFolder("Radius");a.open(),a.add(this.bot.opt,t.nameof(function(){return o.bot.opt.playerRadiusMultiplier}),1,50).step(.5).name("Player"),a.add(this.bot.opt,t.nameof(function(){return o.bot.opt.playerResourceGatherRadiusMultiplier}),1,50).step(.5).name("Resource Gather"),a.add(this.bot.opt,t.nameof(function(){return o.bot.opt.radiusFrontDetectorMultiplier}),.1,50).step(.1).name("Front Detector"),a.add(this.bot.opt,t.nameof(function(){return o.bot.opt.radiusBehindDetectorMultiplier}),.1,50).step(.1).name("Behind Detector"),a.add(this.bot.opt,t.nameof(function(){return o.bot.opt.radiusSideDetectorsMultiplier}),1,10).step(.1).name("Side Detectors"),a.add(this.bot.opt,t.nameof(function(){return o.bot.opt.radiusDangerMultiplier}),.1,50).step(.1).name("Danger"),a.add(this.bot.opt,t.nameof(function(){return o.bot.opt.closeToImminentDangerRange}),5,1500).step(5).name("Close To Imminent Danger");var s=(a.addFolder("Individual"),r.addFolder("Angles"));s.open(),s.add(this.bot.opt,t.nameof(function(){return o.bot.opt.frontResourceGatherAngle}),Math.PI/32,2*Math.PI).step(Math.PI/32).name("Front Resource Gather"),s.add(this.bot.opt,t.nameof(function(){return o.bot.opt.frontDangerAngle}),Math.PI/32,2*Math.PI).step(Math.PI/32).name("Front Danger"),s.add(this.bot.opt,t.nameof(function(){return o.bot.opt.tailDangerAngle}),Math.PI/32,2*Math.PI).step(Math.PI/32).name("Tail Danger");var c=r.addFolder("Collision Manager");c.open(),c.add(this.bot.CollisionManager.opt,t.nameof(function(){return o.bot.CollisionManager.opt.avoidanceAngle}),-Math.PI,Math.PI).step(Math.PI/32).name("Avoidance Angle"),c.add(this.bot.CollisionManager.opt,t.nameof(function(){return o.bot.CollisionManager.opt.tailedDetectorAdditionalAvoidanceAngle}),0,Math.PI).step(Math.PI/32).name("Tailed Avoidance Angle+"),c.add(this.bot.CollisionManager.opt,t.nameof(function(){return o.bot.CollisionManager.opt.tailedDetectorThresholdAngle}),Math.PI/32,Math.PI).step(Math.PI/32).name("Tailed Threshold Detector Angle"),c.add(this.bot.opt,t.nameof(function(){return o.bot.opt.enCircleThreshold}),.05,1).step(5e-4).name("Encircle Threshold"),c.add(this.bot.opt,t.nameof(function(){return o.bot.opt.enCircleAllThreshold}),.05,1).step(5e-4).name("Encircle All Threshold"),c.add(this.bot.opt,t.nameof(function(){return o.bot.opt.enCircleDistanceMult}),1,50).step(.5).name("Encircle Distance Multiplier");var l=r.addFolder("Offsets");l.open(),l.add(this.bot.opt.wall,t.nameof(function(){return o.bot.opt.wall.offsetLeftX}),-1e3,1e3).step(5).name("Left X"),l.add(this.bot.opt.wall,t.nameof(function(){return o.bot.opt.wall.offsetRightX}),-1e3,1e3).step(5).name("Right X"),l.add(this.bot.opt.wall,t.nameof(function(){return o.bot.opt.wall.offsetTopY}),-1e3,1e3).step(5).name("Top Y"),l.add(this.bot.opt.wall,t.nameof(function(){return o.bot.opt.wall.offsetBottomY}),-1e3,1e3).step(5).name("Bottom Y"),r.add(this.bot.opt,t.nameof(function(){return o.bot.opt.tunnelSideDistance}),10,250).step(1).name("Tunnel Side Distance"),r.add(this.bot,t.nameof(function(){return o.bot.speedMult}),.1,10).step(.1),r.add(this.bot.opt.radiusEnchancer,t.nameof(function(){return o.bot.opt.radiusEnchancer.misiles}),50,1500).step(25),r.add(this.bot.opt.radiusEnchancer,t.nameof(function(){return o.bot.opt.radiusEnchancer.teleMisiles}),50,1500).step(25),r.add(this.bot.opt.radiusEnchancer,t.nameof(function(){return o.bot.opt.radiusEnchancer.bombs}),50,1500).step(25),r.add(this.bot.opt.radiusEnchancer,t.nameof(function(){return o.bot.opt.radiusEnchancer.mines}),50,1500).step(25);var u=n.addFolder("Tactics");this._guiElements.push(u.domElement),u.open(),n.remember(this);var d={FindClosest:t.Tactics.Resource.Food.FoodTactics.Default};u.add(this,t.nameof(function(){return o.aggressivity}),0,100).listen(),u.add(this,t.nameof(function(){return o.selectedFoodTactics}),d).listen();var h=n.addFolder("Behaviour");this._guiElements.push(h.domElement),h.open(),n.remember(this),n.remember(i);var p={"Do Not Seek Food":t.Behaviour.FoodBehaviour.DoNotSeekFood,"Seek Food":t.Behaviour.FoodBehaviour.SeekFood,"Seek Food Inside Food Cluster":t.Behaviour.FoodBehaviour.SeekFoodInsideFoodCluster},f={"Do Not Seek Weapons":t.Behaviour.WeaponBehaviour.DoNotSeekWeapons,"Seek Weapons Based On Aggressivity":t.Behaviour.WeaponBehaviour.SeekWeaponsBasedOnAggressivity},g={"Do Not Fight":t.Behaviour.FightBehaviour.DoNotFight,"Shoot Immediately":t.Behaviour.FightBehaviour.ShootImmediately,"Shoot When Enemy In Close Range":t.Behaviour.FightBehaviour.ShootWhenEnemyInCloseRange,"Shoot When Enemy In Big Range":t.Behaviour.FightBehaviour.ShootWhenEnemyInBigRange,"Intercept And Shoot When Enemy In Tunnel":t.Behaviour.FightBehaviour.InterceptAndShootWhenEnemyInTunnel},y={"Do Not Avoid":t.Behaviour.AvoidanceBehaviour.DoNotAvoid,"Avoid Lethal Enemies":t.Behaviour.AvoidanceBehaviour.AvoidLethalEnemies};h.add(i,t.nameof(function(){return i.Food}),p),h.add(i,t.nameof(function(){return i.Weapon}),f),h.add(i,t.nameof(function(){return i.Fight}),g),h.add(i,t.nameof(function(){return i.Avoidance}),y),h.add(this,t.nameof(function(){return o.useChasingPrediction})).name("Use Chasing Prediction");var m=n.addFolder("Closest Cluster Food Tactics");this._guiElements.push(m.domElement),m.open(),n.remember(this.FindClosestClusterFoodTactics.opt),m.add(this.FindClosestClusterFoodTactics.opt,t.nameof(function(){return o.FindClosestClusterFoodTactics.opt.scanRadius}),100,1e4).step(50),m.add(this.FindClosestClusterFoodTactics.opt,t.nameof(function(){return o.FindClosestClusterFoodTactics.opt.sectorSize}),10,1e3).step(5),m.add(this.FindClosestClusterFoodTactics.opt,t.nameof(function(){return o.FindClosestClusterFoodTactics.opt.minimumElementsPerCluster}),1,350).step(1);var v=n.addFolder("Visual Debugging");this._guiElements.push(v.domElement),v.open(),n.remember(window),n.remember(this.canvas.opt),n.remember(this.canvas.opt.draw),n.remember(this.canvas.opt.colors),v.add(window,"visualDebugging"),v.add(this.canvas.opt,"shadowBlur").name("Shadow Blur");var w=v.addFolder("Individual");w.open(),w.add(this.canvas.opt.draw,t.nameof(function(){return o.canvas.opt.draw.player})),w.add(this.canvas.opt.draw,t.nameof(function(){return o.canvas.opt.draw.dangers})),w.add(this.canvas.opt.draw,t.nameof(function(){return o.canvas.opt.draw.food}));var _=v.addFolder("Colors");_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.goalLine})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.goalDot})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.goalCross})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.collidedPoint})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.collidedElement})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.collisionAvoidancePointA})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.collisionAvoidancePointB})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.foodCluster})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.foodClusterText})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.foodClusterLine})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.foodClusterBoundary})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.inRangeResource})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.collectableResource})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.predictionLine})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.predictionCircle})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.encircledPlayerWarning})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.encircledPlayerDanger})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.collisionElement})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.collisionLine})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.playerRadius})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.closeToImminentDangerRadius})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.playerSideDetector})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.playerHeadDetector})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.playerTailDetector})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.frontResourceGatherArc})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.frontDangerArc})),_.add(this.canvas.opt.colors,t.nameof(function(){return o.canvas.opt.colors.tailDangerArc}));var b=n.addFolder("Fizzy Text");this._guiElements.push(b.domElement);var C=e.userInterface.fizzyText;n.remember(C),b.add(C,t.nameof(function(){return C.theme})).name("Dark Theme"),b.add(C,t.nameof(function(){return C.message})).name("Message"),b.add(C,t.nameof(function(){return C.speed}),-5,5).name("Speed"),b.add(C,t.nameof(function(){return C.displayOutline})).name("Display Outline"),b.add(C,t.nameof(function(){return C.noiseStrength})).step(5).name("Noise Strength"),b.add(C,t.nameof(function(){return C.growthSpeed}),-5,5).name("Growth Speed"),b.add(C,t.nameof(function(){return C.maxSize})).min(0).step(.25).name("maxSize"),b.add(C,t.nameof(function(){return C.color0})).name("Color 1"),b.add(C,t.nameof(function(){return C.color1})).name("Color 2"),b.add(C,t.nameof(function(){return C.color2})).name("Color 3"),b.add(C,t.nameof(function(){return C.color3})).name("Color 4"),b.add(C,t.nameof(function(){return C.explode})).name("Explode"),this._guiIsInitialised=!0}},o}(e.StrategyBase);e.DefaultStrategy=o}(t.Strategy||(t.Strategy={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},__decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){!function(e){var o=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.aggressivity=0,t.stepx=0,t.startTime=0,t.xPoints={p1:1/0,p2:-1/0},t.yPoints={p1:1/0,p2:-1/0},t}return __extends(o,e),o.prototype.onPlayerDeath=function(){},o.prototype.reset=function(){this.startPosition=null},o.prototype.startTracking=function(){this.xPoints={p1:1/0,p2:-1/0},this.yPoints={p1:1/0,p2:-1/0},this.startTime=0,this.stepx=0},o.prototype.action=function(){var e,o=null;window.botFactory.clock.startFrame(),this.gameWrapper.items.reset(),this.gameWrapper.items.getEnemies();var n=this.gameWrapper.player.getPosition();return this.startPosition||(this.startPosition=n,e=new t.Point2D(n.x,n.y)),this.xPoints.p1=Math.min(this.xPoints.p1,n.x),this.xPoints.p2=Math.max(this.xPoints.p2,n.x),this.yPoints.p1=Math.min(this.yPoints.p1,n.y),this.yPoints.p2=Math.max(this.yPoints.p2,n.y),
0==this.stepx&&n.y<this.bot.goal.coordinates.y&&(this.stepx=1),1==this.stepx&&n.y>=this.bot.goal.coordinates.y&&(this.startTime=+new Date,this.stepx=2),2==this.stepx&&n.y<this.bot.goal.coordinates.y&&(this.stepx=3),3==this.stepx&&n.y>=this.bot.goal.coordinates.y&&(window.trackedTime=+new Date-this.startTime,this.stepx=4),window.xPoints=this.xPoints,window.yPoints=this.yPoints,o=e?t.ActivityResult.CreateValidResponse(e):t.ActivityResult.CreateValidResponse(this.bot.goal.coordinates),window.botFactory.clock.endFrame(),o},o.prototype.foodAction=function(){},o.prototype.initDatGui=function(e){var o=this;if(!this._guiIsInitialised){var n=e.gui,i=(t.Behaviour.BehaviourData.defaultBehaviour,n.addFolder("Torque Test Actions"));this._guiElements.push(i.domElement),i.open(),i.add(this,t.nameof(function(){return o.reset})),i.add(this,t.nameof(function(){return o.startTracking})),this._guiIsInitialised=!0}},o}(e.StrategyBase);o=__decorate([t.MethodDecoration.sealed],o),e.CalculateTorqueBotStrategy=o}(t.Strategy||(t.Strategy={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},__decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){!function(e){var o=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.aggressivity=0,t.usePrediction=!1,t}return __extends(o,e),o.prototype.onPlayerDeath=function(){},o.prototype.action=function(){var e=null;window.botFactory.clock.startFrame();var o=!0;this.gameWrapper.items.reset();var n=this.gameWrapper.items.getEnemies();if(void 0!=this.currentEnemy){var i=this.currentEnemy.enemyId;if(void 0!=i)for(var r=0,a=n.length;r<a&&null!==n[r];r++){var s=n[r];if(s.id==i){this.currentEnemy.x=s.x,this.currentEnemy.y=s.y,o=!1;break}}}if(o)if(n.length>0){var s=n[0];this.currentEnemy={thisEnemy:s,x:s.x,y:s.y,enemyId:s.id}}else this.currentEnemy={x:this.bot.worldCenterX,y:this.bot.worldCenterY,thisEnemy:void 0,enemyId:void 0};var c=new t.Point2D(this.currentEnemy.x,this.currentEnemy.y),l=this.currentEnemy.thisEnemy;if(this.usePrediction&&l&&l.velocity){c=t.MathUtils.predictIntersection(window.mainCar,l);var u=t.MathUtils.predictIntersectionEx(window.mainCar,l,20.25);if(u){var d=this.gameWrapper.player.getPosition();this.canvas.drawLine(d,u,"black",10,.75),this.canvas.drawCircle(u,this.canvas.opt.colors.predictionCircle,!1,.75)}}return e=t.ActivityResult.CreateValidResponse(c),window.botFactory.clock.endFrame(),e},o.prototype.foodAction=function(){},o.prototype.initDatGui=function(e){var o=this;if(!this._guiIsInitialised){var n=e.gui,i=(t.Behaviour.BehaviourData.defaultBehaviour,n.addFolder("Pursuit Test Actions"));this._guiElements.push(i.domElement),i.open(),i.add(this,t.nameof(function(){return o.usePrediction})),this._guiIsInitialised=!0}},o}(e.StrategyBase);o=__decorate([t.MethodDecoration.sealed],o),e.PursuitBotStrategy=o}(t.Strategy||(t.Strategy={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},DracoolaArt;!function(t){!function(t){!function(e){var o=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.FOOD_VALUE=1,o.WEAPON_VALUE=5,o.aggressivity=100,o.collectedWeapons=0,o.lastWeaponStatus=t.CarWeapon.None,o}return __extends(o,e),o.prototype.onPlayerDeath=function(){this.collectedWeapons=0},o.prototype.action=function(){var e;window.botFactory.clock.startFrame(),this.fightCheck();var o=null;if(window.mainCar.weapon){if(window.mainCar.weapon.triggerLocation==t.CarWeaponTrigger.Front&&this.canUseChasingPrediction){var n=void 0;this._forceChasingPrediction&&(n=window.mainCar.weapon.magnitude),o=this.ChaseClosestFightTactics.action(n)}}return e=o&&o.isValid?o:this.WeaponTactics.action(),window.botFactory.clock.endFrame(),e},o.prototype.fightCheck=function(){if(window.botFactory.clock.startFrame(),!(this.aggressivity<=0)){var e=t.Behaviour.BehaviourData.defaultBehaviour;switch(this._forceChasingPrediction=!1,e.Fight){case t.Behaviour.FightBehaviour.DoNotFight:this.FightTactics.noop();break;case t.Behaviour.FightBehaviour.ShootImmediately:this.bot.fireWeapon();break;case t.Behaviour.FightBehaviour.ShootWhenEnemyInCloseRange:this.FightTactics.action();break;case t.Behaviour.FightBehaviour.ShootWhenEnemyInBigRange:this.FightTactics.action(2*this.bot.shapesHolster.playerCircle.radius);break;case t.Behaviour.FightBehaviour.InterceptAndShootWhenEnemyInTunnel:if(window.mainCar.weapon){var o=!1;if(window.mainCar.weapon.isLethalWeapon){window.mainCar.weapon.triggerLocation==t.CarWeaponTrigger.Front&&window.mainCar.weapon.magnitude>0?(this._forceChasingPrediction=!0,this.bot.stage==t.BotStageEnum.InterceptEnemy&&this.bot.goal.isInTunnel&&(window.mainCar.weapon.weaponFired||(window.log(+new Date,"GoalIsInTunnel! WeaponType = "+t.CarWeapon[window.mainCar.weapon.weaponType]+"; WeaponFired = "+window.mainCar.weapon.weaponFired),o=!0))):o=!0}else o=!0;o&&this.FightTactics.action()}}window.botFactory.clock.endFrame()}},o.prototype.foodAction=function(){return t.ActivityResult.CreateInvalidResponse()},o.prototype.initDatGui=function(e){var o=this;if(!this._guiIsInitialised){var n=e.gui,i=t.Behaviour.BehaviourData.defaultBehaviour,r=n.addFolder("Tactics (Pursuit & Shoot)");this._guiElements.push(r.domElement),r.open(),n.remember(this);var a={FindClosest:t.Tactics.Resource.Food.FoodTactics.Default};r.add(this,t.nameof(function(){return o.aggressivity}),0,100).listen(),r.add(this,t.nameof(function(){return o.selectedFoodTactics}),a).listen();var s=n.addFolder("Behaviour (Pursuit & Shoot)");this._guiElements.push(s.domElement),s.open(),n.remember(this),n.remember(i);var c={"Do Not Seek Food":t.Behaviour.FoodBehaviour.DoNotSeekFood,"Seek Food":t.Behaviour.FoodBehaviour.SeekFood,"Seek Food Inside Food Cluster":t.Behaviour.FoodBehaviour.SeekFoodInsideFoodCluster},l={"Do Not Seek Weapons":t.Behaviour.WeaponBehaviour.DoNotSeekWeapons,"Seek Weapons Based On Agresivity":t.Behaviour.WeaponBehaviour.SeekWeaponsBasedOnAggressivity},u={"Do Not Fight":t.Behaviour.FightBehaviour.DoNotFight,"Shoot Immediately":t.Behaviour.FightBehaviour.ShootImmediately,"Shoot When Enemy In Close Range":t.Behaviour.FightBehaviour.ShootWhenEnemyInCloseRange,"Shoot When Enemy In Big Range":t.Behaviour.FightBehaviour.ShootWhenEnemyInBigRange,"Intercept And Shoot When Enemy In Tunnel":t.Behaviour.FightBehaviour.InterceptAndShootWhenEnemyInTunnel},d={"Do Not Avoid":t.Behaviour.AvoidanceBehaviour.DoNotAvoid,"Avoid Lethal Enemies":t.Behaviour.AvoidanceBehaviour.AvoidLethalEnemies};s.add(i,t.nameof(function(){return i.Food}),c),s.add(i,t.nameof(function(){return i.Weapon}),l),s.add(i,t.nameof(function(){return i.Fight}),u),s.add(i,t.nameof(function(){return i.Avoidance}),d),s.add(this,t.nameof(function(){return o.useChasingPrediction})).name("Use Chasing Prediction");var h=n.addFolder("Visual Debugging (Pursuit & Shoot)");this._guiElements.push(h.domElement),h.open(),n.remember(window),n.remember(this.canvas.opt),n.remember(this.canvas.opt.draw),n.remember(this.canvas.opt.colors),h.add(window,"visualDebugging"),h.add(this.canvas.opt,"shadowBlur").name("Shadow Blur");var p=h.addFolder("Individual");p.open(),p.add(this.canvas.opt.draw,t.nameof(function(){return o.canvas.opt.draw.player})),p.add(this.canvas.opt.draw,t.nameof(function(){return o.canvas.opt.draw.dangers})),p.add(this.canvas.opt.draw,t.nameof(function(){return o.canvas.opt.draw.food})),this._guiIsInitialised=!0}},o}(e.StrategyBase);e.PursuitAndShootBotStrategy=o}(t.Strategy||(t.Strategy={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},__decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){!function(e){var o=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.aggressivity=0,t}return __extends(o,e),o.prototype.hasValidSprite=function(t){var e=this.gameWrapper.world.getWorkingBounds(),o=t.img,n=o.position;return n.x>e.x&&n.y>e.y&&n.x<e.width&&n.y<e.height},o.prototype._baseGetItems=function(e,o,n){var i=[],r=0,a=jQuery.extend(!0,{},e),s=this.gameWrapper.player.getPosition();for(var c in a){var l=a[c];if(l.img.visible=!0,l.img.alpha=1,l.img.renderable=!0,l instanceof o&&this.hasValidSprite(l)){var u=l.img.position.x,d=l.img.position.y;l.x=u,l.y=d,l.distance=t.MathUtils.getDistance(l,s),n&&l.id==n?delete a[c]:i[r++]=l}else delete a[c]}return i},o.prototype.onPlayerDeath=function(){},o.prototype.action=function(){var e=null;window.botFactory.clock.startFrame();var o=this;return this._baseGetItems(window.sprites,window.Car,window.mainCar.id).forEach(function(e){o.canvas.drawCircle(new t.Circle(e.x,e.y,75),"red",!0,.25)}),e=t.ActivityResult.CreateValidResponse(new t.Point2D(this.bot.worldCenterX,this.bot.worldCenterY)),window.botFactory.clock.endFrame(),e},o.prototype.foodAction=function(){},o.prototype.initDatGui=function(e){if(!this._guiIsInitialised){var o=e.gui,n=(t.Behaviour.BehaviourData.defaultBehaviour,o.addFolder("Draw Enemies Test Actions"));this._guiElements.push(n.domElement),n.open(),this._guiIsInitialised=!0}},o}(e.StrategyBase);o=__decorate([t.MethodDecoration.sealed],o),e.DrawEnemiesBotStrategy=o}(t.Strategy||(t.Strategy={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},__decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){!function(e){var o=n=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.aggressivity=0,t}return __extends(o,e),o.distance=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},o.prototype.drawI=function(t,e,o){t.remove(e);for(var n=t.nearest(e,1),i=0;i<n.length;i++){var r=n[i][0];this.canvas.drawLine(e,r,"black",3,.5),t.remove(r),--o>0&&this.drawI(t,r,o)}},o.prototype.onPlayerDeath=function(){},o.prototype.action=function(){var t=null;window.botFactory.clock.startFrame();var e=this.gameWrapper.items.getFood();if(t=this.FoodTactics.action(),t.isValid){var o=t.goalCoordinates,i=new window.kdTree(e,n.distance,["x","y"]);this.drawI(i,o,15)}return window.botFactory.clock.endFrame(),t},o.prototype.foodAction=function(){},o.prototype.initDatGui=function(e){if(!this._guiIsInitialised){var o=e.gui,n=(t.Behaviour.BehaviourData.defaultBehaviour,o.addFolder("Interconnect Food Test Actions"));this._guiElements.push(n.domElement),n.open(),this._guiIsInitialised=!0}},o}(e.StrategyBase);o=n=__decorate([t.MethodDecoration.sealed],o),e.InterconnectFoodBotStrategy=o;var n}(t.Strategy||(t.Strategy={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(e){!function(e){var o=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],n=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],i=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],r=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],a=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,3,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],s=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],c=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],l=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],u={};u[t.CarWeapon.None]=null,u[t.CarWeapon.FastRocket]=n,u[t.CarWeapon.ThreeFastRockets]=n,u[t.CarWeapon.TeleRocket]=i,u[t.CarWeapon.Cloak]=null,u[t.CarWeapon.Mine]=r,u[t.CarWeapon.ThreeMines]=r,u[t.CarWeapon.BigBang]=a,u[t.CarWeapon.ThreeTeleRocket]=i,u[t.CarWeapon.Shield]=s,u[t.CarWeapon.Flashes]=c,u[t.CarWeapon.Magnet]=null,u[t.CarWeapon.HugeBash]=l;var d=function(){function t(){}return t.getDesign=function(t){return u[t]},Object.defineProperty(t.prototype,"DesignDetails",{get:function(){return t.DesignDetails},enumerable:!0,configurable:!0}),t.prototype.getDesign=function(e){return t.getDesign(e)},t}();d.Singleton=new d,d.DesignDetails={widthCenter:(o[0].length-1)/2,heightCenter:(o.length-1)/2},e.WarCarDesigns=d}(e.Circle||(e.Circle={}))}(t.Design||(t.Design={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(e){!function(e){var o=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],n=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],i=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,5,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],r=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],a=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,4,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],s=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],c=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],l=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,4,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],u={};u[t.CarWeapon.None]=null,u[t.CarWeapon.FastRocket]=n,u[t.CarWeapon.ThreeFastRockets]=n,u[t.CarWeapon.TeleRocket]=i,u[t.CarWeapon.Cloak]=null,u[t.CarWeapon.Mine]=r,u[t.CarWeapon.ThreeMines]=r,u[t.CarWeapon.BigBang]=a,u[t.CarWeapon.ThreeTeleRocket]=i,u[t.CarWeapon.Shield]=s,u[t.CarWeapon.Flashes]=c,u[t.CarWeapon.Magnet]=null,u[t.CarWeapon.HugeBash]=l;var d=function(){function t(){}return t.getDesign=function(t){return u[t]},Object.defineProperty(t.prototype,"DesignDetails",{get:function(){return t.DesignDetails},enumerable:!0,configurable:!0}),t.prototype.getDesign=function(e){return t.getDesign(e)},t}();d.Singleton=new d,d.DesignDetails={widthCenter:(o[0].length-1)/2,heightCenter:(o.length-1)/2},e.WeaponDesigns=d}(e.Circle||(e.Circle={}))}(t.Design||(t.Design={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(e){!function(e){function o(t){for(var e=-Math.PI/2,o=0;o<t.length;o++)t[o].rotate(e)}var n=[new Victor(-.5,5.5),new Victor(-1,3.5),new Victor(-1,2),new Victor(-1.5,1.5),new Victor(-3,1),new Victor(-3,-1.25),new Victor(-1,-1),new Victor(-1.25,-2.25),new Victor(0,-1.75),new Victor(1.25,-2.25),new Victor(1,-1),new Victor(3,-1.25),new Victor(3,1),new Victor(1.5,1.5),new Victor(1,2),new Victor(1,3.5),new Victor(.5,5.5)],i=[new Victor(-.25,5.5),new Victor(-.75,3.75),new Victor(-.75,3),new Victor(-.75,2),new Victor(-1,1.5),new Victor(-1.25,.75),new Victor(-1,0),new Victor(-.75,-.75),new Victor(0,-1),new Victor(.75,-.75),new Victor(1,0),new Victor(1.25,.75),new Victor(1,1.5),new Victor(.75,2),new Victor(.75,3),new Victor(.75,3.75),new Victor(.25,5.5)],r=n,a=[new Victor(-.25,.75),new Victor(-.25,.5),new Victor(-.5,.25),new Victor(-1,0),new Victor(-1.25,-.75),new Victor(-1,-1),new Victor(-1.25,-1.75),new Victor(-.5,-2),new Victor(0,-2.25),new Victor(.5,-2),new Victor(1.25,-1.75),new Victor(1,-1),new Victor(1.25,-.75),new Victor(1,0),new Victor(.5,.25),new Victor(.25,.5),new Victor(.25,.75)],s=n,c=n,l=[new Victor(-.25,8),new Victor(-.5,5),new Victor(-.75,3),new Victor(-.75,2),new Victor(-1,1.5),new Victor(-1.25,.75),new Victor(-1,0),new Victor(-.75,-.75),new Victor(0,-1),new Victor(.75,-.75),new Victor(1,0),new Victor(1.25,.75),new Victor(1,1.5),new Victor(.75,2),new Victor(.75,3),new Victor(.5,5),new Victor(.25,8)],u=[new Victor(-.25,4),new Victor(-.5,3.5),new Victor(-1.5,3.25),new Victor(-2,3),new Victor(-2,2),new Victor(-1.25,.75),new Victor(-1,0),new Victor(-.75,-.75),new Victor(0,-1),new Victor(.75,-.75),new Victor(1,0),new Victor(1.25,.75),new Victor(2,2),new Victor(2,3),new Victor(1.5,3.25),new Victor(.5,3.5),new Victor(.25,4)];o(n),o(i),o(a),o(l),o(u);var d={};d[t.CarWeapon.None]=null,d[t.CarWeapon.FastRocket]=i,d[t.CarWeapon.ThreeFastRockets]=i,d[t.CarWeapon.TeleRocket]=r,d[t.CarWeapon.Cloak]=null,d[t.CarWeapon.Mine]=a,d[t.CarWeapon.ThreeMines]=a,d[t.CarWeapon.BigBang]=s,d[t.CarWeapon.ThreeTeleRocket]=r,d[t.CarWeapon.Shield]=c,d[t.CarWeapon.Flashes]=l,d[t.CarWeapon.Magnet]=null,d[t.CarWeapon.HugeBash]=u;var h=function(){function t(){}return t.getDesign=function(t){return d[t]},t.prototype.getDesign=function(e){return t.getDesign(e)},t}();h.Singleton=new h,e.WarCarDesigns=h}(e.Polygon||(e.Polygon={}))}(t.Design||(t.Design={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(t){!function(t){!function(t){t[t.Default=0]="Default",t[t.Advanced=1]="Advanced",t[t["ber"]=2]="ber"}(t.Managers||(t.Managers={}))}(t.Collision||(t.Collision={}))}(t.Manager||(t.Manager={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){!function(e){!function(e){var o=function(){function t(){this.avoidanceAngle=Math.PI/16*15,this.tailedDetectorThresholdAngle=Math.PI/16,this.tailedDetectorAdditionalAvoidanceAngle=Math.PI/16*2}return t}();e.CollisionManagerOptions=o;var n=function(){function e(t,e,n){this.bot=t,this.gameWrapper=e,this.canvas=n,this.opt=new o}return e.prototype.getAngleIndex=function(t){var e;return t<0&&(t+=2*Math.PI),e=Math.round(t*(1/this.bot.opt.arcSize)),e===this.bot.MAXARC?0:e},e.prototype.headingBestAngle=function(e){var o,n,i,r=[],a=this.getAngleIndex(this.gameWrapper.player.getRotation())+this.bot.MAXARC/2;a>this.bot.MAXARC&&(a-=this.bot.MAXARC);for(var s=0;s<this.bot.MAXARC;s++)void 0===e[s]?(n=0,void 0===i&&(i=s)):(n=e[s].distance2,i&&(r.push({openStart:i,openEnd:s-1,sz:s-1-i}),i=void 0)),(void 0===o||o.distance<n&&0!==o.distance)&&(o={distance:n,aIndex:s});return i&&r[0]?(r[0].openStart=i,r[0].sz=r[0].openEnd-i,r[0].sz<0&&(r[0].sz+=this.bot.MAXARC)):i&&r.push({openStart:i,openEnd:i,sz:0}),r.length>0?(r.sort(t.ArrayUtils.sortSz),this.bot.changeHeadingAbs((r[0].openEnd-r[0].sz/2)*this.bot.opt.arcSize)):this.bot.changeHeadingAbs(o.aIndex*this.bot.opt.arcSize)},e.prototype.avoidCollisionPoint=function(e,o){var n=this.gameWrapper.player.getPosition();(void 0===o||o>Math.PI)&&(o=Math.PI);var i=new t.Point2D(n.x+2e3*this.bot.cos,n.y+2e3*this.bot.sin);return this.canvas.drawCollisionAvoidance(e,i),t.MathUtils.isLeft(n,i,e)?this.bot.changeHeadingAbs(e.ang-o):this.bot.changeHeadingAbs(e.ang+o)},e.prototype.getCollisionAngles=function(e){for(var o=[],n=this.gameWrapper.player.getPosition(),i=0,r=e.length;i<r;i++){var a=e[i];this.bot.setDistance2FromPlayer(a);var s=t.MathUtils.fastAtan2(Math.round(a.y-n.y),Math.round(a.x-n.x)),c=this.getAngleIndex(s),l=Math.round(Math.pow(Math.sqrt(a.distance2)-a.radius,2));(void 0===o[c]||o[c].distance2>a.distance2)&&(o[c]=new t.CollisionAngle(Math.round(a.x),Math.round(a.y),s,a.dangerType,l,a.radius,c))}return o},e}();e.CollisionBaseManager=n}(e.Collision||(e.Collision={}))}(t.Manager||(t.Manager={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},DracoolaArt;!function(t){!function(t){!function(e){!function(e){var o=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.prototype.action=function(){var e=this.getCollisionData(),o=this.checkCollision(e.collisionElements);if(o.isValid)return this.bot.stage=t.BotStageEnum.AvoidCollision,o;var n=this.checkEncircle(e.collisionAngles);return n.isValid?(this.bot.stage=t.BotStageEnum.AvoidEncirclement,n):t.ActivityResult.CreateInvalidResponse()},o.prototype.pushCollisionElementsFromCircleDesignMap=function(e,o,n,i,r){var a,s=o.DesignDetails,c=o.getDesign(i);if(c)for(var l=this.bot.opt.basePlayerWidth/2,u=n.x,d=n.y,h=this.gameWrapper.player.getRotation(n),p=Math.sin(h),f=Math.cos(h),g=l*this.bot.opt.radiusDangerMultiplier,y=0;y<c.length;y++)for(var m=c[y],v=y-s.heightCenter,w=0;w<m.length;w++){var _=m[w];if(0!=_){var b=w-s.widthCenter,C=_*g,x=C*Math.abs(b),D=C*Math.abs(v),A=u,S=d;b<0?(A+=p*x,S-=f*x):b>0&&(A-=p*x,S+=f*x),v<0?(A+=f*D,S+=p*D):v>0&&(A-=f*D,S-=p*D),a=new t.CollisionElement(A,S,h,t.CollisionElementType.Circle,r,C),e.push(a),a=void 0}}},o.prototype.pushEnemiesCollisionElements=function(e){for(var o=this.gameWrapper.items.getEnemies(),n=0,i=o.length;n<i;n++)if(o[n].id!==window.mainCar.id){var r=o[n];if(!(r.isShieldActivated||r.weapon&&r.weapon.isLethalWeapon))continue;var a=t.Design.Circle.WarCarDesigns.Singleton;r.isShieldActivated&&this.pushCollisionElementsFromCircleDesignMap(e,a,r,t.CarWeapon.Shield,t.CollisionElementDangerType.Enemy),this.pushCollisionElementsFromCircleDesignMap(e,a,r,r.weapon.weaponType,t.CollisionElementDangerType.Enemy)}},o.prototype.pushCustomWeaponsCollisionElements=function(e,o,n,i){for(var r=0,a=o.length;r<a;r++){var s=o[r],c=t.Design.Circle.WeaponDesigns.Singleton;this.pushCollisionElementsFromCircleDesignMap(e,c,s,n,i)}},o.prototype.pushWeaponsCollisionElements=function(e){var o=this.gameWrapper.items.getMissiles(),n=this.gameWrapper.items.getTeleMissiles(),i=this.gameWrapper.items.getBombs(),r=this.gameWrapper.items.getMines();this.pushCustomWeaponsCollisionElements(e,o,t.CarWeapon.FastRocket,t.CollisionElementDangerType.Misile),this.pushCustomWeaponsCollisionElements(e,n,t.CarWeapon.TeleRocket,t.CollisionElementDangerType.TeleMisile),this.pushCustomWeaponsCollisionElements(e,i,t.CarWeapon.BigBang,t.CollisionElementDangerType.Bomb),this.pushCustomWeaponsCollisionElements(e,r,t.CarWeapon.Mine,t.CollisionElementDangerType.Mine)},o.prototype.getCollisionData=function(){var e,o=[];return this.pushWeaponsCollisionElements(o),this.pushEnemiesCollisionElements(o),e=this.getCollisionAngles(o),o.sort(t.ArrayUtils.sortDistance2),this.canvas.drawCollisionElements(o,e),new t.CollisionDataRespons(o,e)},o.prototype.getIntersectionPoints=function(e){var o=new t.Circle(e.x,e.y,e.radius);return this.bot.math.circleIntersect(this.bot.shapesHolster.headCircle,o)},o.prototype.checkCollision=function(e){window.botFactory.clock.startFrame();var o;if(0===e.length)return window.botFactory.clock.endFrame(),t.ActivityResult.CreateInvalidResponse();for(var n=t.AccelerationFlag.NotDefined,i=this.gameWrapper.player.getRotation(),r=0;r<e.length;r++){var a=e[r];if(o=this.getIntersectionPoints(a),o.status>=t.ShapesIntersectionStatus.ShapeInside){var s=o.points[0];if(s&&(a.dangerType!=t.CollisionElementDangerType.Misile&&a.dangerType!=t.CollisionElementDangerType.TeleMisile||Math.sqrt(a.distance2)<=this.bot.opt.closeToImminentDangerRange&&(n=t.AccelerationFlag.Yes),o.status==t.ShapesIntersectionStatus.HasIntersections&&this.bot.inFrontDangerAngle(s)||o.status==t.ShapesIntersectionStatus.ShapeInside)){var c=0;Math.abs(i-a.ang)<this.opt.tailedDetectorThresholdAngle&&(c=this.opt.tailedDetectorAdditionalAvoidanceAngle,n=t.AccelerationFlag.Yes);var l=this.avoidCollisionPoint(s,this.opt.avoidanceAngle-c);return window.botFactory.clock.endFrame(),t.ActivityResult.CreateValidResponse(l.goalCoordinates,n)}}}return window.botFactory.clock.endFrame(),t.ActivityResult.CreateInvalidResponse()},o.prototype.checkEncircle=function(e){window.botFactory.clock.startFrame();for(var o=[],n=0,i=0,r=0;r<e.length;r++)if(void 0!==e[r]){if(t.CollisionElementDangerType.NotDefined!=e[r].dangerType){var a=e[r].dangerType;o[a]?o[a]++:o[a]=1,o[a]>n&&(n=o[a])}e[r].distance2<Math.pow(this.bot.kartRadius*this.bot.opt.enCircleDistanceMult,2)&&i++}this.gameWrapper.player.getPosition();if(n>this.bot.MAXARC*this.bot.opt.enCircleThreshold){var s=this.headingBestAngle(e);return this.canvas.drawEncircledPlayer(this.bot.shapesHolster.playerCircle,!0),window.botFactory.clock.endFrame(),t.ActivityResult.Transfer(s,null,null,t.AccelerationFlag.Yes)}if(i>this.bot.MAXARC*this.bot.opt.enCircleAllThreshold){var s=this.headingBestAngle(e);return this.canvas.drawEncircledPlayer(this.bot.shapesHolster.playerCircle,!1),window.botFactory.clock.endFrame(),t.ActivityResult.Transfer(s,null,null,t.AccelerationFlag.Default)}return this.canvas.drawPlayer(this.bot.shapesHolster.playerCircle,this.bot.shapesHolster.playerResourceGatherCircle,this.bot.shapesHolster.headCircle,this.bot.shapesHolster.tailCircle,this.bot.shapesHolster.closeToImminentDangerCircle,this.bot.shapesHolster.playerLeftSideCircle,this.bot.shapesHolster.playerRightSideCircle,this.bot.opt.frontDangerAngle,this.bot.opt.tailDangerAngle,this.bot.opt.frontResourceGatherAngle),window.botFactory.clock.endFrame(),t.ActivityResult.CreateInvalidResponse()},o}(e.CollisionBaseManager);e.CollisionCourseManager=o}(e.Collision||(e.Collision={}))}(t.Manager||(t.Manager={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},DracoolaArt;!function(t){!function(t){!function(e){!function(e){var o=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return __extends(o,e),o.prototype.pushCollisionElementsFromPolygonDesignMap=function(e,o,n,i,r){var a,s=o.getDesign(i);if(s){for(var c=n.x,l=n.y,u=new Victor(c,l),d=this.gameWrapper.player.getRotation(n),h=(Math.sin(d),Math.cos(d),this.bot.kartRadius*this.bot.opt.radiusDangerMultiplier),p=Array(s.length),f=0;f<p.length;f++){(p[f]=s[f].clone()).rotate(d).multiplyScalar(h).add(u)}a=new t.CollisionElement(c,l,d,t.CollisionElementType.Polygon,r,h),a.geometry=p,e.push(a),a=void 0}},o.prototype.pushEnemiesCollisionElements=function(e){for(var o=this.gameWrapper.items.getEnemies(),n=0,i=o.length;n<i;n++)if(o[n].id!==window.mainCar.id){var r=o[n];if(!(r.isShieldActivated||r.weapon&&r.weapon.isLethalWeapon))continue;var a=t.Design.Polygon.WarCarDesigns.Singleton;r.isShieldActivated&&this.pushCollisionElementsFromPolygonDesignMap(e,a,r,t.CarWeapon.Shield,t.CollisionElementDangerType.Enemy),this.pushCollisionElementsFromPolygonDesignMap(e,a,r,r.weapon.weaponType,t.CollisionElementDangerType.Enemy)}},o.prototype.getCollisionData=function(){var o,n=[];return e.prototype.pushWeaponsCollisionElements.call(this,n),this.pushEnemiesCollisionElements(n),o=this.getCollisionAngles(n),n.sort(t.ArrayUtils.sortDistance2),this.canvas.drawCollisionElements(n,o),new t.CollisionDataRespons(n,o)},o.prototype.getIntersectionPoints=function(e){var o;switch(e.shapeType){case t.CollisionElementType.Circle:var n=new t.Circle(e.x,e.y,e.radius);o=this.bot.math.circleIntersect(this.bot.shapesHolster.headCircle,n);break;case t.CollisionElementType.Polygon:var i=new t.Polygon(e.x,e.y,e.geometry);o=this.bot.math.circlePolygonIntersect(this.bot.shapesHolster.headCircle,i);break;default:throw new Error("Invalid CollisionElementType: '"+e.shapeType+"'")}return o},o}(e.CollisionCourseManager);e.AdvancedCollisionCourseManager=o}(e.Collision||(e.Collision={}))}(t.Manager||(t.Manager={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},DracoolaArt;!function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.AdvancedCollisionCourseManager);t.berCollisionCourseManager=e}(t.Collision||(t.Collision={}))}(t.Manager||(t.Manager={}))}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){var e=function(){function t(){this.arcSize=Math.PI/8,this.radiusSideDetectorsMultiplier=1,this.radiusFrontDetectorMultiplier=10,this.radiusBehindDetectorMultiplier=10,this.radiusDangerMultiplier=10,this.frontResourceGatherAngle=2*Math.PI/3,this.frontDangerAngle=Math.PI/2,this.tailDangerAngle=Math.PI/2,this.enCircleThreshold=.5625,this.enCircleAllThreshold=.5625,this.enCircleDistanceMult=20,this.basePlayerWidth=50,this.playerRadiusMultiplier=20,this.playerResourceGatherRadiusMultiplier=35,this.closeToImminentDangerRange=350,this.tunnelSideDistance=87.5,this.wall={offsetBottomY:0,offsetLeftX:0,offsetRightX:0,offsetTopY:0},this.fixedRadius={food:15,weapon:45},this.radiusEnchancer={bombs:906.25,mines:218.75,misiles:437.5,teleMisiles:625}}return t}();t.BotOptions=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){var e=function(){function e(t,e){this.gameWrapper=t,this.canvas=e}return e.prototype.circleIntersect=function(e,o){var n=t.GeometryIntersectionsUtils.circleCircleIntersect(e,o);if(n.status==t.ShapesIntersectionStatus.ShapeInside)n.addPoint(new t.BotPoint2D(o.x,o.y));else if(n.status!=t.ShapesIntersectionStatus.HasIntersections)return n;for(var i=this.gameWrapper.player.getPosition(),r=0,a=n.length;r<a;r++){var s=n.points[r];s.ang=t.MathUtils.fastAtan2(s.y-i.y,s.x-i.x),this.canvas.drawCollisionPoint(s)}return this.canvas.drawCollisionCircle(o),n},e.prototype.circlePolygonIntersect=function(e,o){var n=t.GeometryIntersectionsUtils.intersectCirclePolygon(e,e.radius,o);if(n.status==t.ShapesIntersectionStatus.ShapeInside)n.addPoint(new t.BotPoint2D(o.x,o.y));else if(n.status!=t.ShapesIntersectionStatus.HasIntersections)return n;for(var i=this.gameWrapper.player.getPosition(),r=0,a=n.length;r<a;r++){var s=n.points[r];s.ang=t.MathUtils.fastAtan2(s.y-i.y,s.x-i.x),this.canvas.drawCollisionPoint(s)}return this.canvas.drawCollisionPolygon(o),n},e}(),o=function(){function o(o,n){this.gameWrapper=o,this.canvas=n,this.isBotRunning=!1,this.isBotEnabled=!0,this.stage=t.BotStageEnum.NotStarted,this.scores=[],this.defaultAccel=0,this.sectorBoxSide=0,this.shapesHolster={closeToImminentDangerCircle:null,headCircle:null,playerCircle:null,playerLeftSideCircle:null,playerResourceGatherCircle:null,playerRightSideCircle:null,tailCircle:null,tunnelLeftSideLine:null,tunnelRightSideLine:null},this.speedMult=25/5.78;var i=this.gameWrapper.world.getWorkingBounds();this.worldCenterX=i.width/2,this.worldCenterY=i.height/2,this.opt=new t.BotOptions,
this.math=new e(o,n),this.goal=new t.GoalData}return Object.defineProperty(o.prototype,"kartWidth",{get:function(){return this.opt.basePlayerWidth},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"kartRadius",{get:function(){return this.kartWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"MAXARC",{get:function(){return 2*Math.PI/this.opt.arcSize},enumerable:!0,configurable:!0}),o.prototype.setAcceleration=function(e){if(e==t.AccelerationFlag.Yes){if(!window.mainCar.isAccelerating){window.mainCar.isAccelerating=!0,window.log("Speed up!!");var o=new MouseEvent("mousedown",{altKey:!1,bubbles:!0,button:2,buttons:2,cancelable:!0,ctrlKey:!1,shiftKey:!1});this.gameWrapper.input.canvas.dispatchEvent(o)}}else if(window.mainCar.isAccelerating){window.mainCar.isAccelerating=!1,window.log("Stop speeding up!!");var o=new MouseEvent("mouseup",{altKey:!1,bubbles:!0,button:2,buttons:2,cancelable:!0,ctrlKey:!1,shiftKey:!1});this.gameWrapper.input.canvas.dispatchEvent(o)}},o.prototype.fireWeapon=function(){if(window.mainCar.weapon){var e=window.mainCar.weapon;if(e.weaponType!=t.CarWeapon.None){if(!e.weaponFired){e.weaponFired=!0;var o=new MouseEvent("mousedown",{altKey:!1,bubbles:!0,button:1,buttons:1,cancelable:!0,ctrlKey:!1,shiftKey:!1});this.gameWrapper.input.canvas.dispatchEvent(o)}}else if(1==e.weaponFired){e.weaponFired=!1;var o=new MouseEvent("mouseup",{altKey:!1,bubbles:!0,button:1,buttons:1,cancelable:!0,ctrlKey:!1,shiftKey:!1});this.gameWrapper.input.canvas.dispatchEvent(o)}}},o.prototype.fireWeaponTick=function(){if(window.mainCar.weapon){var e=window.mainCar.weapon;if(e.weaponType!=t.CarWeapon.None){var o=new MouseEvent("mousedown",{altKey:!1,bubbles:!0,button:1,buttons:1,cancelable:!0,ctrlKey:!1,shiftKey:!1});this.gameWrapper.input.canvas.dispatchEvent(o);var n=new MouseEvent("mouseup",{altKey:!1,bubbles:!0,button:1,buttons:1,cancelable:!0,ctrlKey:!1,shiftKey:!1});this.gameWrapper.input.canvas.dispatchEvent(n),e.weaponFired=!0}}},o.prototype.onPlayerDeath=function(){this.stage=t.BotStageEnum.NotStarted},o.prototype.changeHeadingAbs=function(e){var o=this.gameWrapper.player.getPosition(),n=new t.Point2D(o.x+Math.cos(e)*this.shapesHolster.headCircle.radius,o.y+Math.sin(e)*this.shapesHolster.headCircle.radius);return t.ActivityResult.CreateValidResponse(n)},o.prototype.setDistance2FromPlayer=function(e){var o=this.gameWrapper.player.getPosition();return e.distance2=t.MathUtils.getDistance2(o,e),e},o.prototype.inFrontAngle=function(e,o,n){var i=this.gameWrapper.player.getPosition(),r=this.gameWrapper.player.getRotation();return t.GeometryIntersectionsUtils.isInsideArcSector(e,i,n,r-o/2,r+o/2)},o.prototype.inBackAngle=function(e,o,n){var i=this.gameWrapper.player.getPosition(),r=this.gameWrapper.player.getRotation();return t.GeometryIntersectionsUtils.isInsideArcSector(e,i,n,r+Math.PI-o/2,r+Math.PI+o/2)},o.prototype.inFrontResourceGatherAngle=function(t,e){return void 0==e&&(e=this.shapesHolster.playerResourceGatherCircle.radius),this.inFrontAngle(t,this.opt.frontResourceGatherAngle,e)},o.prototype.inFrontDangerAngle=function(t,e){return void 0==e&&(e=this.shapesHolster.playerCircle.radius),this.inFrontAngle(t,this.opt.frontDangerAngle,e)},o.prototype.inTailDangerAngle=function(t,e){return void 0==e&&(e=this.shapesHolster.playerCircle.radius),this.inFrontAngle(t,this.opt.tailDangerAngle,e)},o.prototype.inFront=function(t){return this.inFrontAngle(t,Math.PI,1/0)},o.prototype.inBack=function(t){return this.inBackAngle(t,Math.PI,1/0)},o.prototype.isBotInGame=function(){return this.gameWrapper.util.isPlaying&&this.isBotEnabled},o}();__decorate([t.MethodDecoration.bound],o.prototype,"setAcceleration",null),__decorate([t.MethodDecoration.bound],o.prototype,"fireWeapon",null),__decorate([t.MethodDecoration.bound],o.prototype,"fireWeaponTick",null),__decorate([t.MethodDecoration.bound],o.prototype,"changeHeadingAbs",null),__decorate([t.MethodDecoration.bound],o.prototype,"setDistance2FromPlayer",null),__decorate([t.MethodDecoration.bound],o.prototype,"inFrontAngle",null),__decorate([t.MethodDecoration.bound],o.prototype,"inBackAngle",null),__decorate([t.MethodDecoration.bound],o.prototype,"inFrontResourceGatherAngle",null),__decorate([t.MethodDecoration.bound],o.prototype,"inFrontDangerAngle",null),__decorate([t.MethodDecoration.bound],o.prototype,"inTailDangerAngle",null),__decorate([t.MethodDecoration.bound],o.prototype,"inFront",null),__decorate([t.MethodDecoration.bound],o.prototype,"inBack",null),__decorate([t.MethodDecoration.bound],o.prototype,"isBotInGame",null),t.BotBase=o}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},__decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){!function(t){t[t.NotStarted=0]="NotStarted",t[t.AvoidCollision=1]="AvoidCollision",t[t.AvoidEncirclement=2]="AvoidEncirclement",t[t.SeekFood=3]="SeekFood",t[t.SeekWeapon=4]="SeekWeapon",t[t.InterceptEnemy=5]="InterceptEnemy"}(t.BotStageEnum||(t.BotStageEnum={}));var e=function(e){function o(o,n,i){var r=e.call(this,o,n)||this;return r.datGUI=i,r._selectedStrategy=t.Strategy.Strategies.Default,r._selectedCollisionManager=t.Manager.Collision.Managers.Default,r._strategies=[],r._collisionManagers=[],r}return __extends(o,e),Object.defineProperty(o.prototype,"selectedStrategy",{get:function(){return this._selectedStrategy},set:function(e){var o=t.Strategy.Strategies[t.Strategy.Strategies[e]];if(this._selectedStrategy!=o){this._strategies[this._selectedStrategy].hideDatGui(),this._selectedStrategy=o;this.Strategy}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selectedCollisionManager",{get:function(){return this._selectedCollisionManager},set:function(e){this._selectedCollisionManager=t.Manager.Collision.Managers[t.Manager.Collision.Managers[e]]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Strategy",{get:function(){var e=this.selectedStrategy,o=this._strategies[e];if(void 0==o){var n=void 0;switch(e){case t.Strategy.Strategies.Default:n=new t.Strategy.DefaultStrategy(this,this.gameWrapper,this.canvas);break;case t.Strategy.Strategies.CalculateTorque:n=new t.Strategy.CalculateTorqueBotStrategy(this,this.gameWrapper,this.canvas);break;case t.Strategy.Strategies.BasicPursuit:n=new t.Strategy.PursuitBotStrategy(this,this.gameWrapper,this.canvas);break;case t.Strategy.Strategies.PursuitAndShoot:n=new t.Strategy.PursuitAndShootBotStrategy(this,this.gameWrapper,this.canvas);break;case t.Strategy.Strategies.DrawEnemies:n=new t.Strategy.DrawEnemiesBotStrategy(this,this.gameWrapper,this.canvas);break;case t.Strategy.Strategies.InterconnectFood:n=new t.Strategy.InterconnectFoodBotStrategy(this,this.gameWrapper,this.canvas);break;default:throw Error("Incompatible value or type '"+e+"' in Strategy. Type: "+typeof e+".")}o=this._strategies[e]=n}return o.showDatGui(this.datGUI),o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CollisionManager",{get:function(){var e=this.selectedCollisionManager,o=this._collisionManagers[e];if(void 0==o){var n=void 0;switch(e){case t.Manager.Collision.Managers.Default:n=new t.Manager.Collision.CollisionCourseManager(this,this.gameWrapper,this.canvas);break;case t.Manager.Collision.Managers.Advanced:n=new t.Manager.Collision.AdvancedCollisionCourseManager(this,this.gameWrapper,this.canvas);break;case t.Manager.Collision.Managers.ber:n=new t.Manager.Collision.berCollisionCourseManager(this,this.gameWrapper,this.canvas);break;default:throw Error("Incompatible value or type '"+e+"' in CollisionManager. Type: "+typeof e+".")}o=this._collisionManagers[e]=n}return o},enumerable:!0,configurable:!0}),o.prototype.go=function(){this.updateGeometry(),this.gameWrapper.input.canvas.forceClear();var t=this.Strategy.action();if(!t)throw new Error("Invalid Strategy Activity Result.");this.processActivity(t)},o.prototype.updateGeometry=function(){window.botFactory.clock.startFrame();var e=this.gameWrapper.player.getPosition(),o=this.gameWrapper.player.getRotation();this.gameWrapper.world.getWorkingBounds();this.sectorBoxSide=this.gameWrapper.world.getSectorSquaredWidth(),this.sectorBox=new t.Rect(e.x-this.sectorBoxSide/2,e.y-this.sectorBoxSide/2,this.sectorBoxSide,this.sectorBoxSide),this.canvas.drawRect(this.sectorBox,0,"#c0c0c0",!0,.1);var n=this.cos=Math.cos(o),i=this.sin=Math.sin(o);this.shapesHolster.playerCircle=new t.Circle(e.x,e.y,this.kartRadius*this.opt.playerRadiusMultiplier),this.shapesHolster.playerResourceGatherCircle=new t.Circle(e.x,e.y,this.kartRadius*this.opt.playerResourceGatherRadiusMultiplier),this.shapesHolster.closeToImminentDangerCircle=new t.Circle(e.x,e.y,this.opt.closeToImminentDangerRange);var r=Math.min(1,this.speedMult-1),a=this.opt.radiusFrontDetectorMultiplier/2*this.kartRadius,s=this.opt.radiusBehindDetectorMultiplier/2*this.kartRadius;this.shapesHolster.headCircle=new t.Circle(e.x+n*r*a,e.y+i*r*a,a),this.shapesHolster.tailCircle=new t.Circle(e.x-n*r*s,e.y-i*r*s,s);var c=t.Data.playerTurnRadius*this.opt.radiusSideDetectorsMultiplier,l=i*c,u=n*c;this.shapesHolster.playerLeftSideCircle=new t.Circle(e.x+l,e.y-u,c),this.shapesHolster.playerRightSideCircle=new t.Circle(e.x-l,e.y+u,c);var d=this.goal.coordinates,h=t.MathUtils.getDistance(e,d),p=this.opt.tunnelSideDistance,f=i*p,g=n*p,y=i*h,m=n*h,v=new t.Point2D(e.x+f,e.y-g),w=this.shapesHolster.tunnelLeftSideLine=new t.Line(v,new t.Point2D(v.x+m,v.y+y)),_=new t.Point2D(e.x-f,e.y+g),b=this.shapesHolster.tunnelRightSideLine=new t.Line(_,new t.Point2D(_.x+m,_.y+y)),C=void 0;(this.goal.isInTunnel=t.MathUtils.isLeft(w.point1,w.point2,d)&&t.MathUtils.isRight(b.point1,b.point2,d))&&(C=.85,this.goal.state=this.inFront(d)?t.GoalState.InFront:t.GoalState.InBack),this.canvas.drawTunnel(w,b,C),window.botFactory.clock.endFrame()},o.prototype.processActivity=function(t){if(t.isValid){var e=t.goalCoordinates,o=this.gameWrapper.world.getWorkingBounds();e.x<o.x&&(e.x=o.x+this.opt.wall.offsetLeftX),e.y<o.y&&(e.y=o.y+this.opt.wall.offsetTopY),e.x>o.width&&(e.x=o.width+this.opt.wall.offsetRightX),e.y>o.height&&(e.y=o.height+this.opt.wall.offsetBottomY),this.goal.coordinates=e,this.canvas.setMouseCoordinates(this.canvas.mapToMouse(e)),this.setAcceleration(t.acceleration),this.canvas.drawGoal(e)}},o}(t.BotBase);__decorate([t.MethodDecoration.bound],e.prototype,"go",null),__decorate([t.MethodDecoration.bound],e.prototype,"updateGeometry",null),__decorate([t.MethodDecoration.bound],e.prototype,"processActivity",null),t.Bot=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){var e;!function(t){t[t.First=0]="First",t[t.Default=0]="Default",t[t.Torque=1]="Torque",t[t.Pursuit=2]="Pursuit",t[t.Enemies=3]="Enemies",t[t.Food=4]="Food",t[t.Last=4]="Last"}(e=t.ContextMenuActions||(t.ContextMenuActions={}));var o={};o[e.Default]="fighter-jet",o[e.Torque]="cogs",o[e.Pursuit]="line-chart",o[e.Enemies]="exclamation",o[e.Food]="cutlery";var n=function(){function n(){this.showFancyMenu=!1,this.destroyedByInvalidCtrlKey=void 0,this.mouseClientPosition={clientX:0,clientY:0};for(var t="\n<li class='menu-item'>\n\t<a class='fa fa-{1}' href='#' target='_blank' data-context-menu-action='{0}'></a>\n</li>\n",n="",i=e.First;i<=e.Last;i++)n+=t.format(e[i],o[i]);var r="\n<nav class='menu'>\n\t<input class='menu-toggler' id='menu-toggler' type='checkbox'>\n\t<label for='menu-toggler'></label>\n\t<ul id='menu-ul-list'>{0}</ul>\n</nav>\n".format(n),a=document.createElement("div");a.className="menu-wrapper",a.id="menu-wrapper",a.style.visibility="hidden",a.innerHTML=r,document.body.appendChild(a),a.oncontextmenu=function(t){t.preventDefault()},this.domMenuWrapperElement=document.getElementById("menu-wrapper"),this.domMenuTogglerElement=document.getElementById("menu-toggler")}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this.showFancyMenu},enumerable:!0,configurable:!0}),n.prototype.init=function(t,e,o,n,i,r){this.gameWrapper=t,this.canvas=e,this.userInterface=o,this.bot=n,this.developerInterface=i,this.webSocketInterface=r,this.domMenuTogglerElement.disabled=!0;var a=this;this.gameWrapper.input.canvas.registerEvent(function(t){t.addEventListener("contextmenu",a.onContextMouseDown,!0),t.addEventListener("mousedown",a.onMouseDown,!0),t.addEventListener("mouseup",a.onMouseUp,!0),t.addEventListener("mousemove",a.onMouseMove,!0),document.addEventListener("keydown",a.onKeyDown,!0),document.addEventListener("keyup",a.onKeyUp,!0)})},n.prototype.setMenuVisibility=function(t){this.showFancyMenu=t,this.domMenuTogglerElement.checked=this.showFancyMenu,this.domMenuWrapperElement.style.visibility=this.showFancyMenu?"visible":"hidden"},n.prototype.toggleMenuVisibility=function(){this.setMenuVisibility(!this.showFancyMenu)},n.prototype.getElementFromPoint=function(o){var n=document.querySelectorAll(":hover"),i=n[n.length-1],r=i.getAttribute("data-context-menu-action");switch(e[r]){case e.Default:this.bot.selectedStrategy=t.Strategy.Strategies.Default;break;case e.Torque:this.bot.selectedStrategy=t.Strategy.Strategies.CalculateTorque;break;case e.Pursuit:this.bot.selectedStrategy=t.Strategy.Strategies.BasicPursuit;break;case e.Enemies:this.bot.selectedStrategy=t.Strategy.Strategies.DrawEnemies;break;case e.Food:this.bot.selectedStrategy=t.Strategy.Strategies.InterconnectFood}},n.prototype.onContextMouseDown=function(t){(this.destroyedByInvalidCtrlKey||t.ctrlKey&&2==t.button&&0==t.buttons&&!t.altKey&&!t.shiftKey)&&(t.preventDefault(),this.destroyedByInvalidCtrlKey=!1,window.log(+new Date,"----------\x3e onContextMouseDown"))},n.prototype.onMouseDown=function(t){this.bot.isBotInGame()&&(!t.ctrlKey||2!=t.button||2!=t.buttons||t.altKey||t.shiftKey||(t.preventDefault(),window.log(+new Date,"----------\x3e onMouseDown"),this.toggleMenuVisibility()))},n.prototype.onMouseUp=function(t){this.showFancyMenu&&(this.getElementFromPoint(t),window.log(+new Date,"----------\x3e onMouseUp"),this.setMenuVisibility(!1))},n.prototype.onMouseMove=function(t){this.showFancyMenu&&(this.mouseClientPosition.clientX=t.clientX,this.mouseClientPosition.clientY=t.clientY)},n.prototype.onKeyDown=function(t){this.showFancyMenu&&t.ctrlKey&&(t.altKey||t.shiftKey)&&(this.destroyedByInvalidCtrlKey=!0,window.log(+new Date,"----------\x3e onKeyDown"),this.setMenuVisibility(!1))},n.prototype.onKeyUp=function(t){!this.showFancyMenu||t.ctrlKey||t.altKey||t.shiftKey||(this.destroyedByInvalidCtrlKey=!0,window.log(+new Date,"----------\x3e onKeyUp"),this.getElementFromPoint(),this.setMenuVisibility(!1))},n}();__decorate([t.MethodDecoration.bound],n.prototype,"setMenuVisibility",null),__decorate([t.MethodDecoration.bound],n.prototype,"toggleMenuVisibility",null),__decorate([t.MethodDecoration.bound],n.prototype,"getElementFromPoint",null),__decorate([t.MethodDecoration.bound],n.prototype,"onContextMouseDown",null),__decorate([t.MethodDecoration.bound],n.prototype,"onMouseDown",null),__decorate([t.MethodDecoration.bound],n.prototype,"onMouseUp",null),__decorate([t.MethodDecoration.bound],n.prototype,"onMouseMove",null),__decorate([t.MethodDecoration.bound],n.prototype,"onKeyDown",null),__decorate([t.MethodDecoration.bound],n.prototype,"onKeyUp",null),t.ContextMenu=n}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){var e=function(){function t(t,e,o,n){this.gameWrapper=t,this.contextMenu=e,this.canvas=o,this.bot=n,this.originalEvents={fadeIn:null,onKeyUp:null,onMouseDown:null,onMouseUp:null,onMouseMove:null,onRequestAnimationFrameLoop:null},this.overlays={botOverlay:null,serverOverlay:null,prefOverlay:null,statsOverlay:null,fizzyOverlay:null,rageOverlay:null},this.originalEvents.fadeIn=$.fn.fadeIn;var i=this;$.fn.fadeIn=function(){var t=this;i.originalEvents.fadeIn.apply(t,arguments).promise().done(function(){t.trigger("fadeIn")})},this.initOverlays(),window.logDebugging=!0,window.visualDebugging=!1,window.autoRespawn=!1;var r=$("#modal-downloadapp");document.getElementById("play-btn");document.getElementById("mouseBtn").click(),r.bind("fadeIn",this.bypassModalPopupBlocker),this.bindToPlayButton(),this.unlockSkins(),document.getElementsByClassName("social")[0].style.display="none",document.body.addEventListener("mousewheel",this.canvas.setZoom),document.body.addEventListener("DOMMouseScroll",this.canvas.setZoom),this.onPrefChange()}return t.prototype.boot=function(){this.originalEvents.onKeyUp=window.game.input.keyboard._onKeyUp,this.originalEvents.onMouseDown=window.game.input.mouse._onMouseDown,this.originalEvents.onMouseUp=window.game.input.mouse._onMouseUp,this.originalEvents.onMouseMove=window.game.input.mouse._onMouseMove,this.originalEvents.onRequestAnimationFrameLoop=window.game.raf._onLoop,window.game.input.keyboard._onKeyUp=this.onKeyUp,window.game.input.mouse._onMouseDown=this.onMouseDown,window.game.input.mouse._onMouseUp=this.onMouseUp,window.game.input.mouse._onMouseMove=this.onMouseMove,window.game.raf._onLoop=this.updateRequestAnimationFrame,window.addEventListener("keydown",this.onKeyUp,!1),window.addEventListener("resize",this.onResize,!1),setInterval(this.get100SuperCoins,6e5),this.get100SuperCoins(),this.injectShowFlowButton()},t.prototype.injectShowFlowButton=function(){$("#init-screen").after('<div class="footer" style="z-index: 99999; bottom: 60px;">\n\t<div class="quality">\n\t\t<a href="#" id="popup-button" class="btn btn-fs">SHOW FLOW</a>\n\t</div>\n</div>'),$("#popup-button").click(function(t){t.preventDefault(),window.botFactory.externalGraph.createPopup()})},t.prototype.onResize=function(){var t=this.gameWrapper.input.canvas.getContext().canvas;t.width=window.game.canvas.width,t.height=window.game.canvas.height},t.prototype.bindToPlayButton=function(){$("#play-btn").click(this.playButtonClickListener);var t=$._data($("#play-btn")[0],"events");if(t){var e=t.click;e&&e.reverse()}},t.prototype.onPlayerDeath=function(){if(window.log("Called [onPlayerDeath]"),this.bindToPlayButton(),this.bot.isBotRunning=!1,this.fizzyText.play=!0,this.fizzyText.loop(),this.bot.isBotEnabled)var t=window.setInterval(function(){var e=$("#top-time-played span");if(e.is(":visible")){var o=e.text(),n=60*parseInt(o.split("m")[0])+parseInt(o.split("m")[1].split(" ")[1].split("s")[0]);kga("send",{hitType:"event",eventCategory:"InGame Bot",eventAction:"Time alive",eventValue:n}),window.clearInterval(t)}},250)},t.prototype.unlockSkins=function(){var t=Array.from(document.querySelectorAll(".blocked, .buy")),e=document.getElementsByClassName("share-facebook");for(var o in t){var n=t[o];n.innerHTML="Unlocked",n.style.backgroundColor="#2FC92F"}for(var i in e)delete e[i];for(var r in window.carList)window.carList[r].b="BLOCK.none",window.carList[r].section="free"},t.prototype.initOverlays=function(){var t=this.overlays.botOverlay=document.createElement("div");t.className="nsi bot",document.body.appendChild(t);var e=this.overlays.serverOverlay=document.createElement("div");e.className="nsi server",document.body.appendChild(e);var o=this.overlays.prefOverlay=document.createElement("div");o.className="nsi pref",document.body.appendChild(o);var n=this.overlays.statsOverlay=document.createElement("div");n.className="nsi stats",document.body.appendChild(n);var i=this.overlays.rageOverlay=document.createElement("div");i.className="nsi rage";var r=document.createElement("img");r.src="https://github.com/kmataru/kartwars.io-bot/raw/pre-release/src/DracoolaArt.Bot.Kartwars/images/rage-logo-red-com.png",i.appendChild(r),document.body.appendChild(i);var a=this.overlays.fizzyOverlay=document.createElement("div");a.className="nsi fizzy",a.id="fizzytext",document.getElementById("login-modal").appendChild(a);var s=this.fizzyText=new ReverseEngineering.FizzyText("MegaBot.js",800,350,!1,100);s.insertInTo(a),s.loop();var c=0,l=["you are","not","what you think"];window.setInterval(function(){c==l.length&&(c=0),s.message=l[c++]},2500)},t.prototype.setRageVisible=function(t){this.overlays.rageOverlay.style.visibility=t?"visible":"hidden"},t.prototype.toggleOverlays=function(){var t=this.overlays;Object.keys(t).forEach(function(e){if("rageOverlay"!=e&&"fizzyOverlay"!=e){var o=t[e];if(o.style){var n="hidden"!==o.style.visibility?"hidden":"visible";o.style.visibility=n}}})},t.prototype.bypassModalPopupBlocker=function(){window.setTimeout(function(){$("#modal-downloadapp").is(":visible")&&$("#modal-downloadapp .close-modal").click()},350)},t.prototype.get100SuperCoins=function(){$(".btn.btn-getcoin").click()},t.prototype.onGameReadyDelegate=function(){var t=this;window.esto.updateItems(),window.game.time.watch("fps",function(e,o,n){return t.onFrameUpdate(),n})},t.prototype.playButtonClickListener=function(t){var e=t.target;$("#play-btn").off("click",this.playButtonClickListener),$(e).addClass("disabled"),t.preventDefault(),t.stopImmediatePropagation(),window.log("Triggered [playButtonClickListener]"),this.fizzyText.explode(),this.saveNick(),this.onPrefChange(),kga("send",{hitType:"event",eventCategory:"InGame",eventAction:"Play",eventLabel:"Play"}),setTimeout(function(){e.dispatchEvent(t.originalEvent)},750)},t.prototype.saveNick=function(){document.getElementById("nick-input").value},t.prototype.hideTop=function(){for(var t=document.querySelectorAll("div.nsi"),e=0;e<t.length;e++)"4px"===t[e].style.top&&"300px"===t[e].style.width&&(t[e].style.visibility="hidden",this.bot.isTopHidden=!0,window.topscore=t[e])},t.prototype.resetZoom=function(){this.canvas.resetZoom()},t.prototype.onKeyUp=function(t){this.originalEvents.onKeyUp(t),this.gameWrapper.util.isPlaying&&(!t.ctrlKey||66!==t.keyCode||t.shiftKey||t.altKey||(this.bot.isBotEnabled=!this.bot.isBotEnabled,this.gameWrapper.input.canvas.forceClear()))},t.prototype.onMouseMove=function(t){this.bot.isBotInGame()||this.originalEvents.onMouseMove(t)},t.prototype.onMouseDown=function(t){var e=!1;if(!this.contextMenu.isActive){if(this.bot.isBotInGame())switch(t.buttons){case 1:e=!0;break;case 2:this.bot.defaultAccel=1,e=!0}e&&this.originalEvents.onMouseDown(t),this.onPrefChange()}},t.prototype.onMouseUp=function(t){if(!this.contextMenu.isActive){if(this.bot.isBotInGame())switch(t.buttons){case 2:this.bot.defaultAccel=0}this.originalEvents.onMouseUp(t)}},t.prototype.updateStats=function(){var t,e=[];if(0!==this.bot.scores.length){t=Math.round((this.bot.scores[Math.floor((this.bot.scores.length-1)/2)]+this.bot.scores[Math.ceil((this.bot.scores.length-1)/2)])/2),e.push("games played: "+this.bot.scores.length),e.push("a: "+Math.round(this.bot.scores.reduce(function(t,e){return t+e})/this.bot.scores.length)+" m: "+t);for(var o=0;o<this.bot.scores.length&&o<10;o++)e.push(o+1+". "+this.bot.scores[o]);this.overlays.statsOverlay.innerHTML=e.join("<br/>")}},t.prototype.updateStatsEx=function(){var t=[];t.push("Frames:"),t.push("");var e=window.botFactory.clock.getFrames();window.botFactory.clock.clearFrames();for(var o in e)t.push(o+": "+e[o]+"ms");this.overlays.statsOverlay.innerHTML=t.join("<br/>")},t.prototype.onPrefChange=function(){var t=[];this.handleTextColor;t.push("Game version: "+window.version),t.push("Bot version: "+window.GM_info.script.version),t.push("[Ctrl + B]    : Toggle bot"),t.push("[Mouse Wheel] : Zoom"),this.overlays.prefOverlay.innerHTML=t.join("<br/>")},t.prototype.onFrameUpdate=function(){if(this.gameWrapper.util.isPlaying){var t=[];t.push("Latency: "+window.ping+"ms"),t.push("FPS: "+window.game.time.fps),this.overlays.botOverlay.innerHTML=t.join("<br/>")}this.updateStatsEx()},t.prototype.originalGameUpdate=function(t){window.botFactory.clock.startFrame(),window.game.update(t),window.botFactory.clock.endFrame()},t.prototype.gameUpdate=function(t){if(window.botFactory.clock.startFrame(),this.canvas.maintainZoom(),!this.bot.isBotInGame())return this.gameWrapper.input.canvas.forceClear(),void this.originalGameUpdate(t);Date.now();this.gameWrapper.items.reset(),this.originalGameUpdate(t),this.bot.isBotInGame()&&(this.bot.isBotRunning=!0,this.fizzyText.play=!1,this.bot.go()),this.bot.isBotEnabled&&this.bot.isBotRunning||(window.game.input.mouse._onMouseDown=this.onMouseDown),this.canvas.drawAllInterceptedWrappedCalls(),window.botFactory.clock.endFrame()},t.prototype.updateRequestAnimationFrame=function(t){window.game.raf.isRunning&&(this.gameUpdate(Math.floor(t)),window.game.raf._timeOutID=window.requestAnimationFrame(window.game.raf._onLoop))},t.prototype.quit=function(){this.bot.isBotInGame()&&window.esto.reiniciar()},t.prototype.handleTextColor=function(t){return'<span style="color:'+(t?'green;">enabled':'red;">disabled')+"</span>"},t}();__decorate([t.MethodDecoration.bound],e.prototype,"onResize",null),__decorate([t.MethodDecoration.bound],e.prototype,"bindToPlayButton",null),__decorate([t.MethodDecoration.bound],e.prototype,"onPlayerDeath",null),__decorate([t.MethodDecoration.bound],e.prototype,"onGameReadyDelegate",null),__decorate([t.MethodDecoration.bound],e.prototype,"playButtonClickListener",null),__decorate([t.MethodDecoration.bound],e.prototype,"hideTop",null),__decorate([t.MethodDecoration.bound],e.prototype,"onKeyUp",null),__decorate([t.MethodDecoration.bound],e.prototype,"onMouseMove",null),__decorate([t.MethodDecoration.bound],e.prototype,"onMouseDown",null),__decorate([t.MethodDecoration.bound],e.prototype,"onMouseUp",null),__decorate([t.MethodDecoration.bound],e.prototype,"updateStats",null),__decorate([t.MethodDecoration.bound],e.prototype,"onPrefChange",null),__decorate([t.MethodDecoration.bound],e.prototype,"onFrameUpdate",null),__decorate([t.MethodDecoration.bound],e.prototype,"originalGameUpdate",null),__decorate([t.MethodDecoration.bound],e.prototype,"gameUpdate",null),__decorate([t.MethodDecoration.bound],e.prototype,"updateRequestAnimationFrame",null),t.UserInterface=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},DracoolaArt;!function(t){!function(t){var e=function(){function e(t,e,o){this.gameWrapper=t,this.bot=e,this.userInterface=o}return e.prototype.boot=function(){this.bot.watch("stage",function(e,o,n){return o!=n&&window.log("Bot Stage: "+t.BotStageEnum[+o]+" -> "+t.BotStageEnum[+n]),n})},e.prototype.onGameReadyDelegate=function(){var t=this;window.mainCar.img.watch("alive",function(e,o,n){return o!=n&&(window.log("Player Alive:",n),t.bot.onPlayerDeath(),t.bot.Strategy.onPlayerDeath(),t.userInterface.onPlayerDeath(),window.autoRespawn&&setTimeout(t.gameWrapper.util.delayedConnect,5e3)),n})},e}();__decorate([t.MethodDecoration.bound],e.prototype,"onGameReadyDelegate",null),t.DeveloperInterface=e;var o=function(){function t(){!function(t,e,o,n,i,r,a){t.GoogleAnalyticsObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=+new Date,r=e.createElement(o),a=e.getElementsByTagName(o)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(r,a)}(window,document,"script",0,"kga"),kga("create","UA-64079204-4","auto"),kga("send","pageview")}return t}();t.AdsInterface=o}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){var e;!function(t){t[t.Default=0]="Default",t[t.Lighter=1]="Lighter"}(e=t.DatGuiThemes||(t.DatGuiThemes={}));var o=function(){function o(){this._selectedTheme=e.Default,$(".best-users").css("right","calc(300px - 10px)"),$("#hud").css("left","initial").css("right","calc(300px - 10px)");var t=this.gui=new dat.GUI,o=this.guiDomParentElement=t.domElement.parentElement;$(o).css("z-index","1000").mouseenter(function(){$(this).data("isInside",!0)}).mouseleave(function(){$(this).data("isInside",!1)})}return Object.defineProperty(o.prototype,"selectedTheme",{get:function(){return this.checkTheme(),this._selectedTheme},set:function(t){this._selectedTheme=t,this.checkTheme()},enumerable:!0,configurable:!0}),o.prototype.checkTheme=function(){var t=$(this.guiDomParentElement);this._selectedTheme==e.Default?t.removeClass("light-theme"):t.addClass("light-theme")},o.prototype.init=function(o,n,i,r,a,s){var c=this;this.gameWrapper=o,this.canvas=n,this.userInterface=i,this.bot=r,this.developerInterface=a,this.webSocketInterface=s;var l=this.gui,u=l.addFolder("Actions");u.open(),l.remember(this),l.remember(r),l.remember(window);var d={Darker:e.Default,Lighter:e.Lighter},h={Default:t.Strategy.Strategies.Default,"Calculate Torque":t.Strategy.Strategies.CalculateTorque,"Basic Pursuit":t.Strategy.Strategies.BasicPursuit,"Pursuit & Shoot":t.Strategy.Strategies.PursuitAndShoot,"Draw Enemies":t.Strategy.Strategies.DrawEnemies,"Interconnect Food":t.Strategy.Strategies.InterconnectFood},p={Default:t.Manager.Collision.Managers.Default,Advanced:t.Manager.Collision.Managers.Advanced,"ber":t.Manager.Collision.Managers.ber};u.add(this,t.nameof(function(){return c.selectedTheme}),d).name("GUI Theme"),u.add(r,t.nameof(function(){return r.isBotEnabled})).name("Enable Bot"),u.add(r,t.nameof(function(){return r.selectedStrategy}),h).name("Strategy"),u.add(r,t.nameof(function(){return r.selectedCollisionManager}),p).name("Collision Manager"),u.add(window,t.nameof(function(){return window.autoRespawn})).name("Auto Respawn"),u.add(i,t.nameof(function(){return i.toggleOverlays})).name("Toggle Overlays"),u.add(i,t.nameof(function(){return i.resetZoom})).name("Reset Zoom"),u.add(i,t.nameof(function(){return i.quit})).name("Quit");r.Strategy},o}();t.DatGUI=o}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){var e=function(){function t(){}return t.prototype.createPopup=function(){this.popup=window.open("http://scripts.local.com/kartwars.io-bot/html/test.htm","_blank","location=yes,width=800,height=600,scrollbars=yes,status=yes"),this.popup.moveTo(50,50),this.popup.resizeTo(window.screen.width-100,window.screen.height-100)},t.prototype.operation=function(){if(null!=this.popup){var t={edges:[],blocks:[]},e=window.stack;e.reverse(),e.pop(),e.pop();for(var o in e){var n=e[o],i=parseInt(o);i>0&&t.edges.push({id:o,block1:i-1,connector1:["out","output"],block2:i,connector2:["in","input"]}),t.blocks.push({id:o,x:175*i-900,y:0,type:"Function",module:null,values:{in:n.functionName,out:"0"}})}var r=JSON.stringify(t);this.popup.postMessage(r,"http://scripts.local.com")}},t}();t.ExternalGraph=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));var DracoolaArt;!function(t){!function(t){var e=function(){function e(e){this.isInitialized=!1,this.data={baseURL:e}
;var o=this.datGUI=new t.DatGUI,n=this.gameWrapper=new t.GameWrapper,i=this.canvas=new t.CanvasUtils(n),r=this.bot=new t.Bot(n,i,o),a=this.contextMenu=new t.ContextMenu,s=this.userInterface=new t.UserInterface(n,a,i,r),c=this.developerInterface=new t.DeveloperInterface(n,r,s),l=(this.adsInterface=new t.AdsInterface,this.webSocketInterface=new t.WebSocketInterface);this.clock=new t.Manager.Time.TimerFrame,this.externalGraph=new t.ExternalGraph;o.init(n,i,s,r,c,l),a.init(n,i,s,r,c,l)}return e.prototype.boot=function(){var t=(this.gameWrapper,this.canvas,this.bot,this.contextMenu,this.userInterface),e=this.developerInterface,o=this.webSocketInterface;this.externalGraph,this.datGUI;window.autobotSayHello();var n=function(){window.log("Call: [gameReadyDelegate]"),window.distanciaMaximaX=window.game.world.bounds.width,window.distanciaMaximaY=window.game.world.bounds.height,t.onGameReadyDelegate(),e.onGameReadyDelegate(),o.onGameReadyDelegate(),this.isInitialized||(t.boot(),e.boot(),this.isInitialized=!0)};document.addEventListener("gameReady",n),$("#play-btn").removeClass("btn-none").addClass("btn-show")},e}();t.BotFactory=e}(t.KartwarsBot||(t.KartwarsBot={}))}(DracoolaArt||(DracoolaArt={}));